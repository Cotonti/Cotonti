/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
(()=>{"use strict";class e extends EventTarget{mode="production";driverType="";constructor(e,t=null){super(),this.driverType=e,null!==t&&(this.mode=t),this.init()}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsClient: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class t extends EventTarget{mode="production";eventsUrl=null;constructor(e,t=null){super(),null!==t&&""!==t&&(this.mode=t),this.eventsUrl=e}init(){}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsDriver: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class n extends t{#e=null;init(){if(null!==this.#e)return;"production"!==this.mode&&console.log("init ServerEventsSSEDriver. ",this.eventsUrl);const e=this.eventsUrl+"&ts="+Date.now();this.#e=new EventSource(e),"production"!==this.mode&&(this.#e.onopen=function(e){console.log("ServerEventsSSEDriver connection is open")}),this.#e.onmessage=e=>{const t=JSON.parse(e.data);void 0!==t.data&&"string"==typeof t.data&&""!==t.data&&(t.data=JSON.parse(t.data)),t.eventId=e.lastEventId,this.onEventTriggered(t)},"production"!==this.mode&&(this.#e.onerror=function(e){console.log("ServerEventsSSEDriver connection error")})}}class s extends t{#t=6e3;#n=null;#s=!1;init(){this.#s||(this.#s=!0,"production"!==this.mode&&console.log("init ServerEventsAjaxDriver ",this.eventsUrl),this.#n=setTimeout((()=>this.#o()),500))}async#o(){try{const e=this.eventsUrl+"&ts="+Date.now(),t=await fetch(e);if(!t.ok)throw new Error(`Response status: ${t.status}`);const n=await t.json();void 0!==n.events&&n.events.forEach((e=>{e.eventId=void 0!==e.id?e.id:null,this.onEventTriggered(e)})),this.#n=setTimeout((()=>this.#o()),this.#t)}catch(e){console.log("ServerEventsAjaxDriver get events error: "+e.message),this.#n=setTimeout((()=>this.#o()),this.#t)}}}class o{#i="/";#r="production";constructor(e=null,t=null){null!==e&&(this.#i=e),null!==t&&(this.#r=t)}getByType(e){let t=null;const o=this.#i+"?n=server-events&a=sse",i=this.#i+"?n=server-events&a=ajax&_ajax=1";return"sse"===e?(t=new n(o),"production"!==this.#r&&console.log("using ServerEventsSSEDriver",o)):(t=new s(i),"production"!==this.#r&&console.log("using ServerEventsAjaxDriver",i)),t}}class i extends e{init(){"production"!==this.mode&&console.log("init ServerEventsClient");const e=new o(getBaseHref(),this.mode).getByType(this.driverType,this.mode);e.addEventListener("event",(e=>{this.onEventTriggered(e.detail)})),e.init()}}class r extends e{init(){let e="/js/sharedWorkerServerEvents.min.js";"production"!==this.mode&&console.log("init ServerEventsSharedWorkerClient: "+e);try{const t=new SharedWorker(e).port;t.postMessage({config:{mode:this.mode,driver:this.driverType,baseUrl:getBaseHref()}}),t.onmessage=e=>{"production"!==this.mode&&console.log("ServerSentEventsSharedWorker event",e.data),this.onEventTriggered(e.data)}}catch(e){console.error(e)}}}class a{mode="production";#a=null;#l="sharedWorker";#d="sse";#c=null;constructor(){this.#c=new Map,this.#d=cot.cfg.serverEvents}addObserver(e,t,n){"none"!==cot.cfg.serverEvents&&(this.#c.set(e,{name:e,event:t,onEvent:n}),null===this.#a&&this.#h())}#h(){"none"!==cot.cfg.serverEvents&&("sharedWorker"===this.#l&&void 0!==typeof SharedWorker?("production"!==this.mode&&console.log("creating ServerEventsSharedWorkerClient"),this.#a=new r(this.#d,this.mode)):("production"!==this.mode&&console.log("creating ServerEventsClient"),this.#a=new i(this.#d,this.mode)),this.#a.addEventListener("event",(e=>{this.#v(e.detail)})))}#v(e){"production"!==this.mode&&console.log("Server triggered event",e),this.#c.forEach((t=>{t.event===e.event&&"function"==typeof t.onEvent&&t.onEvent(e)}))}}class l{static containerClass="toast-container position-fixed bottom-0 end-0 p-3";title="";message="";hint="";type="";delay=5e3;#u=null;constructor(e,t="",n="",s=""){void 0!==window.bootstrap?(this.title=t,this.message=e,this.hint=n,this.type=s):console.error('Bootstrap is not found. It is required for use "Toast" component')}show(){if(null===this.#u){let e=document.getElementById("toast-container");null===e&&(e=this.#m()),this.#u=e}const e=`<strong class="me-auto">${this.title}</strong>`,t=""!==this.hint?`<small>${this.hint}</small>`:"",n=`<div class="toast${""!==this.type?` text-bg-${this.type}`:""}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="${this.delay}"><div class="toast-header">${e}${t}<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div><div class="toast-body">${this.message}</div></div>`,s=document.createElement("div");s.innerHTML=n;const o=s.firstElementChild;this.#u.appendChild(o),new window.bootstrap.Toast(o).show(),this.#u.lastElementChild.addEventListener("hidden.bs.toast",(()=>{o.remove(),""===this.#u.innerHTML&&(this.#u.remove(),this.#u=null)}))}#m(){const e=document.createElement("div");return e.id="toast-container",e.className=l.containerClass,document.body.append(e),e}}class d{title="";content="";buttons=null;centered=!1;dialogClass="modal-dialog";#p=null;constructor(e,t="",n=null){void 0!==window.bootstrap?(this.title=t,this.content=e,this.buttons=n):console.error('Bootstrap is not found. It is required for use "Modal" component')}show(){let e=this.dialogClass;this.centered&&(e+=" modal-dialog-centered");const t=`<div class="modal fade" id="CotontiDynamicModal" tabindex="-1" aria-labelledby="CotontiDynamicModalLabel" aria-hidden="true"><div class="${e}"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="CotontiDynamicModalLabel">${this.title}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">${this.content}</div><div class="modal-footer"></div></div></div></div>`,n=document.createElement("div");n.innerHTML=t,this.#p=n.firstElementChild,this.#g(),document.body.appendChild(this.#p),new bootstrap.Modal(this.#p).show(),this.#p.addEventListener("hidden.bs.modal",(()=>{this.#p.remove()}))}#g(){const e=this.#E();if(""===e||e===[])return;const t=this.#p.querySelector(".modal-footer");"string"!=typeof e?Array.isArray(e)&&e.forEach((e=>{"string"!=typeof e?t.appendChild(e):t.innerHTML+=e})):t.innerHTML=e}#E(){const e=[];let t=this.buttons;return t===[]?e:null===t?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':"string"==typeof t?t:(Array.isArray(t)&&t.forEach((t=>{if("string"==typeof t)return void e.push(t);const n=document.createElement("button");void 0!==t.label&&(n.innerHTML=t.label),n.setAttribute("type",void 0!==t.btnType?t.btnType:"button"),n.classList.add("btn"),void 0!==t.type&&n.classList.add("btn-"+t.type),void 0!==t.closeOnClick&&!0===t.closeOnClick&&n.setAttribute("data-bs-dismiss","modal"),void 0!==t.onClick&&"function"==typeof t.onClick&&n.addEventListener("click",(e=>t.onClick(e))),e.push(n)})),e)}}window.cot=new class{cfg={};L={};#y=null;init(e){void 0!==e.config&&(this.cfg=e.config),void 0!==e.lang&&(this.L=e.lang)}getServerEvents(){return null===this.#y&&(this.#y=new a),this.#y}confirm(e,t,n,s="Ok",o="Cancel"){this.modal(e,t,[{label:s,onClick:e=>n(e),type:"primary",closeOnClick:!0},{label:o,closeOnClick:!0,type:"secondary"}])}getModal(e,t="",n=null){return new d(e,t,n)}modal(e,t="",n=null){const s=this.getModal(e,t,n);return s.show(),s}getToast(e,t="",n="",s=""){return new l(e,t,n,s)}toast(e,t="",n="",s="",o=5e3){const i=this.getToast(e,t,n,s);return null!==o&&(i.delay=o),i.show(),i}async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let t=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let n of e)n in this.loadedData||t.push(n);if(t.length>0){let e=new URLSearchParams({n:"main",a:"get"});t.forEach(((t,n,s)=>{e.append("data["+n+"]",t)})),e.append("_ajax",1);try{let t=await fetch("index.php?"+e.toString());if(t.ok){const e=await t.json();if(e.success)for(const t in e.data)this.loadedData[t]=e.data[t]}}catch(e){}}let n={};for(let t of e)t in this.loadedData&&(n[t]=this.loadedData[t]);return n}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let t=document.querySelectorAll(".captcha-place-holder");for(let n of t){n.innerHTML=e.captcha,this.executeScriptElements(n),n.classList.remove("captcha-place-holder","loading"),n.classList.add("captcha");const t=n.closest("form");if(null!==t){let n=t.querySelector('input[type="hidden"][name="x"]');null!==n&&n.setAttribute("value",e.x)}}}))}executeScriptElements(e){const t=e.querySelectorAll("script");Array.from(t).forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.text=e.text,e.parentNode.replaceChild(t,e)}))}}})();

function encodeURIfix(str) {
	// to prevent twice encoding
	// and fix '[',']' signs to follow RFC3986 (section-3.2.2)
	return encodeURI(decodeURI(str)).replace(/%5B/g, '[').replace(/%5D/g, ']');
}

function getBaseHref() {
	var href = document.getElementsByTagName('base')[0].href;
	if (href == null) {
		return '/';
	} else {
		return href;
	}
}

function popup(code, w, h){
    window.open(getBaseHref() + 'index.php?o=' + code, '', 'toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width=' + w + ',height=' + h + ',left=32,top=16');
}

/**
 * @todo move to pfs module
 */
function pfs(id, c1, c2, parser){
    window.open(
		getBaseHref() + 'index.php?e=pfs&userid=' + id + '&c1=' + c1 + '&c2=' + c2 + '&parser=' + parser,
		'PFS',
		'status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16'
	);
}

function redirect(url){
    location.href = url.options[url.selectedIndex].value;
}

function toggleblock(id){
    var bl = document.getElementById(id);
    if (bl.style.display == 'none') {
        bl.style.display = '';
    }
    else {
        bl.style.display = 'none';
    }
	return false;
}

function toggleAll(action) {
	var blks = document.querySelectorAll('[id^="blk_"]');
	for (i = 0; i < blks.length; i++) {
		if (action == 'hide') {
			blks[i].style.display = 'none';
		} else if (action == 'show') {
			blks[i].style.display = 'table-row-group';
		}
	}
	return false;
}

// Inserts text into textarea at cursor position
function insertText(docObj, fieldName, value) {
	var field = null;
	if (!docObj) {
		docObj = document;
	}
	// Find the field in the docObj
	findField:
	for (var i = 0; i < docObj.forms.length; i++) {
		for (var j = 0; j < docObj.forms[i].elements.length; j++) {
			if (docObj.forms[i].elements[j].name == fieldName) {
				field = docObj.forms[i].elements[j];
				break findField;
			}
		}
	}
	if (!field) {
		return false;
	}

	// Insert the text
	if (docObj.selection) {
		// MSIE and Opera
		field.focus();
		var sel = docObj.selection.createRange();
		sel.text = value;
	} else if (field.selectionStart || field.selectionStart == 0) {
		// Mozilla
		var startPos = field.selectionStart;
		var endPos = field.selectionEnd;
		field.value = field.value.substring(0, startPos) + value + field.value.substring(endPos, field.value.length);
	} else {
		field.value += value;
	}
	return true;
}

// Array of ajax error handlers
// Example of use:
// ajaxErrorHandlers.push({func: myErrorHandler});
// ajaxSuccessHandlers.push({func: mySuccessHandler});
var ajaxErrorHandlers = new Array();
var ajaxSuccessHandlers = new Array();
// AJAX enablement defaults to false
var ajaxEnabled = false;
// Required to calculate paths
if (typeof jQuery != 'undefined') {
	var ajaxCurrentBase = location.href.replace($('base').eq(0).attr('href'), '').replace(/\?.*$/, '').replace(/#.*$/, '');
}
// This flag indicates that AJAX+history has been used on this page
// It means that "#" or home link should be loaded via ajax too
var ajaxUsed = false;
// Global flag to let everybody know that AJAX has failed
var ajaxError = false;

/**
 * AJAX helper function
 * @param {hash} settings A hashtable with settings
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxSend(settings) {
	var method = settings.method ? settings.method.toUpperCase() : 'GET';
	var data = settings.data || '';
	var url = settings.url || $('#' + settings.formId).attr('action');
	if (method === 'POST') {
		data += '&' + $('#' + settings.formId).serialize();
	} else if (settings.formId) {
		var sep = url.indexOf('?') > 0 ? '&' : '?';
		url += sep + $('#' + settings.formId).serialize();
	}
	$.ajax({
		type: method,
		url: encodeURIfix(url),
		data: data,
		beforeSend: function() {
			if (!settings.nonshowloading) {
				$('#' + settings.divId)
					.append('<span style="position:absolute; left:' + ($('#' + settings.divId).width()/2 - 110) + 'px;top:' + ($('#' + settings.divId).height()/2 - 9) + 'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css('position', 'relative');
			}
		},
		success: function(msg) {
			if (!settings.nonshowloading) {
				$('#loading').remove();
			}
			if (!settings.nonshowfadein) {
				$('#' + settings.divId).hide().html(msg).fadeIn(500);
			} else {
				$('#' + settings.divId).html(msg);
			}
			for (var i = 0; i < ajaxSuccessHandlers.length; i++) {
				if(ajaxSuccessHandlers[i].func)
					ajaxSuccessHandlers[i].func(msg);
				else
					ajaxSuccessHandlers[i](msg);
			}
		},
		error: function(msg) {
			if (!settings.nonshowloading) {
				$('#loading').remove();
			}
			if (!settings.nonshowfadein) {
				$('#' + settings.divId).hide().html(msg).fadeIn(500);
			} else {
				$('#' + settings.divId).html(msg);
			}
			if (ajaxErrorHandlers.length > 0) {
				for (var i = 0; i < ajaxErrorHandlers.length; i++) {
					if (ajaxErrorHandlers[i].func) {
						ajaxErrorHandlers[i].func(msg);
					} else {
						ajaxErrorHandlers[i](msg);
					}
				}
			} else {
				alert('AJAX error: ' + msg);
				ajaxError = true;
			}
		}
	});
	return false;
}

/**
 * AJAX subpage loader with history support
 * @param {string} hash A hash-address string
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxPageLoad(hash) {
    if (hash !== '') {
		hash.replace(/^#/, '');
	}
	var m = hash.match(/^get(-.*?)?;(.*)$/);
	if (m) {
		// ajax bookmark
        var url = m[2].indexOf(';') > 0 ? m[2].replace(';', '?') : ajaxCurrentBase + '?' + decodeURIComponent(m[2]);
		ajaxUsed = true;
		return ajaxSend({
			method: 'GET',
			url: url,
			divId: m[1] ? m[1].substr(1) : 'ajaxBlock'
		});
	} else if (hash === '' && ajaxUsed) {
		// ajax home
		return ajaxSend ({
			url: location.href.replace(/#.*$/, ''),
			divId: 'ajaxBlock'
		});
	}
	return true;
}

/**
 * AJAX subform loader without history tracking
 * @param {string} hash A hash-address string
 * @param {string} formId Target form id attribute
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxFormLoad(hash, formId) {
	var m = hash.match(/^(get|post)(-.*?)?;(.*)$/);
	if (m) {
		// ajax bookmark
		var url = m[3].indexOf(';') > 0 ? m[3].replace(';', '?') : ajaxCurrentBase + '?' + m[3];
		ajaxUsed = true;
		return ajaxSend({
			method: m[1].toUpperCase(),
			url: url,
			divId: m[2] ? m[2].substr(1) : 'ajaxBlock',
			formId: formId
		});
	}
	return true;
}

/**
 * Constructs ajaxable hash string
 * @param {string} href Link href or form action attribute
 * @param {string} rel An attribute value possibly containing a hash address
 * @param {string} formData Is passed for forms only, is 'post' for POST forms
 * or serialized form data for GET forms
 * @return A valid hash-address string
 * @type string
 */
function ajaxMakeHash(href, rel, formData) {
	var hash = (formData == 'post') ? 'post' : 'get';
	var hrefBase, params;
	var sep = '?';
	var m = rel ? rel.match(/(get|post)(-[^ ;]+)?(;\S*)?/) : false;
	if (m) {
		hash = m[1];
		if (m[2]) {
			hash += m[2];
		}
		if (m[3]) {
			href = m[3].substr(1);
			sep  = ';';
		}
	}
	hash += ';'
	if (href.indexOf(sep) > 0) {
		hrefBase = href.substr(0, href.indexOf(sep));
		params = href.substr(href.indexOf(sep) + 1);
		if (formData && formData != 'post') {
			params += '&' + formData;
		}
	} else {
		hrefBase = href;
		params = '';
		if (formData && formData != 'post') {
			params += sep + formData;
		}
	}
	hash += hrefBase == ajaxCurrentBase ? params : hrefBase + ';' + params;
	return hash;
}

/**
 * Standard event bindings
 */
function bindHandlers() {
	if (location.hash == '#comments' || location.hash.match(/#c\d+/)) {
		$('.comments').css('display', '');
	}
	$('.comments_link').click(function() {
		if($('.comments').css('display') == 'none') {
			$('.comments').css('display', '');
		} else {
			$('.comments').css('display', 'none');
		}
	});

	if(location.href.match(/#comments/)) {
		$('.comments').css('display', '');
	}

	if (ajaxEnabled) {
		// AJAX auto-handling
		$('body').on('submit', 'form.ajax', function() {
			if ($(this).attr('method').toUpperCase() == 'POST') {
				ajaxFormLoad(ajaxMakeHash($(this).attr('action').replace(/#.*$/, ''), $(this).attr('class'), 'post'), $(this).attr('id'));
			} else {
				window.location.hash = ajaxMakeHash($(this).attr('action').replace(/#.*$/, ''), $(this).attr('class'), $(this).serialize());
			}
			return ajaxError;
		});
		$('body').on('click', 'a.ajax', function() {
			window.location.hash = ajaxMakeHash($(this).attr('href').replace(/#.*$/, ''), $(this).attr('rel'));
			return ajaxError;
		});

		// AJAX action confirmations
		$('body').on('click', 'a.confirmLink', function() {
			if ($(this).attr('href').match(/message.+920/i)) {
				if ($('#confirmBox')) {
					$('#confirmBox').remove();
				}
				$('body').prepend('<div id="confirmBox" class="jqmWindow"></div>');
				$('#confirmBox').jqm({ajax:$(this).attr('href'),modal:true,onLoad:function(){
					$('#confirmBox').css('margin-left', '-'+($('#confirmBox').width()/2)+'px');
					$('#confirmBox').css('margin-top', '-'+($('#confirmBox').height()/2)+'px');
				}});
				$('#confirmBox').jqmShow();
				return false;
			} else {
				return true;
			}
		});

		// Listen to hash change events
		$(window).on('hashchange', function() {
			ajaxPageLoad(window.location.hash.replace(/^#/, ''));
		});

		$('body').on('click', 'a#confirmNo', function() {
			if ($("#confirmBox").is(".jqmWindow"))
			{
				$('#confirmBox').jqmHide();
				$('#confirmBox').remove();
				return false;
			}
			else
			{
				return true;
			}
		});
	}
}

if (typeof jQuery != 'undefined') {
    $(document).ready(function() {
        // If page was loaded with hash
        if (ajaxEnabled) {
            if(window.location.hash != '') {
                ajaxPageLoad(window.location.hash.replace(/^#/, ''));
            }
        }

        bindHandlers();
    });
}

window.name = 'main';//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2NsaWVudC9CYXNlU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9kcml2ZXIvQmFzZVNlcnZlckV2ZW50c0RyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c1NTRURyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c0FqYXhEcml2ZXIuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9TZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvVG9hc3QuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvQ290b250aUFwcGxpY2F0aW9uLmpzIiwiYmFzZS5qcyJdLCJuYW1lcyI6WyJCYXNlU2VydmVyRXZlbnRzQ2xpZW50IiwiRXZlbnRUYXJnZXQiLCJtb2RlIiwiZHJpdmVyVHlwZSIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJ0aGlzIiwiaW5pdCIsIm9uRXZlbnRUcmlnZ2VyZWQiLCJldmVudERhdGEiLCJjb25zb2xlIiwibG9nIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJCYXNlU2VydmVyRXZlbnRzRHJpdmVyIiwiZXZlbnRzVXJsIiwiU2VydmVyRXZlbnRzU1NFRHJpdmVyIiwidXJsIiwiRGF0ZSIsIm5vdyIsIkV2ZW50U291cmNlIiwib25vcGVuIiwib25tZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInVuZGVmaW5lZCIsImV2ZW50SWQiLCJsYXN0RXZlbnRJZCIsIm9uZXJyb3IiLCJTZXJ2ZXJFdmVudHNBamF4RHJpdmVyIiwic2V0VGltZW91dCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsImV2ZW50cyIsImZvckVhY2giLCJpZCIsImVycm9yIiwibWVzc2FnZSIsIlNlcnZlckV2ZW50c0RyaXZlckZhY3RvcnkiLCJiYXNlVXJsIiwiZ2V0QnlUeXBlIiwiZHJpdmVyIiwic2VydmVyU2VudEV2ZW50c1VybCIsImFqYXhFdmVudHNVcmwiLCJTZXJ2ZXJFdmVudHNDbGllbnQiLCJnZXRCYXNlSHJlZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJTZXJ2ZXJFdmVudHNTaGFyZWRXb3JrZXJDbGllbnQiLCJ3b3JrZXJVcmwiLCJwb3J0IiwiU2hhcmVkV29ya2VyIiwicG9zdE1lc3NhZ2UiLCJjb25maWciLCJlIiwiU2VydmVyRXZlbnRzIiwiTWFwIiwiY290IiwiY2ZnIiwic2VydmVyRXZlbnRzIiwiYWRkT2JzZXJ2ZXIiLCJuYW1lIiwiY2FsbGJhY2siLCJzZXQiLCJvbkV2ZW50Iiwib2JzZXJ2ZXIiLCJUb2FzdCIsInN0YXRpYyIsInRpdGxlIiwiaGludCIsInR5cGUiLCJkZWxheSIsIndpbmRvdyIsImJvb3RzdHJhcCIsInNob3ciLCJjb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidG9hc3RUaXRsZSIsInRvYXN0SGludCIsInRvYXN0SFRNTCIsInRvYXN0V3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJ0b2FzdEVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImFwcGVuZENoaWxkIiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZSIsImNsYXNzTmFtZSIsImNvbnRhaW5lckNsYXNzIiwiYm9keSIsImFwcGVuZCIsIk1vZGFsIiwiY29udGVudCIsImJ1dHRvbnMiLCJjZW50ZXJlZCIsImRpYWxvZ0NsYXNzIiwibW9kYWxIVE1MIiwibW9kYWxXcmFwcGVyIiwicXVlcnlTZWxlY3RvciIsIkFycmF5IiwiaXNBcnJheSIsImJ1dHRvbiIsImJ1dHRvbkRhdGEiLCJwdXNoIiwibGFiZWwiLCJzZXRBdHRyaWJ1dGUiLCJidG5UeXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2VPbkNsaWNrIiwib25DbGljayIsIkwiLCJsYW5nIiwiZ2V0U2VydmVyRXZlbnRzIiwiY29uZmlybSIsIm9rTGFiZWwiLCJjYW5jZWxMYWJlbCIsIm1vZGFsIiwiZ2V0TW9kYWwiLCJnZXRUb2FzdCIsInRvYXN0IiwibG9hZERhdGEiLCJ3aGF0IiwibG9hZGVkRGF0YSIsImRhdGFUb0xvYWQiLCJTdHJpbmciLCJpdGVtIiwibGVuZ3RoIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibiIsImEiLCJpbmRleCIsImFycmF5IiwidG9TdHJpbmciLCJyZXNwb25zZURhdGEiLCJzdWNjZXNzIiwia2V5IiwibG9hZENhcHRjaGEiLCJ0aGVuIiwiY2FwdGNoYUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW1lbnQiLCJjYXB0Y2hhIiwiZXhlY3V0ZVNjcmlwdEVsZW1lbnRzIiwiZm9ybSIsImNsb3Nlc3QiLCJpbnB1dFgiLCJ4IiwiY29udGFpbmVyRWxlbWVudCIsInNjcmlwdEVsZW1lbnRzIiwiZnJvbSIsInNjcmlwdEVsZW1lbnQiLCJjbG9uZWRFbGVtZW50IiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsInZhbHVlIiwidGV4dCIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7bUJDQ08sTUFB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U0FBUzBILElBQzFDRixFQUFjaEQsYUFBYWtELEVBQVVoRyxLQUFNZ0csRUFBVUMsTUFBTSxJQUUvREgsRUFBY0ksS0FBT0wsRUFBY0ssS0FDbkNMLEVBQWNNLFdBQVdDLGFBQWFOLEVBQWVELEVBQWMsR0FFM0UsRTs7QUNwT0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKiBAbGljZW5zZSBodHRwczovL2dpdGh1Yi5jb20vQ290b250aS9Db3RvbnRpL2Jsb2IvbWFzdGVyL0xpY2Vuc2UudHh0XHJcbiAqLyIsIi8qKlxyXG4gKiBCYXNlIHNlcnZlciBldmVudHMgY2xpZW50XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZVNlcnZlckV2ZW50c0NsaWVudCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ3xudWxsfVxyXG4gICAgICovXHJcbiAgICBtb2RlID0gJ3Byb2R1Y3Rpb24nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgZHJpdmVyVHlwZSA9ICcnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRyaXZlclR5cGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IG1vZGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZHJpdmVyVHlwZSwgbW9kZSA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmRyaXZlclR5cGUgPSBkcml2ZXJUeXBlO1xyXG5cclxuICAgICAgICBpZiAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c0NsaWVudDogU2VydmVyIHRyaWdnZXJlZCBldmVudCcsIGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnZXZlbnQnLCB7ZGV0YWlsOiBldmVudERhdGF9KTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIEJhc2Ugc2VydmVyIGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCYXNlU2VydmVyRXZlbnRzRHJpdmVyIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cclxuICAgICAqL1xyXG4gICAgZXZlbnRzVXJsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihldmVudHNVcmwsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKG1vZGUgIT09IG51bGwgJiYgbW9kZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ldmVudHNVcmwgPSBldmVudHNVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHsgfVxyXG5cclxuICAgIG9uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJFdmVudHNEcml2ZXI6IFNlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2V2ZW50Jywge2RldGFpbDogZXZlbnREYXRhfSk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0RyaXZlcn0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0RyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciAtIFNlbnQgZXZlbnRzIGRyaXZlclxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50c1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50c1NTRURyaXZlciBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNEcml2ZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7RXZlbnRTb3VyY2V8bnVsbH1cclxuICAgICAqL1xyXG4gICAgI2V2ZW50U291cmNlID0gbnVsbDtcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNldmVudFNvdXJjZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyRXZlbnRzU1NFRHJpdmVyLiAnLCB0aGlzLmV2ZW50c1VybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmV2ZW50c1VybCArICcmdHM9JyArIERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UodXJsKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9ub3BlbiA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c1NTRURyaXZlciBjb25uZWN0aW9uIGlzIG9wZW4nKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudERhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZXZlbnREYXRhLmRhdGEgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGV2ZW50RGF0YS5kYXRhID09PSAnc3RyaW5nJykgJiYgZXZlbnREYXRhLmRhdGEgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZGF0YSA9IEpTT04ucGFyc2UoZXZlbnREYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50RGF0YS5ldmVudElkID0gZXZlbnQubGFzdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25FdmVudFRyaWdnZXJlZChldmVudERhdGEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLiNldmVudFNvdXJjZS5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzU1NFRHJpdmVyIGNvbm5lY3Rpb24gZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0RyaXZlcn0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0RyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBldmVudHMgYWpheCBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyIGV4dGVuZHMgQmFzZVNlcnZlckV2ZW50c0RyaXZlciB7XHJcbiAgICAjdGltZU91dFBlcmlvZCA9IDYwMDA7IC8vIDYgc2VjLlxyXG5cclxuICAgICN0aW1lcklkID0gbnVsbDtcclxuXHJcbiAgICAjaW5pdGVkID0gZmFsc2U7XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jaW5pdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2luaXRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdCBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyICcsIHRoaXMuZXZlbnRzVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI3RpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuI2dldEV2ZW50cygpLCA1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jICNnZXRFdmVudHMoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5ldmVudHNVcmwgKyAnJnRzPScgKyBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVzcG9uc2Ugc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0LmV2ZW50cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZXZlbnRJZCA9IGV2ZW50LmlkICE9PSB1bmRlZmluZWQgPyBldmVudC5pZCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiN0aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLiNnZXRFdmVudHMoKSwgdGhpcy4jdGltZU91dFBlcmlvZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c0FqYXhEcml2ZXIgZ2V0IGV2ZW50cyBlcnJvcjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLiN0aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLiNnZXRFdmVudHMoKSwgdGhpcy4jdGltZU91dFBlcmlvZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtTZXJ2ZXJFdmVudHNTU0VEcml2ZXJ9IGZyb20gXCIuL1NlcnZlckV2ZW50c1NTRURyaXZlclwiO1xyXG5pbXBvcnQge1NlcnZlckV2ZW50c0FqYXhEcml2ZXJ9IGZyb20gXCIuL1NlcnZlckV2ZW50c0FqYXhEcml2ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIHNlcnZlciBldmVudHMgZHJpdmVyXHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeSB7XHJcbiAgICAjYmFzZVVybCA9ICcvJztcclxuXHJcbiAgICAjbW9kZSA9ICdwcm9kdWN0aW9uJ1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJhc2VVcmwgPSBudWxsLCBtb2RlID0gbnVsbCkge1xyXG4gICAgICAgIGlmIChiYXNlVXJsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNtb2RlID0gbW9kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZHJpdmVyVHlwZVxyXG4gICAgICogQHJldHVybnMge1NlcnZlckV2ZW50c1NTRURyaXZlcnxTZXJ2ZXJFdmVudHNBamF4RHJpdmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRCeVR5cGUoZHJpdmVyVHlwZSkge1xyXG4gICAgICAgIGxldCBkcml2ZXIgPSBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBzZXJ2ZXJTZW50RXZlbnRzVXJsID0gdGhpcy4jYmFzZVVybCArICc/bj1zZXJ2ZXItZXZlbnRzJmE9c3NlJztcclxuICAgICAgICBjb25zdCBhamF4RXZlbnRzVXJsID0gdGhpcy4jYmFzZVVybCArICc/bj1zZXJ2ZXItZXZlbnRzJmE9YWpheCZfYWpheD0xJztcclxuXHJcbiAgICAgICAgc3dpdGNoIChkcml2ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NzZSc6XHJcbiAgICAgICAgICAgICAgICAvLyBTZXJ2ZXItU2VudCBldmVudHMgZHJpdmVyXHJcbiAgICAgICAgICAgICAgICBkcml2ZXIgPSBuZXcgU2VydmVyRXZlbnRzU1NFRHJpdmVyKHNlcnZlclNlbnRFdmVudHNVcmwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI21vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2luZyBTZXJ2ZXJFdmVudHNTU0VEcml2ZXInLCBzZXJ2ZXJTZW50RXZlbnRzVXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGRyaXZlciA9IG5ldyBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyKGFqYXhFdmVudHNVcmwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI21vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2luZyBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyJywgYWpheEV2ZW50c1VybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZHJpdmVyO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCYXNlU2VydmVyRXZlbnRzQ2xpZW50fSBmcm9tIFwiLi9CYXNlU2VydmVyRXZlbnRzQ2xpZW50XCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeX0gZnJvbSBcIi4uL2RyaXZlci9TZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5XCI7XHJcblxyXG4vKipcclxuICogU2VydmVyIGV2ZW50cyBjbGllbnRcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNDbGllbnQgZXh0ZW5kcyBCYXNlU2VydmVyRXZlbnRzQ2xpZW50IHtcclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c0NsaWVudCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IG5ldyBTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5KGdldEJhc2VIcmVmKCksIHRoaXMubW9kZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRyaXZlciA9IGZhY3RvcnkuZ2V0QnlUeXBlKHRoaXMuZHJpdmVyVHlwZSwgdGhpcy5tb2RlKTtcclxuICAgICAgICBkcml2ZXIuYWRkRXZlbnRMaXN0ZW5lcignZXZlbnQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHJpdmVyLmluaXQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0NsaWVudH0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0NsaWVudFwiO1xyXG5cclxuLyoqXHJcbiAqIFNoYXJlZCB3b3JrZXIgc2VydmVyIGV2ZW50cyBjbGllbnRcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICogQGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NoYXJlZFdvcmtlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudCBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNDbGllbnQge1xyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBsZXQgd29ya2VyVXJsID0gJy9qcy9zaGFyZWRXb3JrZXJTZXJ2ZXJFdmVudHMubWluLmpzJztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudDogJyArIHdvcmtlclVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JrZXIgPSBuZXcgU2hhcmVkV29ya2VyKHdvcmtlclVybCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcnQgPSB3b3JrZXIucG9ydDtcclxuXHJcbiAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2Uoe2NvbmZpZzoge21vZGU6IHRoaXMubW9kZSwgZHJpdmVyOiB0aGlzLmRyaXZlclR5cGUsIGJhc2VVcmw6IGdldEJhc2VIcmVmKCl9fSk7XHJcblxyXG4gICAgICAgICAgICBwb3J0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlclNlbnRFdmVudHNTaGFyZWRXb3JrZXIgZXZlbnQnLCBldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudFRyaWdnZXJlZChldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c0NsaWVudH0gZnJvbSBcIi4vY2xpZW50L1NlcnZlckV2ZW50c0NsaWVudFwiO1xyXG5pbXBvcnQge1NlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudH0gZnJvbSBcIi4vY2xpZW50L1NlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudFwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBldmVudHNcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHMge1xyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtudWxsfFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudHxTZXJ2ZXJFdmVudHNDbGllbnR9XHJcbiAgICAgKi9cclxuICAgICNjbGllbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgI2NsaWVudFR5cGUgPSAnc2hhcmVkV29ya2VyJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd9ICdzc2UnIChmb3IgU2VydmVyLVNlbnQgZXZlbnRzKSAsICdhamF4JyBvciAnd2Vic29ja2V0JyAobm90IGltcGxlbWVudGVkIHlldClcclxuICAgICAqL1xyXG4gICAgI2RyaXZlclR5cGUgPSAnc3NlJztcclxuXHJcbiAgICAjb2JzZXJ2ZXJzUmVnaXN0cnkgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuI2RyaXZlclR5cGUgPSBjb3QuY2ZnLnNlcnZlckV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIGFkZE9ic2VydmVyKG5hbWUsIGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmIChjb3QuY2ZnLnNlcnZlckV2ZW50cyA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5LnNldChuYW1lLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgb25FdmVudDogY2FsbGJhY2tcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuI2NsaWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNpbml0Q2xpZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICNpbml0Q2xpZW50KCkge1xyXG4gICAgICAgIGlmIChjb3QuY2ZnLnNlcnZlckV2ZW50cyA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLiNjbGllbnRUeXBlID09PSAnc2hhcmVkV29ya2VyJyAmJiAodHlwZW9mIFNoYXJlZFdvcmtlciAhPT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBTZXJ2ZXJFdmVudHNTaGFyZWRXb3JrZXJDbGllbnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNjbGllbnQgPSBuZXcgU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50KHRoaXMuI2RyaXZlclR5cGUsIHRoaXMubW9kZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRpbmcgU2VydmVyRXZlbnRzQ2xpZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jY2xpZW50ID0gbmV3IFNlcnZlckV2ZW50c0NsaWVudCh0aGlzLiNkcml2ZXJUeXBlLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jY2xpZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2V2ZW50JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuI29uRXZlbnRUcmlnZ2VyZWQoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAjb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXZlbnQgPT09IGV2ZW50RGF0YS5ldmVudFxyXG4gICAgICAgICAgICAgICAgJiYgdHlwZW9mIG9ic2VydmVyLm9uRXZlbnQgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vbkV2ZW50KGV2ZW50RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBUb2FzdFxyXG4gKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzUuMy9jb21wb25lbnRzL3RvYXN0cy9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb2FzdCB7XHJcbiAgICBzdGF0aWMgY29udGFpbmVyQ2xhc3MgPSAndG9hc3QtY29udGFpbmVyIHBvc2l0aW9uLWZpeGVkIGJvdHRvbS0wIGVuZC0wIHAtMyc7XHJcblxyXG4gICAgdGl0bGUgPSAnJztcclxuICAgIG1lc3NhZ2UgPSAnJztcclxuICAgIGhpbnQgPSAnJztcclxuICAgIHR5cGUgPSAnJztcclxuICAgIGRlbGF5ID0gNTAwMDtcclxuXHJcbiAgICAjY29udGFpbmVyID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCB0aXRsZSA9ICcnLCBoaW50ID0gJycsIHR5cGUgPSAnJykge1xyXG4gICAgICAgIGlmICh3aW5kb3cuYm9vdHN0cmFwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQm9vdHN0cmFwIGlzIG5vdCBmb3VuZC4gSXQgaXMgcmVxdWlyZWQgZm9yIHVzZSBcIlRvYXN0XCIgY29tcG9uZW50Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuaGludCA9IGhpbnQ7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNjb250YWluZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdC1jb250YWluZXInKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gdGhpcy4jY3JlYXRlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdG9hc3RUaXRsZSA9IGA8c3Ryb25nIGNsYXNzPVwibWUtYXV0b1wiPiR7dGhpcy50aXRsZX08L3N0cm9uZz5gO1xyXG4gICAgICAgIGNvbnN0IHRvYXN0SGludCA9IHRoaXMuaGludCAhPT0gJycgPyBgPHNtYWxsPiR7dGhpcy5oaW50fTwvc21hbGw+YCA6ICcnO1xyXG4gICAgICAgIGNvbnN0IGJhY2tHcm91bmQgPSB0aGlzLnR5cGUgIT09ICcnID8gYCB0ZXh0LWJnLSR7dGhpcy50eXBlfWAgOiAnJztcclxuXHJcbiAgICAgICAgY29uc3QgdG9hc3RIVE1MID0gYDxkaXYgY2xhc3M9XCJ0b2FzdCR7YmFja0dyb3VuZH1cIiByb2xlPVwiYWxlcnRcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiBgXHJcbiAgICAgICAgICAgICAgICArIGBkYXRhLWJzLWRlbGF5PVwiJHt0aGlzLmRlbGF5fVwiPmBcclxuICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInRvYXN0LWhlYWRlclwiPidcclxuICAgICAgICAgICAgICArIGAke3RvYXN0VGl0bGV9JHt0b2FzdEhpbnR9YFxyXG4gICAgICAgICAgICAgICsgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwidG9hc3RcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj4nXHJcbiAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgKyBgPGRpdiBjbGFzcz1cInRvYXN0LWJvZHlcIj4ke3RoaXMubWVzc2FnZX08L2Rpdj5gXHJcbiAgICAgICAgICArICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0b2FzdFdyYXBwZXIuaW5uZXJIVE1MID0gdG9hc3RIVE1MO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdEVsZW1lbnQgPSB0b2FzdFdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgdG9hc3QgdG8gdGhlIGNvbnRhaW5lclxyXG4gICAgICAgIHRoaXMuI2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2FzdEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSB0b2FzdFxyXG4gICAgICAgIGNvbnN0IHRvYXN0ID0gbmV3IHdpbmRvdy5ib290c3RyYXAuVG9hc3QodG9hc3RFbGVtZW50KTtcclxuICAgICAgICB0b2FzdC5zaG93KCk7XHJcblxyXG4gICAgICAgIC8vIE9wdGlvbmFsbHkgcmVtb3ZlIHRoZSB0b2FzdCBmcm9tIHRoZSBET00gYWZ0ZXIgaXQgaGlkZXNcclxuICAgICAgICB0aGlzLiNjb250YWluZXIubGFzdEVsZW1lbnRDaGlsZC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMudG9hc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRvYXN0RWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuI2NvbnRhaW5lci5pbm5lckhUTUwgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250YWluZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgI2NyZWF0ZUNvbnRhaW5lcigpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICByZXN1bHQuaWQgPSAndG9hc3QtY29udGFpbmVyJztcclxuICAgICAgICByZXN1bHQuY2xhc3NOYW1lID0gVG9hc3QuY29udGFpbmVyQ2xhc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQocmVzdWx0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIE1vZGFsXHJcbiAqIFNob3cgTW9kYWwgcHJvZ3JhbW1hdGljYWxseVxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKlxyXG4gKiBAbGluayBodHRwczovL2dldGJvb3RzdHJhcC5jb20vZG9jcy81LjMvY29tcG9uZW50cy9tb2RhbC9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb2RhbCB7XHJcbiAgICB0aXRsZSA9ICcnO1xyXG4gICAgY29udGVudCA9ICcnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUgeyh7bGFiZWw6IFN0cmluZywgb25DbGljazogZnVuY3Rpb24sIGNsb3NlT25DbGljazogYm9vbCwgdHlwZTogc3RyaW5nfXxzdHJpbmcpW118bnVsbH1cclxuICAgICAqL1xyXG4gICAgYnV0dG9ucyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJ0aWNhbGx5IGNlbnRlcmVkXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgY2VudGVyZWQgPSBmYWxzZTtcclxuXHJcbiAgICBkaWFsb2dDbGFzcyA9ICdtb2RhbC1kaWFsb2cnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge0VsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgICNlbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7KHtcclxuICAgICAqICAgIGxhYmVsOiBTdHJpbmcsXHJcbiAgICAgKiAgICBvbkNsaWNrOiBmdW5jdGlvbnx1bmRlZmluZWQsXHJcbiAgICAgKiAgICBjbG9zZU9uQ2xpY2s6IGJvb2x8dW5kZWZpbmVkLFxyXG4gICAgICogICAgdHlwZTogc3RyaW5nfHVuZGVmaW5lZCxcclxuICAgICAqICAgIGJ0blR5cGU6IHN0cmluZ3x1bmRlZmluZWRcclxuICAgICAqICB9fHN0cmluZylbXXxudWxsfSBidXR0b25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQsIHRpdGxlID0gJycsIGJ1dHRvbnMgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5ib290c3RyYXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCb290c3RyYXAgaXMgbm90IGZvdW5kLiBJdCBpcyByZXF1aXJlZCBmb3IgdXNlIFwiTW9kYWxcIiBjb21wb25lbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5idXR0b25zID0gYnV0dG9ucztcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGxldCBkaWFsb2dDbGFzcyA9IHRoaXMuZGlhbG9nQ2xhc3M7XHJcbiAgICAgICAgaWYgKHRoaXMuY2VudGVyZWQpIHtcclxuICAgICAgICAgICAgZGlhbG9nQ2xhc3MgKz0gJyBtb2RhbC1kaWFsb2ctY2VudGVyZWQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxIVE1MID0gJzxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQ9XCJDb3RvbnRpRHluYW1pY01vZGFsXCIgdGFiaW5kZXg9XCItMVwiICdcclxuICAgICAgICAgICAgICAgICsgJ2FyaWEtbGFiZWxsZWRieT1cIkNvdG9udGlEeW5hbWljTW9kYWxMYWJlbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPidcclxuICAgICAgICAgICsgYDxkaXYgY2xhc3M9XCIke2RpYWxvZ0NsYXNzfVwiPmBcclxuICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj4nXHJcbiAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPidcclxuICAgICAgICAgICAgICAgICsgYDxoNSBjbGFzcz1cIm1vZGFsLXRpdGxlXCIgaWQ9XCJDb3RvbnRpRHluYW1pY01vZGFsTGFiZWxcIj4ke3RoaXMudGl0bGV9PC9oNT5gXHJcbiAgICAgICAgICAgICAgICArICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+J1xyXG4gICAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgICArIGA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPiR7dGhpcy5jb250ZW50fTwvZGl2PmBcclxuICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PC9kaXY+J1xyXG4gICAgICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgKyAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWxXcmFwcGVyLmlubmVySFRNTCA9IG1vZGFsSFRNTDtcclxuICAgICAgICB0aGlzLiNlbGVtZW50ID0gbW9kYWxXcmFwcGVyLmZpcnN0RWxlbWVudENoaWxkO1xyXG5cclxuICAgICAgICB0aGlzLiNhZGRCdXR0b25zKCk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgbW9kYWwgdG8gdGhlIGJvZHlcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuI2VsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGFuZCBzaG93IHRoZSBtb2RhbFxyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IGJvb3RzdHJhcC5Nb2RhbCh0aGlzLiNlbGVtZW50KTtcclxuICAgICAgICBtb2RhbC5zaG93KCk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbW9kYWwgZnJvbSB0aGUgRE9NIGFmdGVyIGl0IGlzIGhpZGRlblxyXG4gICAgICAgIHRoaXMuI2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaGlkZGVuLmJzLm1vZGFsJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLiNlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICNhZGRCdXR0b25zKCkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLiNidWlsZEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgaWYgKGJ1dHRvbnMgPT09ICcnIHx8IGJ1dHRvbnMgPT09IFtdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuI2VsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWZvb3RlcicpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGJ1dHRvbnMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBidXR0b25zO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidXR0b25zKSkge1xyXG4gICAgICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidXR0b24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCArPSBidXR0b247XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICNidWlsZEJ1dHRvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XHJcbiAgICAgICAgbGV0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnM7XHJcbiAgICAgICAgaWYgKGJ1dHRvbnMgPT09IFtdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYnV0dG9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidXR0b25zKSkge1xyXG4gICAgICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbkRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYnV0dG9uRGF0YSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChidXR0b25EYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5sYWJlbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGJ1dHRvbkRhdGEubGFiZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsIGJ1dHRvbkRhdGEuYnRuVHlwZSAhPT0gdW5kZWZpbmVkID8gYnV0dG9uRGF0YS5idG5UeXBlIDogJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLnR5cGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tJyArIGJ1dHRvbkRhdGEudHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkRhdGEuY2xvc2VPbkNsaWNrICE9PSB1bmRlZmluZWQgJiYgYnV0dG9uRGF0YS5jbG9zZU9uQ2xpY2sgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWJzLWRpc21pc3MnLCAnbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5vbkNsaWNrICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGJ1dHRvbkRhdGEub25DbGljayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge3JldHVybiBidXR0b25EYXRhLm9uQ2xpY2soZXZlbnQpfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYnV0dG9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c30gZnJvbSAnLi9zZXJ2ZXJFdmVudHMvU2VydmVyRXZlbnRzLmpzJztcclxuaW1wb3J0IHtUb2FzdH0gZnJvbSBcIi4vVG9hc3RcIjtcclxuaW1wb3J0IHtNb2RhbH0gZnJvbSBcIi4vTW9kYWxcIjtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIENvdG9udGkgY2xhc3NcclxuICovXHJcbmNsYXNzIENvdG9udGlBcHBsaWNhdGlvblxyXG57XHJcbiAgICBjZmcgPSB7fTtcclxuICAgIEwgPSB7fTtcclxuXHJcbiAgICAjc2V2ZXJFdmVudHMgPSBudWxsO1xyXG5cclxuICAgIGluaXQoZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmNvbmZpZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2ZnID0gZGF0YS5jb25maWc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5sYW5nICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5MID0gZGF0YS5sYW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBTZXJ2ZXIgRXZlbnRzIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge1NlcnZlckV2ZW50c31cclxuICAgICAqL1xyXG4gICAgZ2V0U2VydmVyRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNzZXZlckV2ZW50cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNzZXZlckV2ZW50cyA9IG5ldyBTZXJ2ZXJFdmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NldmVyRXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBDb25maXJtIGRpYWxvZyBtb2RhbFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBva0xhYmVsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2FuY2VsTGFiZWxcclxuICAgICAqIEB0b2RvIHRyYW5zbGF0ZWQgZGVmYXVsdCBsYWJlbHNcclxuICAgICAqL1xyXG4gICAgY29uZmlybSh0aXRsZSwgY29udGVudCwgY2FsbGJhY2ssIG9rTGFiZWwgPSAnT2snLCBjYW5jZWxMYWJlbCA9ICdDYW5jZWwnKSB7XHJcbiAgICAgICAgdGhpcy5tb2RhbCh0aXRsZSwgY29udGVudCwgW1xyXG4gICAgICAgICAgICB7bGFiZWw6IG9rTGFiZWwsIG9uQ2xpY2s6IChldmVudCkgPT4ge3JldHVybiBjYWxsYmFjayhldmVudCl9LCB0eXBlOiAncHJpbWFyeScsIGNsb3NlT25DbGljazogdHJ1ZX0sXHJcbiAgICAgICAgICAgIHtsYWJlbDogY2FuY2VsTGFiZWwsIGNsb3NlT25DbGljazogdHJ1ZSwgdHlwZTogJ3NlY29uZGFyeSd9XHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIE1vZGFsIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0geyh7XHJcbiAgICAgKiAgICBsYWJlbDogU3RyaW5nLFxyXG4gICAgICogICAgb25DbGljazogZnVuY3Rpb258dW5kZWZpbmVkLFxyXG4gICAgICogICAgY2xvc2VPbkNsaWNrOiBib29sfHVuZGVmaW5lZCxcclxuICAgICAqICAgIHR5cGU6IHN0cmluZ3x1bmRlZmluZWQsXHJcbiAgICAgKiAgICBidG5UeXBlOiBzdHJpbmd8dW5kZWZpbmVkXHJcbiAgICAgKiAgfXxzdHJpbmcpW118bnVsbH0gYnV0dG9uc1xyXG4gICAgICogIEByZXR1cm5zIE1vZGFsXHJcbiAgICAgKi9cclxuICAgIGdldE1vZGFsKGNvbnRlbnQsIHRpdGxlID0gJycsIGJ1dHRvbnM9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1vZGFsKGNvbnRlbnQsIHRpdGxlLCBidXR0b25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgTW9kYWwgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHsoe1xyXG4gICAgICogICAgbGFiZWw6IFN0cmluZyxcclxuICAgICAqICAgIG9uQ2xpY2s6IGZ1bmN0aW9ufHVuZGVmaW5lZCxcclxuICAgICAqICAgIGNsb3NlT25DbGljazogYm9vbHx1bmRlZmluZWQsXHJcbiAgICAgKiAgICB0eXBlOiBzdHJpbmd8dW5kZWZpbmVkLFxyXG4gICAgICogICAgYnRuVHlwZTogc3RyaW5nfHVuZGVmaW5lZFxyXG4gICAgICogIH18c3RyaW5nKVtdfG51bGx9IGJ1dHRvbnNcclxuICAgICAqICBAcmV0dXJucyBNb2RhbFxyXG4gICAgICovXHJcbiAgICBtb2RhbChjb250ZW50LCB0aXRsZSA9ICcnLCBidXR0b25zPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSB0aGlzLmdldE1vZGFsKGNvbnRlbnQsIHRpdGxlLCBidXR0b25zKTtcclxuICAgICAgICBtb2RhbC5zaG93KCk7XHJcbiAgICAgICAgcmV0dXJuIG1vZGFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBUb2FzdHMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhpbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXHJcbiAgICAgKiBAcmV0dXJucyBUb2FzdFxyXG4gICAgICovXHJcbiAgICBnZXRUb2FzdChtZXNzYWdlLCB0aXRsZSA9ICcnLCBoaW50ID0gJycsIHR5cGUgPSAnJykge1xyXG4gICAgICAgIHJldHVybiBuZXcgVG9hc3QobWVzc2FnZSwgdGl0bGUsIGhpbnQsIHR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBUb2FzdHMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhpbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXlcclxuICAgICAqL1xyXG4gICAgdG9hc3QobWVzc2FnZSwgdGl0bGUgPSAnJywgaGludCA9ICcnLCB0eXBlID0gJycsIGRlbGF5ID0gNTAwMCkge1xyXG4gICAgICAgIGNvbnN0IHRvYXN0ID0gdGhpcy5nZXRUb2FzdChtZXNzYWdlLCB0aXRsZSwgaGludCwgdHlwZSk7XHJcblxyXG4gICAgICAgIGlmIChkZWxheSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0b2FzdC5kZWxheSA9IGRlbGF5XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0b2FzdC5zaG93KCk7XHJcbiAgICAgICAgcmV0dXJuIHRvYXN0O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgZGF0YSBmcm9tIC9pbmRleC5waHA/bj1tYWluJmE9Z2V0XHJcbiAgICAgKiBDYW4gYmUgdXNlZnVsLCBmb3IgZXhhbXBsZSB3aGVuIGl0IGlzIG5lZWRlZCB0byBsb2FkIHNvbWUgZHluYW1pYyBjb250ZW50IHRvIGNhY2hlZCBwYWdlXHJcbiAgICAgKlxyXG4gICAgICogRXhhbXBsZTpcclxuICAgICAqIGNvdC5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgKiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICogfSk7XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHdoYXQgQXJyYXkgb3Igc3RyaW5nLiBEYXRhIHRvIGxvYWQuIEZvciBleGFtcGxlLCBbJ2NhcHRjaGEnLCAneCddICh4IC0gYW50aSBYU1MgcGFyYW1ldGVyIHZhbHVlKVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e30+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkRGF0YSh3aGF0KSB7XHJcbiAgICAgICAgaWYgKCF3aGF0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlZERhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZERhdGEgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkYXRhVG9Mb2FkID0gW107XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2hhdCA9PT0gJ3N0cmluZycgfHwgd2hhdCBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICB3aGF0ID0gW3doYXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVRvTG9hZC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YVRvTG9hZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIEB0b2RvIGNoYW5nZSB0byBzeXN0ZW0gY29udHJvbGxlciB3aGVuIGl0IHdpbGwgYmUgaW1wbGVtZW50ZWRcclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe246ICdtYWluJywgYTogJ2dldCd9KTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFUb0xvYWQuZm9yRWFjaCgoaXRlbSwgaW5kZXgsIGFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdkYXRhWycgKyBpbmRleCArICddJywgaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdfYWpheCcsIDEpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2luZGV4LnBocD8nICsgcGFyYW1zLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzcG9uc2VEYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkRGF0YVtrZXldID0gcmVzcG9uc2VEYXRhLmRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhUVFAgZXJyb3JcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZXJyb3JcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2Ygd2hhdCkge1xyXG4gICAgICAgICAgICBpZiAoKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2l0ZW1dID0gdGhpcy5sb2FkZWREYXRhW2l0ZW1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBjYXB0Y2hhIHZpYSBhamF4LiBVc2VkIG9uIGNhY2hlZCBwYWdlcy5cclxuICAgICAqL1xyXG4gICAgbG9hZENhcHRjaGEoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjYXB0Y2hhRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FwdGNoYS1wbGFjZS1ob2xkZXInKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBjYXB0Y2hhRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gcmVzdWx0LmNhcHRjaGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVTY3JpcHRFbGVtZW50cyhlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2FwdGNoYS1wbGFjZS1ob2xkZXInLCAnbG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYXB0Y2hhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9IGVsZW1lbnQuY2xvc2VzdCgnZm9ybScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvcm0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXRYID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdW25hbWU9XCJ4XCJdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0WCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFguc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdC54KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHlvdSBhcHBlbmQgPHNjcmlwdD4gdGFncyB0byB0aGUgZWxlbWVudHMgb2YgdGhlIGZpbmlzaGVkIERPTSBkb2N1bWVudCwgdGhleSB3aWxsIG5vdCBiZSBleGVjdXRlZCBhdXRvbWF0aWNhbGx5LlxyXG4gICAgICogVGhlIG1ldGhvZCBleGVjdXRlcyA8c2NyaXB0PiBzY3JpcHRzIG5lc3RlZCBpbiB0aGUgc3BlY2lmaWVkIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbGVtZW50IE5vZGVcclxuICAgICAqL1xyXG4gICAgZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGNvbnRhaW5lckVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50cyA9IGNvbnRhaW5lckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0Jyk7XHJcblxyXG4gICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudHMpLmZvckVhY2goKHNjcmlwdEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2xvbmVkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBBcnJheS5mcm9tKHNjcmlwdEVsZW1lbnQuYXR0cmlidXRlcykuZm9yRWFjaCgoYXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZWRFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUubmFtZSwgYXR0cmlidXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNsb25lZEVsZW1lbnQudGV4dCA9IHNjcmlwdEVsZW1lbnQudGV4dDtcclxuICAgICAgICAgICAgc2NyaXB0RWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZWRFbGVtZW50LCBzY3JpcHRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmNvdCA9IG5ldyBDb3RvbnRpQXBwbGljYXRpb24oKTtcclxuIiwiZnVuY3Rpb24gZW5jb2RlVVJJZml4KHN0cikge1xyXG5cdC8vIHRvIHByZXZlbnQgdHdpY2UgZW5jb2RpbmdcclxuXHQvLyBhbmQgZml4ICdbJywnXScgc2lnbnMgdG8gZm9sbG93IFJGQzM5ODYgKHNlY3Rpb24tMy4yLjIpXHJcblx0cmV0dXJuIGVuY29kZVVSSShkZWNvZGVVUkkoc3RyKSkucmVwbGFjZSgvJTVCL2csICdbJykucmVwbGFjZSgvJTVEL2csICddJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEJhc2VIcmVmKCkge1xyXG5cdHZhciBocmVmID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Jhc2UnKVswXS5ocmVmO1xyXG5cdGlmIChocmVmID09IG51bGwpIHtcclxuXHRcdHJldHVybiAnLyc7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiBocmVmO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gcG9wdXAoY29kZSwgdywgaCl7XHJcbiAgICB3aW5kb3cub3BlbihnZXRCYXNlSHJlZigpICsgJ2luZGV4LnBocD9vPScgKyBjb2RlLCAnJywgJ3Rvb2xiYXI9MCxsb2NhdGlvbj0wLGRpcmVjdG9yaWVzPTAsbWVudUJhcj0wLHJlc2l6YWJsZT0wLHNjcm9sbGJhcnM9eWVzLHdpZHRoPScgKyB3ICsgJyxoZWlnaHQ9JyArIGggKyAnLGxlZnQ9MzIsdG9wPTE2Jyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdG9kbyBtb3ZlIHRvIHBmcyBtb2R1bGVcclxuICovXHJcbmZ1bmN0aW9uIHBmcyhpZCwgYzEsIGMyLCBwYXJzZXIpe1xyXG4gICAgd2luZG93Lm9wZW4oXHJcblx0XHRnZXRCYXNlSHJlZigpICsgJ2luZGV4LnBocD9lPXBmcyZ1c2VyaWQ9JyArIGlkICsgJyZjMT0nICsgYzEgKyAnJmMyPScgKyBjMiArICcmcGFyc2VyPScgKyBwYXJzZXIsXHJcblx0XHQnUEZTJyxcclxuXHRcdCdzdGF0dXM9MSwgdG9vbGJhcj0wLGxvY2F0aW9uPTAsZGlyZWN0b3JpZXM9MCxtZW51QmFyPTAscmVzaXphYmxlPTEsc2Nyb2xsYmFycz15ZXMsd2lkdGg9NzU0LGhlaWdodD01MTIsbGVmdD0zMix0b3A9MTYnXHJcblx0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVkaXJlY3QodXJsKXtcclxuICAgIGxvY2F0aW9uLmhyZWYgPSB1cmwub3B0aW9uc1t1cmwuc2VsZWN0ZWRJbmRleF0udmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZWJsb2NrKGlkKXtcclxuICAgIHZhciBibCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIGlmIChibC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xyXG4gICAgICAgIGJsLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGJsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVBbGwoYWN0aW9uKSB7XHJcblx0dmFyIGJsa3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbaWRePVwiYmxrX1wiXScpO1xyXG5cdGZvciAoaSA9IDA7IGkgPCBibGtzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAoYWN0aW9uID09ICdoaWRlJykge1xyXG5cdFx0XHRibGtzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHR9IGVsc2UgaWYgKGFjdGlvbiA9PSAnc2hvdycpIHtcclxuXHRcdFx0Ymxrc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdy1ncm91cCc7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLy8gSW5zZXJ0cyB0ZXh0IGludG8gdGV4dGFyZWEgYXQgY3Vyc29yIHBvc2l0aW9uXHJcbmZ1bmN0aW9uIGluc2VydFRleHQoZG9jT2JqLCBmaWVsZE5hbWUsIHZhbHVlKSB7XHJcblx0dmFyIGZpZWxkID0gbnVsbDtcclxuXHRpZiAoIWRvY09iaikge1xyXG5cdFx0ZG9jT2JqID0gZG9jdW1lbnQ7XHJcblx0fVxyXG5cdC8vIEZpbmQgdGhlIGZpZWxkIGluIHRoZSBkb2NPYmpcclxuXHRmaW5kRmllbGQ6XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkb2NPYmouZm9ybXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdGlmIChkb2NPYmouZm9ybXNbaV0uZWxlbWVudHNbal0ubmFtZSA9PSBmaWVsZE5hbWUpIHtcclxuXHRcdFx0XHRmaWVsZCA9IGRvY09iai5mb3Jtc1tpXS5lbGVtZW50c1tqXTtcclxuXHRcdFx0XHRicmVhayBmaW5kRmllbGQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKCFmaWVsZCkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gSW5zZXJ0IHRoZSB0ZXh0XHJcblx0aWYgKGRvY09iai5zZWxlY3Rpb24pIHtcclxuXHRcdC8vIE1TSUUgYW5kIE9wZXJhXHJcblx0XHRmaWVsZC5mb2N1cygpO1xyXG5cdFx0dmFyIHNlbCA9IGRvY09iai5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcclxuXHRcdHNlbC50ZXh0ID0gdmFsdWU7XHJcblx0fSBlbHNlIGlmIChmaWVsZC5zZWxlY3Rpb25TdGFydCB8fCBmaWVsZC5zZWxlY3Rpb25TdGFydCA9PSAwKSB7XHJcblx0XHQvLyBNb3ppbGxhXHJcblx0XHR2YXIgc3RhcnRQb3MgPSBmaWVsZC5zZWxlY3Rpb25TdGFydDtcclxuXHRcdHZhciBlbmRQb3MgPSBmaWVsZC5zZWxlY3Rpb25FbmQ7XHJcblx0XHRmaWVsZC52YWx1ZSA9IGZpZWxkLnZhbHVlLnN1YnN0cmluZygwLCBzdGFydFBvcykgKyB2YWx1ZSArIGZpZWxkLnZhbHVlLnN1YnN0cmluZyhlbmRQb3MsIGZpZWxkLnZhbHVlLmxlbmd0aCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGZpZWxkLnZhbHVlICs9IHZhbHVlO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gQXJyYXkgb2YgYWpheCBlcnJvciBoYW5kbGVyc1xyXG4vLyBFeGFtcGxlIG9mIHVzZTpcclxuLy8gYWpheEVycm9ySGFuZGxlcnMucHVzaCh7ZnVuYzogbXlFcnJvckhhbmRsZXJ9KTtcclxuLy8gYWpheFN1Y2Nlc3NIYW5kbGVycy5wdXNoKHtmdW5jOiBteVN1Y2Nlc3NIYW5kbGVyfSk7XHJcbnZhciBhamF4RXJyb3JIYW5kbGVycyA9IG5ldyBBcnJheSgpO1xyXG52YXIgYWpheFN1Y2Nlc3NIYW5kbGVycyA9IG5ldyBBcnJheSgpO1xyXG4vLyBBSkFYIGVuYWJsZW1lbnQgZGVmYXVsdHMgdG8gZmFsc2VcclxudmFyIGFqYXhFbmFibGVkID0gZmFsc2U7XHJcbi8vIFJlcXVpcmVkIHRvIGNhbGN1bGF0ZSBwYXRoc1xyXG5pZiAodHlwZW9mIGpRdWVyeSAhPSAndW5kZWZpbmVkJykge1xyXG5cdHZhciBhamF4Q3VycmVudEJhc2UgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoJCgnYmFzZScpLmVxKDApLmF0dHIoJ2hyZWYnKSwgJycpLnJlcGxhY2UoL1xcPy4qJC8sICcnKS5yZXBsYWNlKC8jLiokLywgJycpO1xyXG59XHJcbi8vIFRoaXMgZmxhZyBpbmRpY2F0ZXMgdGhhdCBBSkFYK2hpc3RvcnkgaGFzIGJlZW4gdXNlZCBvbiB0aGlzIHBhZ2VcclxuLy8gSXQgbWVhbnMgdGhhdCBcIiNcIiBvciBob21lIGxpbmsgc2hvdWxkIGJlIGxvYWRlZCB2aWEgYWpheCB0b29cclxudmFyIGFqYXhVc2VkID0gZmFsc2U7XHJcbi8vIEdsb2JhbCBmbGFnIHRvIGxldCBldmVyeWJvZHkga25vdyB0aGF0IEFKQVggaGFzIGZhaWxlZFxyXG52YXIgYWpheEVycm9yID0gZmFsc2U7XHJcblxyXG4vKipcclxuICogQUpBWCBoZWxwZXIgZnVuY3Rpb25cclxuICogQHBhcmFtIHtoYXNofSBzZXR0aW5ncyBBIGhhc2h0YWJsZSB3aXRoIHNldHRpbmdzXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4U2VuZChzZXR0aW5ncykge1xyXG5cdHZhciBtZXRob2QgPSBzZXR0aW5ncy5tZXRob2QgPyBzZXR0aW5ncy5tZXRob2QudG9VcHBlckNhc2UoKSA6ICdHRVQnO1xyXG5cdHZhciBkYXRhID0gc2V0dGluZ3MuZGF0YSB8fCAnJztcclxuXHR2YXIgdXJsID0gc2V0dGluZ3MudXJsIHx8ICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5hdHRyKCdhY3Rpb24nKTtcclxuXHRpZiAobWV0aG9kID09PSAnUE9TVCcpIHtcclxuXHRcdGRhdGEgKz0gJyYnICsgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLnNlcmlhbGl6ZSgpO1xyXG5cdH0gZWxzZSBpZiAoc2V0dGluZ3MuZm9ybUlkKSB7XHJcblx0XHR2YXIgc2VwID0gdXJsLmluZGV4T2YoJz8nKSA+IDAgPyAnJicgOiAnPyc7XHJcblx0XHR1cmwgKz0gc2VwICsgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLnNlcmlhbGl6ZSgpO1xyXG5cdH1cclxuXHQkLmFqYXgoe1xyXG5cdFx0dHlwZTogbWV0aG9kLFxyXG5cdFx0dXJsOiBlbmNvZGVVUklmaXgodXJsKSxcclxuXHRcdGRhdGE6IGRhdGEsXHJcblx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpXHJcblx0XHRcdFx0XHQuYXBwZW5kKCc8c3BhbiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyBsZWZ0OicgKyAoJCgnIycgKyBzZXR0aW5ncy5kaXZJZCkud2lkdGgoKS8yIC0gMTEwKSArICdweDt0b3A6JyArICgkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oZWlnaHQoKS8yIC0gOSkgKyAncHg7XCIgY2xhc3M9XCJsb2FkaW5nXCIgaWQ9XCJsb2FkaW5nXCI+PGltZyBzcmM9XCIuL2ltYWdlcy9zcGlubmVyLmdpZlwiIGFsdD1cImxvYWRpbmdcIi8+PC9zcGFuPicpLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKG1zZykge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnI2xvYWRpbmcnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dmYWRlaW4pIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oaWRlKCkuaHRtbChtc2cpLmZhZGVJbig1MDApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmh0bWwobXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFqYXhTdWNjZXNzSGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRpZihhamF4U3VjY2Vzc0hhbmRsZXJzW2ldLmZ1bmMpXHJcblx0XHRcdFx0XHRhamF4U3VjY2Vzc0hhbmRsZXJzW2ldLmZ1bmMobXNnKTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRhamF4U3VjY2Vzc0hhbmRsZXJzW2ldKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRlcnJvcjogZnVuY3Rpb24obXNnKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjbG9hZGluZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2ZhZGVpbikge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhpZGUoKS5odG1sKG1zZykuZmFkZUluKDUwMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaHRtbChtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChhamF4RXJyb3JIYW5kbGVycy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhamF4RXJyb3JIYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGFqYXhFcnJvckhhbmRsZXJzW2ldLmZ1bmMpIHtcclxuXHRcdFx0XHRcdFx0YWpheEVycm9ySGFuZGxlcnNbaV0uZnVuYyhtc2cpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YWpheEVycm9ySGFuZGxlcnNbaV0obXNnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YWxlcnQoJ0FKQVggZXJyb3I6ICcgKyBtc2cpO1xyXG5cdFx0XHRcdGFqYXhFcnJvciA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBSkFYIHN1YnBhZ2UgbG9hZGVyIHdpdGggaGlzdG9yeSBzdXBwb3J0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEEgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheFBhZ2VMb2FkKGhhc2gpIHtcclxuICAgIGlmIChoYXNoICE9PSAnJykge1xyXG5cdFx0aGFzaC5yZXBsYWNlKC9eIy8sICcnKTtcclxuXHR9XHJcblx0dmFyIG0gPSBoYXNoLm1hdGNoKC9eZ2V0KC0uKj8pPzsoLiopJC8pO1xyXG5cdGlmIChtKSB7XHJcblx0XHQvLyBhamF4IGJvb2ttYXJrXHJcbiAgICAgICAgdmFyIHVybCA9IG1bMl0uaW5kZXhPZignOycpID4gMCA/IG1bMl0ucmVwbGFjZSgnOycsICc/JykgOiBhamF4Q3VycmVudEJhc2UgKyAnPycgKyBkZWNvZGVVUklDb21wb25lbnQobVsyXSk7XHJcblx0XHRhamF4VXNlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gYWpheFNlbmQoe1xyXG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0ZGl2SWQ6IG1bMV0gPyBtWzFdLnN1YnN0cigxKSA6ICdhamF4QmxvY2snXHJcblx0XHR9KTtcclxuXHR9IGVsc2UgaWYgKGhhc2ggPT09ICcnICYmIGFqYXhVc2VkKSB7XHJcblx0XHQvLyBhamF4IGhvbWVcclxuXHRcdHJldHVybiBhamF4U2VuZCAoe1xyXG5cdFx0XHR1cmw6IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvIy4qJC8sICcnKSxcclxuXHRcdFx0ZGl2SWQ6ICdhamF4QmxvY2snXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBSkFYIHN1YmZvcm0gbG9hZGVyIHdpdGhvdXQgaGlzdG9yeSB0cmFja2luZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBBIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1JZCBUYXJnZXQgZm9ybSBpZCBhdHRyaWJ1dGVcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhGb3JtTG9hZChoYXNoLCBmb3JtSWQpIHtcclxuXHR2YXIgbSA9IGhhc2gubWF0Y2goL14oZ2V0fHBvc3QpKC0uKj8pPzsoLiopJC8pO1xyXG5cdGlmIChtKSB7XHJcblx0XHQvLyBhamF4IGJvb2ttYXJrXHJcblx0XHR2YXIgdXJsID0gbVszXS5pbmRleE9mKCc7JykgPiAwID8gbVszXS5yZXBsYWNlKCc7JywgJz8nKSA6IGFqYXhDdXJyZW50QmFzZSArICc/JyArIG1bM107XHJcblx0XHRhamF4VXNlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gYWpheFNlbmQoe1xyXG5cdFx0XHRtZXRob2Q6IG1bMV0udG9VcHBlckNhc2UoKSxcclxuXHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdGRpdklkOiBtWzJdID8gbVsyXS5zdWJzdHIoMSkgOiAnYWpheEJsb2NrJyxcclxuXHRcdFx0Zm9ybUlkOiBmb3JtSWRcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgYWpheGFibGUgaGFzaCBzdHJpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGhyZWYgTGluayBocmVmIG9yIGZvcm0gYWN0aW9uIGF0dHJpYnV0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsIEFuIGF0dHJpYnV0ZSB2YWx1ZSBwb3NzaWJseSBjb250YWluaW5nIGEgaGFzaCBhZGRyZXNzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSBJcyBwYXNzZWQgZm9yIGZvcm1zIG9ubHksIGlzICdwb3N0JyBmb3IgUE9TVCBmb3Jtc1xyXG4gKiBvciBzZXJpYWxpemVkIGZvcm0gZGF0YSBmb3IgR0VUIGZvcm1zXHJcbiAqIEByZXR1cm4gQSB2YWxpZCBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEB0eXBlIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gYWpheE1ha2VIYXNoKGhyZWYsIHJlbCwgZm9ybURhdGEpIHtcclxuXHR2YXIgaGFzaCA9IChmb3JtRGF0YSA9PSAncG9zdCcpID8gJ3Bvc3QnIDogJ2dldCc7XHJcblx0dmFyIGhyZWZCYXNlLCBwYXJhbXM7XHJcblx0dmFyIHNlcCA9ICc/JztcclxuXHR2YXIgbSA9IHJlbCA/IHJlbC5tYXRjaCgvKGdldHxwb3N0KSgtW14gO10rKT8oO1xcUyopPy8pIDogZmFsc2U7XHJcblx0aWYgKG0pIHtcclxuXHRcdGhhc2ggPSBtWzFdO1xyXG5cdFx0aWYgKG1bMl0pIHtcclxuXHRcdFx0aGFzaCArPSBtWzJdO1xyXG5cdFx0fVxyXG5cdFx0aWYgKG1bM10pIHtcclxuXHRcdFx0aHJlZiA9IG1bM10uc3Vic3RyKDEpO1xyXG5cdFx0XHRzZXAgID0gJzsnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRoYXNoICs9ICc7J1xyXG5cdGlmIChocmVmLmluZGV4T2Yoc2VwKSA+IDApIHtcclxuXHRcdGhyZWZCYXNlID0gaHJlZi5zdWJzdHIoMCwgaHJlZi5pbmRleE9mKHNlcCkpO1xyXG5cdFx0cGFyYW1zID0gaHJlZi5zdWJzdHIoaHJlZi5pbmRleE9mKHNlcCkgKyAxKTtcclxuXHRcdGlmIChmb3JtRGF0YSAmJiBmb3JtRGF0YSAhPSAncG9zdCcpIHtcclxuXHRcdFx0cGFyYW1zICs9ICcmJyArIGZvcm1EYXRhO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRocmVmQmFzZSA9IGhyZWY7XHJcblx0XHRwYXJhbXMgPSAnJztcclxuXHRcdGlmIChmb3JtRGF0YSAmJiBmb3JtRGF0YSAhPSAncG9zdCcpIHtcclxuXHRcdFx0cGFyYW1zICs9IHNlcCArIGZvcm1EYXRhO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRoYXNoICs9IGhyZWZCYXNlID09IGFqYXhDdXJyZW50QmFzZSA/IHBhcmFtcyA6IGhyZWZCYXNlICsgJzsnICsgcGFyYW1zO1xyXG5cdHJldHVybiBoYXNoO1xyXG59XHJcblxyXG4vKipcclxuICogU3RhbmRhcmQgZXZlbnQgYmluZGluZ3NcclxuICovXHJcbmZ1bmN0aW9uIGJpbmRIYW5kbGVycygpIHtcclxuXHRpZiAobG9jYXRpb24uaGFzaCA9PSAnI2NvbW1lbnRzJyB8fCBsb2NhdGlvbi5oYXNoLm1hdGNoKC8jY1xcZCsvKSkge1xyXG5cdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdH1cclxuXHQkKCcuY29tbWVudHNfbGluaycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYoJCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcblx0XHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGlmKGxvY2F0aW9uLmhyZWYubWF0Y2goLyNjb21tZW50cy8pKSB7XHJcblx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0fVxyXG5cclxuXHRpZiAoYWpheEVuYWJsZWQpIHtcclxuXHRcdC8vIEFKQVggYXV0by1oYW5kbGluZ1xyXG5cdFx0JCgnYm9keScpLm9uKCdzdWJtaXQnLCAnZm9ybS5hamF4JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmF0dHIoJ21ldGhvZCcpLnRvVXBwZXJDYXNlKCkgPT0gJ1BPU1QnKSB7XHJcblx0XHRcdFx0YWpheEZvcm1Mb2FkKGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2FjdGlvbicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cignY2xhc3MnKSwgJ3Bvc3QnKSwgJCh0aGlzKS5hdHRyKCdpZCcpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2FjdGlvbicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cignY2xhc3MnKSwgJCh0aGlzKS5zZXJpYWxpemUoKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGFqYXhFcnJvcjtcclxuXHRcdH0pO1xyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhLmFqYXgnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdocmVmJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcblx0XHRcdHJldHVybiBhamF4RXJyb3I7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBSkFYIGFjdGlvbiBjb25maXJtYXRpb25zXHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EuY29uZmlybUxpbmsnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuYXR0cignaHJlZicpLm1hdGNoKC9tZXNzYWdlLis5MjAvaSkpIHtcclxuXHRcdFx0XHRpZiAoJCgnI2NvbmZpcm1Cb3gnKSkge1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCgnYm9keScpLnByZXBlbmQoJzxkaXYgaWQ9XCJjb25maXJtQm94XCIgY2xhc3M9XCJqcW1XaW5kb3dcIj48L2Rpdj4nKTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbSh7YWpheDokKHRoaXMpLmF0dHIoJ2hyZWYnKSxtb2RhbDp0cnVlLG9uTG9hZDpmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5jc3MoJ21hcmdpbi1sZWZ0JywgJy0nKygkKCcjY29uZmlybUJveCcpLndpZHRoKCkvMikrJ3B4Jyk7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmNzcygnbWFyZ2luLXRvcCcsICctJysoJCgnI2NvbmZpcm1Cb3gnKS5oZWlnaHQoKS8yKSsncHgnKTtcclxuXHRcdFx0XHR9fSk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW1TaG93KCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBMaXN0ZW4gdG8gaGFzaCBjaGFuZ2UgZXZlbnRzXHJcblx0XHQkKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0YWpheFBhZ2VMb2FkKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYSNjb25maXJtTm8nLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQoXCIjY29uZmlybUJveFwiKS5pcyhcIi5qcW1XaW5kb3dcIikpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbUhpZGUoKTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5pZiAodHlwZW9mIGpRdWVyeSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gSWYgcGFnZSB3YXMgbG9hZGVkIHdpdGggaGFzaFxyXG4gICAgICAgIGlmIChhamF4RW5hYmxlZCkge1xyXG4gICAgICAgICAgICBpZih3aW5kb3cubG9jYXRpb24uaGFzaCAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgYWpheFBhZ2VMb2FkKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmluZEhhbmRsZXJzKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxud2luZG93Lm5hbWUgPSAnbWFpbic7Il19
