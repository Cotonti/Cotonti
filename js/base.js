/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
(()=>{"use strict";class e extends EventTarget{mode="production";driverType="";constructor(e,t=null){super(),this.driverType=e,null!==t&&(this.mode=t),this.init()}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsClient: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class t extends EventTarget{mode="production";eventsUrl=null;constructor(e,t=null){super(),null!==t&&""!==t&&(this.mode=t),this.eventsUrl=e}init(){}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsDriver: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class n extends t{#e=null;init(){if(null!==this.#e)return;"production"!==this.mode&&console.log("init ServerEventsSSEDriver. ",this.eventsUrl);const e=this.eventsUrl+"&ts="+Date.now();this.#e=new EventSource(e),"production"!==this.mode&&(this.#e.onopen=function(e){console.log("ServerEventsSSEDriver connection is open")}),this.#e.onmessage=e=>{const t=JSON.parse(e.data);void 0!==t.data&&"string"==typeof t.data&&""!==t.data&&(t.data=JSON.parse(t.data)),t.eventId=e.lastEventId,this.onEventTriggered(t)},"production"!==this.mode&&(this.#e.onerror=function(e){console.log("ServerEventsSSEDriver connection error")})}}class s extends t{#t=6e3;#n=null;#s=!1;init(){this.#s||(this.#s=!0,"production"!==this.mode&&console.log("init ServerEventsAjaxDriver ",this.eventsUrl),this.#n=setTimeout((()=>this.#o()),500))}async#o(){try{const e=this.eventsUrl+"&ts="+Date.now(),t=await fetch(e);if(!t.ok)throw new Error(`Response status: ${t.status}`);const n=await t.json();if(void 0!==n.error&&"driverDisabled"===n.error.code)return void("production"!==this.mode&&console.error(n.error.message));void 0!==n.events&&n.events.forEach((e=>{e.eventId=void 0!==e.id?e.id:null,this.onEventTriggered(e)})),this.#n=setTimeout((()=>this.#o()),this.#t)}catch(e){console.error("ServerEventsAjaxDriver get events error: "+e.message),this.#n=setTimeout((()=>this.#o()),this.#t)}}}class o{#i="/";#r="production";constructor(e=null,t=null){null!==e&&(this.#i=e),null!==t&&(this.#r=t)}getByType(e){let t=null;const o=this.#i+"?n=server-events&a=sse",i=this.#i+"?n=server-events&a=ajax&_ajax=1";return"sse"===e?(t=new n(o,this.#r),"production"!==this.#r&&console.log("using ServerEventsSSEDriver",o)):(t=new s(i,this.#r),"production"!==this.#r&&console.log("using ServerEventsAjaxDriver",i)),t}}class i extends e{init(){"production"!==this.mode&&console.log("init ServerEventsClient");const e=new o(getBaseHref(),this.mode).getByType(this.driverType,this.mode);e.addEventListener("event",(e=>{this.onEventTriggered(e.detail)})),e.init()}}class r extends e{init(){let e="/js/sharedWorkerServerEvents.min.js?v=1";"production"!==this.mode&&console.log("init ServerEventsSharedWorkerClient: "+e);try{const t=new SharedWorker(e).port;t.postMessage({config:{mode:this.mode,driver:this.driverType,baseUrl:getBaseHref()}}),t.onmessage=e=>{"production"!==this.mode&&console.log("ServerSentEventsSharedWorker event",e.data),this.onEventTriggered(e.data)}}catch(e){console.error(e)}}}class a{mode="production";#a=null;#l="sharedWorker";#d="sse";#c=null;constructor(){this.#c=new Map,this.#d=cot.cfg.serverEvents}addObserver(e,t,n){"none"!==cot.cfg.serverEvents&&(this.#c.set(e,{name:e,event:t,onEvent:n}),null===this.#a&&this.#h())}#h(){"none"!==cot.cfg.serverEvents&&("sharedWorker"===this.#l&&void 0!==typeof SharedWorker?("production"!==this.mode&&console.log("creating ServerEventsSharedWorkerClient"),this.#a=new r(this.#d,this.mode)):("production"!==this.mode&&console.log("creating ServerEventsClient"),this.#a=new i(this.#d,this.mode)),this.#a.addEventListener("event",(e=>{this.#v(e.detail)})))}#v(e){"production"!==this.mode&&console.log("Server triggered event",e),this.#c.forEach((t=>{t.event===e.event&&"function"==typeof t.onEvent&&t.onEvent(e)}))}}class l{static containerClass="toast-container position-fixed bottom-0 end-0 p-3";title="";message="";hint="";type="";delay=5e3;#u=null;constructor(e,t="",n="",s=""){void 0!==window.bootstrap?(this.title=t,this.message=e,this.hint=n,this.type=s):console.error('Bootstrap is not found. It is required for use "Toast" component')}show(){if(null===this.#u){let e=document.getElementById("toast-container");null===e&&(e=this.#m()),this.#u=e}const e=`<strong class="me-auto">${this.title}</strong>`,t=""!==this.hint?`<small>${this.hint}</small>`:"",n=`<div class="toast${""!==this.type?` text-bg-${this.type}`:""}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="${this.delay}"><div class="toast-header">${e}${t}<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div><div class="toast-body">${this.message}</div></div>`,s=document.createElement("div");s.innerHTML=n;const o=s.firstElementChild;this.#u.appendChild(o),new window.bootstrap.Toast(o).show(),this.#u.lastElementChild.addEventListener("hidden.bs.toast",(()=>{o.remove(),""===this.#u.innerHTML&&(this.#u.remove(),this.#u=null)}))}#m(){const e=document.createElement("div");return e.id="toast-container",e.className=l.containerClass,document.body.append(e),e}}class d{title="";content="";buttons=null;centered=!1;dialogClass="modal-dialog";#p=null;constructor(e,t="",n=null){void 0!==window.bootstrap?(this.title=t,this.content=e,this.buttons=n):console.error('Bootstrap is not found. It is required for use "Modal" component')}show(){let e=this.dialogClass;this.centered&&(e+=" modal-dialog-centered");const t=`<div class="modal fade" id="CotontiDynamicModal" tabindex="-1" aria-labelledby="CotontiDynamicModalLabel" aria-hidden="true"><div class="${e}"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="CotontiDynamicModalLabel">${this.title}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">${this.content}</div><div class="modal-footer"></div></div></div></div>`,n=document.createElement("div");n.innerHTML=t,this.#p=n.firstElementChild,this.#g(),document.body.appendChild(this.#p),new bootstrap.Modal(this.#p).show(),this.#p.addEventListener("hidden.bs.modal",(()=>{this.#p.remove()}))}#g(){const e=this.#y();if(""===e||e===[])return;const t=this.#p.querySelector(".modal-footer");"string"!=typeof e?Array.isArray(e)&&e.forEach((e=>{"string"!=typeof e?t.appendChild(e):t.innerHTML+=e})):t.innerHTML=e}#y(){const e=[];let t=this.buttons;return t===[]?e:null===t?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':"string"==typeof t?t:(Array.isArray(t)&&t.forEach((t=>{if("string"==typeof t)return void e.push(t);const n=document.createElement("button");void 0!==t.label&&(n.innerHTML=t.label),n.setAttribute("type",void 0!==t.btnType?t.btnType:"button"),n.classList.add("btn"),void 0!==t.type&&n.classList.add("btn-"+t.type),void 0!==t.closeOnClick&&!0===t.closeOnClick&&n.setAttribute("data-bs-dismiss","modal"),void 0!==t.onClick&&"function"==typeof t.onClick&&n.addEventListener("click",(e=>t.onClick(e))),e.push(n)})),e)}}window.cot=new class{cfg={};L={};#E=null;init(e){void 0!==e.config&&(this.cfg=e.config),void 0!==e.lang&&(this.L=e.lang),this.#b()}#b(){if(void 0===window.jQuery||void 0===window.jQuery.fn.select2)return;const e=document.querySelectorAll(".select2");0!==e.length&&e.forEach((e=>{void 0===e.dataset.inited&&($(e).select2(),e.dataset.inited="true")}))}getServerEvents(){return null===this.#E&&(this.#E=new a),this.#E}confirm(e,t,n,s="Ok",o="Cancel"){this.modal(e,t,[{label:s,onClick:e=>n(e),type:"primary",closeOnClick:!0},{label:o,closeOnClick:!0,type:"secondary"}])}getModal(e,t="",n=null){return new d(e,t,n)}modal(e,t="",n=null){const s=this.getModal(e,t,n);return s.show(),s}getToast(e,t="",n="",s=""){return new l(e,t,n,s)}toast(e,t="",n="",s="",o=5e3){const i=this.getToast(e,t,n,s);return null!==o&&(i.delay=o),i.show(),i}async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let t=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let n of e)n in this.loadedData||t.push(n);if(t.length>0){let e=new URLSearchParams({n:"main",a:"get"});t.forEach(((t,n,s)=>{e.append("data["+n+"]",t)})),e.append("_ajax",1);try{let t=await fetch("index.php?"+e.toString());if(t.ok){const e=await t.json();if(e.success)for(const t in e.data)this.loadedData[t]=e.data[t]}}catch(e){}}let n={};for(let t of e)t in this.loadedData&&(n[t]=this.loadedData[t]);return n}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let t=document.querySelectorAll(".captcha-place-holder");for(let n of t){n.innerHTML=e.captcha,this.executeScriptElements(n),n.classList.remove("captcha-place-holder","loading"),n.classList.add("captcha");const t=n.closest("form");if(null!==t){let n=t.querySelector('input[type="hidden"][name="x"]');null!==n&&n.setAttribute("value",e.x)}}}))}executeScriptElements(e){const t=e.querySelectorAll("script");Array.from(t).forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.text=e.text,e.parentNode.replaceChild(t,e)}))}}})();

function encodeURIfix(str) {
	// to prevent twice encoding
	// and fix '[',']' signs to follow RFC3986 (section-3.2.2)
	return encodeURI(decodeURI(str)).replace(/%5B/g, '[').replace(/%5D/g, ']');
}

function getBaseHref() {
	var href = document.getElementsByTagName('base')[0].href;
	if (href == null) {
		return '/';
	} else {
		return href;
	}
}

function popup(code, w, h){
    window.open(getBaseHref() + 'index.php?o=' + code, '', 'toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width=' + w + ',height=' + h + ',left=32,top=16');
}

/**
 * @todo move to pfs module
 */
function pfs(id, c1, c2, parser){
    window.open(
		getBaseHref() + 'index.php?e=pfs&userid=' + id + '&c1=' + c1 + '&c2=' + c2 + '&parser=' + parser,
		'PFS',
		'status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16'
	);
}

function redirect(url){
    location.href = url.options[url.selectedIndex].value;
}

function toggleblock(id){
    var bl = document.getElementById(id);
    if (bl.style.display == 'none') {
        bl.style.display = '';
    }
    else {
        bl.style.display = 'none';
    }
	return false;
}

function toggleAll(action) {
	var blks = document.querySelectorAll('[id^="blk_"]');
	for (i = 0; i < blks.length; i++) {
		if (action == 'hide') {
			blks[i].style.display = 'none';
		} else if (action == 'show') {
			blks[i].style.display = 'table-row-group';
		}
	}
	return false;
}

// Inserts text into textarea at cursor position
function insertText(docObj, fieldName, value) {
	var field = null;
	if (!docObj) {
		docObj = document;
	}
	// Find the field in the docObj
	findField:
	for (var i = 0; i < docObj.forms.length; i++) {
		for (var j = 0; j < docObj.forms[i].elements.length; j++) {
			if (docObj.forms[i].elements[j].name == fieldName) {
				field = docObj.forms[i].elements[j];
				break findField;
			}
		}
	}
	if (!field) {
		return false;
	}

	// Insert the text
	if (docObj.selection) {
		// MSIE and Opera
		field.focus();
		var sel = docObj.selection.createRange();
		sel.text = value;
	} else if (field.selectionStart || field.selectionStart == 0) {
		// Mozilla
		var startPos = field.selectionStart;
		var endPos = field.selectionEnd;
		field.value = field.value.substring(0, startPos) + value + field.value.substring(endPos, field.value.length);
	} else {
		field.value += value;
	}
	return true;
}

// Array of ajax error handlers
// Example of use:
// ajaxErrorHandlers.push({func: myErrorHandler});
// ajaxSuccessHandlers.push({func: mySuccessHandler});
var ajaxErrorHandlers = new Array();
var ajaxSuccessHandlers = new Array();
// AJAX enablement defaults to false
var ajaxEnabled = false;
// Required to calculate paths
if (typeof jQuery != 'undefined') {
	var ajaxCurrentBase = location.href.replace($('base').eq(0).attr('href'), '').replace(/\?.*$/, '').replace(/#.*$/, '');
}
// This flag indicates that AJAX+history has been used on this page
// It means that "#" or home link should be loaded via ajax too
var ajaxUsed = false;
// Global flag to let everybody know that AJAX has failed
var ajaxError = false;

/**
 * AJAX helper function
 * @param {hash} settings A hashtable with settings
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxSend(settings) {
	var method = settings.method ? settings.method.toUpperCase() : 'GET';
	var data = settings.data || '';
	var url = settings.url || $('#' + settings.formId).attr('action');
	if (method === 'POST') {
		data += '&' + $('#' + settings.formId).serialize();
	} else if (settings.formId) {
		var sep = url.indexOf('?') > 0 ? '&' : '?';
		url += sep + $('#' + settings.formId).serialize();
	}
	$.ajax({
		type: method,
		url: encodeURIfix(url),
		data: data,
		beforeSend: function() {
			if (!settings.nonshowloading) {
				$('#' + settings.divId)
					.append('<span style="position:absolute; left:' + ($('#' + settings.divId).width()/2 - 110) + 'px;top:' + ($('#' + settings.divId).height()/2 - 9) + 'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css('position', 'relative');
			}
		},
		success: function(msg) {
			if (!settings.nonshowloading) {
				$('#loading').remove();
			}
			if (!settings.nonshowfadein) {
				$('#' + settings.divId).hide().html(msg).fadeIn(500);
			} else {
				$('#' + settings.divId).html(msg);
			}
			for (var i = 0; i < ajaxSuccessHandlers.length; i++) {
				if(ajaxSuccessHandlers[i].func)
					ajaxSuccessHandlers[i].func(msg);
				else
					ajaxSuccessHandlers[i](msg);
			}
		},
		error: function(msg) {
			if (!settings.nonshowloading) {
				$('#loading').remove();
			}
			if (!settings.nonshowfadein) {
				$('#' + settings.divId).hide().html(msg).fadeIn(500);
			} else {
				$('#' + settings.divId).html(msg);
			}
			if (ajaxErrorHandlers.length > 0) {
				for (var i = 0; i < ajaxErrorHandlers.length; i++) {
					if (ajaxErrorHandlers[i].func) {
						ajaxErrorHandlers[i].func(msg);
					} else {
						ajaxErrorHandlers[i](msg);
					}
				}
			} else {
				alert('AJAX error: ' + msg);
				ajaxError = true;
			}
		}
	});
	return false;
}

/**
 * AJAX subpage loader with history support
 * @param {string} hash A hash-address string
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxPageLoad(hash) {
    if (hash !== '') {
		hash.replace(/^#/, '');
	}
	var m = hash.match(/^get(-.*?)?;(.*)$/);
	if (m) {
		// ajax bookmark
        var url = m[2].indexOf(';') > 0 ? m[2].replace(';', '?') : ajaxCurrentBase + '?' + decodeURIComponent(m[2]);
		ajaxUsed = true;
		return ajaxSend({
			method: 'GET',
			url: url,
			divId: m[1] ? m[1].substr(1) : 'ajaxBlock'
		});
	} else if (hash === '' && ajaxUsed) {
		// ajax home
		return ajaxSend ({
			url: location.href.replace(/#.*$/, ''),
			divId: 'ajaxBlock'
		});
	}
	return true;
}

/**
 * AJAX subform loader without history tracking
 * @param {string} hash A hash-address string
 * @param {string} formId Target form id attribute
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxFormLoad(hash, formId) {
	var m = hash.match(/^(get|post)(-.*?)?;(.*)$/);
	if (m) {
		// ajax bookmark
		var url = m[3].indexOf(';') > 0 ? m[3].replace(';', '?') : ajaxCurrentBase + '?' + m[3];
		ajaxUsed = true;
		return ajaxSend({
			method: m[1].toUpperCase(),
			url: url,
			divId: m[2] ? m[2].substr(1) : 'ajaxBlock',
			formId: formId
		});
	}
	return true;
}

/**
 * Constructs ajaxable hash string
 * @param {string} href Link href or form action attribute
 * @param {string} rel An attribute value possibly containing a hash address
 * @param {string} formData Is passed for forms only, is 'post' for POST forms
 * or serialized form data for GET forms
 * @return A valid hash-address string
 * @type string
 */
function ajaxMakeHash(href, rel, formData) {
	var hash = (formData == 'post') ? 'post' : 'get';
	var hrefBase, params;
	var sep = '?';
	var m = rel ? rel.match(/(get|post)(-[^ ;]+)?(;\S*)?/) : false;
	if (m) {
		hash = m[1];
		if (m[2]) {
			hash += m[2];
		}
		if (m[3]) {
			href = m[3].substr(1);
			sep  = ';';
		}
	}
	hash += ';'
	if (href.indexOf(sep) > 0) {
		hrefBase = href.substr(0, href.indexOf(sep));
		params = href.substr(href.indexOf(sep) + 1);
		if (formData && formData != 'post') {
			params += '&' + formData;
		}
	} else {
		hrefBase = href;
		params = '';
		if (formData && formData != 'post') {
			params += sep + formData;
		}
	}
	hash += hrefBase == ajaxCurrentBase ? params : hrefBase + ';' + params;
	return hash;
}

/**
 * Standard event bindings
 */
function bindHandlers() {
	if (location.hash == '#comments' || location.hash.match(/#c\d+/)) {
		$('.comments').css('display', '');
	}
	$('.comments_link').click(function() {
		if($('.comments').css('display') == 'none') {
			$('.comments').css('display', '');
		} else {
			$('.comments').css('display', 'none');
		}
	});

	if(location.href.match(/#comments/)) {
		$('.comments').css('display', '');
	}

	if (ajaxEnabled) {
		// AJAX auto-handling
		$('body').on('submit', 'form.ajax', function() {
			if ($(this).attr('method').toUpperCase() == 'POST') {
				ajaxFormLoad(ajaxMakeHash($(this).attr('action').replace(/#.*$/, ''), $(this).attr('class'), 'post'), $(this).attr('id'));
			} else {
				window.location.hash = ajaxMakeHash($(this).attr('action').replace(/#.*$/, ''), $(this).attr('class'), $(this).serialize());
			}
			return ajaxError;
		});
		$('body').on('click', 'a.ajax', function() {
			window.location.hash = ajaxMakeHash($(this).attr('href').replace(/#.*$/, ''), $(this).attr('rel'));
			return ajaxError;
		});

		// AJAX action confirmations
		$('body').on('click', 'a.confirmLink', function() {
			if ($(this).attr('href').match(/message.+920/i)) {
				if ($('#confirmBox')) {
					$('#confirmBox').remove();
				}
				$('body').prepend('<div id="confirmBox" class="jqmWindow"></div>');
				$('#confirmBox').jqm({ajax:$(this).attr('href'),modal:true,onLoad:function(){
					$('#confirmBox').css('margin-left', '-'+($('#confirmBox').width()/2)+'px');
					$('#confirmBox').css('margin-top', '-'+($('#confirmBox').height()/2)+'px');
				}});
				$('#confirmBox').jqmShow();
				return false;
			} else {
				return true;
			}
		});

		// Listen to hash change events
		$(window).on('hashchange', function() {
			ajaxPageLoad(window.location.hash.replace(/^#/, ''));
		});

		$('body').on('click', 'a#confirmNo', function() {
			if ($("#confirmBox").is(".jqmWindow"))
			{
				$('#confirmBox').jqmHide();
				$('#confirmBox').remove();
				return false;
			}
			else
			{
				return true;
			}
		});
	}
}

if (typeof jQuery != 'undefined') {
    $(document).ready(function() {
        // If page was loaded with hash
        if (ajaxEnabled) {
            if(window.location.hash != '') {
                ajaxPageLoad(window.location.hash.replace(/^#/, ''));
            }
        }

        bindHandlers();
    });
}

window.name = 'main';//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2NsaWVudC9CYXNlU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9kcml2ZXIvQmFzZVNlcnZlckV2ZW50c0RyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c1NTRURyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c0FqYXhEcml2ZXIuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9TZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvVG9hc3QuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvQ290b250aUFwcGxpY2F0aW9uLmpzIiwiYmFzZS5qcyJdLCJuYW1lcyI6WyJCYXNlU2VydmVyRXZlbnRzQ2xpZW50IiwiRXZlbnRUYXJnZXQiLCJtb2RlIiwiZHJpdmVyVHlwZSIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJ0aGlzIiwiaW5pdCIsIm9uRXZlbnRUcmlnZ2VyZWQiLCJldmVudERhdGEiLCJjb25zb2xlIiwibG9nIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJCYXNlU2VydmVyRXZlbnRzRHJpdmVyIiwiZXZlbnRzVXJsIiwiU2VydmVyRXZlbnRzU1NFRHJpdmVyIiwidXJsIiwiRGF0ZSIsIm5vdyIsIkV2ZW50U291cmNlIiwib25vcGVuIiwib25tZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInVuZGVmaW5lZCIsImV2ZW50SWQiLCJsYXN0RXZlbnRJZCIsIm9uZXJyb3IiLCJTZXJ2ZXJFdmVudHNBamF4RHJpdmVyIiwic2V0VGltZW91dCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwicmVzdWx0IiwianNvbiIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJldmVudHMiLCJmb3JFYWNoIiwiaWQiLCJTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5IiwiYmFzZVVybCIsImdldEJ5VHlwZSIsImRyaXZlciIsInNlcnZlclNlbnRFdmVudHNVcmwiLCJhamF4RXZlbnRzVXJsIiwiU2VydmVyRXZlbnRzQ2xpZW50IiwiZ2V0QmFzZUhyZWYiLCJhZGRFdmVudExpc3RlbmVyIiwiU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50Iiwid29ya2VyVXJsIiwicG9ydCIsIlNoYXJlZFdvcmtlciIsInBvc3RNZXNzYWdlIiwiY29uZmlnIiwiZSIsIlNlcnZlckV2ZW50cyIsIk1hcCIsImNvdCIsImNmZyIsInNlcnZlckV2ZW50cyIsImFkZE9ic2VydmVyIiwibmFtZSIsImNhbGxiYWNrIiwic2V0Iiwib25FdmVudCIsIm9ic2VydmVyIiwiVG9hc3QiLCJzdGF0aWMiLCJ0aXRsZSIsImhpbnQiLCJ0eXBlIiwiZGVsYXkiLCJ3aW5kb3ciLCJib290c3RyYXAiLCJzaG93IiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRvYXN0VGl0bGUiLCJ0b2FzdEhpbnQiLCJ0b2FzdEhUTUwiLCJ0b2FzdFdyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwidG9hc3RFbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJhcHBlbmRDaGlsZCIsImxhc3RFbGVtZW50Q2hpbGQiLCJyZW1vdmUiLCJjbGFzc05hbWUiLCJjb250YWluZXJDbGFzcyIsImJvZHkiLCJhcHBlbmQiLCJNb2RhbCIsImNvbnRlbnQiLCJidXR0b25zIiwiY2VudGVyZWQiLCJkaWFsb2dDbGFzcyIsIm1vZGFsSFRNTCIsIm1vZGFsV3JhcHBlciIsInF1ZXJ5U2VsZWN0b3IiLCJBcnJheSIsImlzQXJyYXkiLCJidXR0b24iLCJidXR0b25EYXRhIiwicHVzaCIsImxhYmVsIiwic2V0QXR0cmlidXRlIiwiYnRuVHlwZSIsImNsYXNzTGlzdCIsImFkZCIsImNsb3NlT25DbGljayIsIm9uQ2xpY2siLCJMIiwibGFuZyIsImpRdWVyeSIsImZuIiwic2VsZWN0MiIsImVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImVsZW1lbnQiLCJkYXRhc2V0IiwiaW5pdGVkIiwiJCIsImdldFNlcnZlckV2ZW50cyIsImNvbmZpcm0iLCJva0xhYmVsIiwiY2FuY2VsTGFiZWwiLCJtb2RhbCIsImdldE1vZGFsIiwiZ2V0VG9hc3QiLCJ0b2FzdCIsImxvYWREYXRhIiwid2hhdCIsImxvYWRlZERhdGEiLCJkYXRhVG9Mb2FkIiwiU3RyaW5nIiwiaXRlbSIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIm4iLCJhIiwiaW5kZXgiLCJhcnJheSIsInRvU3RyaW5nIiwicmVzcG9uc2VEYXRhIiwic3VjY2VzcyIsImtleSIsImxvYWRDYXB0Y2hhIiwidGhlbiIsImNhcHRjaGFFbGVtZW50cyIsImNhcHRjaGEiLCJleGVjdXRlU2NyaXB0RWxlbWVudHMiLCJmb3JtIiwiY2xvc2VzdCIsImlucHV0WCIsIngiLCJjb250YWluZXJFbGVtZW50Iiwic2NyaXB0RWxlbWVudHMiLCJmcm9tIiwic2NyaXB0RWxlbWVudCIsImNsb25lZEVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwiYXR0cmlidXRlIiwidmFsdWUiLCJ0ZXh0IiwicGFyZW50Tm9k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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICogQGxpY2Vuc2UgaHR0cHM6Ly9naXRodWIuY29tL0NvdG9udGkvQ290b250aS9ibG9iL21hc3Rlci9MaWNlbnNlLnR4dFxyXG4gKi8iLCIvKipcclxuICogQmFzZSBzZXJ2ZXIgZXZlbnRzIGNsaWVudFxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJhc2VTZXJ2ZXJFdmVudHNDbGllbnQgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cclxuICAgICAqL1xyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGRyaXZlclR5cGUgPSAnJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkcml2ZXJUeXBlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBtb2RlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRyaXZlclR5cGUsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kcml2ZXJUeXBlID0gZHJpdmVyVHlwZTtcclxuXHJcbiAgICAgICAgaWYgKG1vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJFdmVudHNDbGllbnQ6IFNlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2V2ZW50Jywge2RldGFpbDogZXZlbnREYXRhfSk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBCYXNlIHNlcnZlciBldmVudHMgZHJpdmVyXHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZVNlcnZlckV2ZW50c0RyaXZlciBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIG1vZGUgPSAncHJvZHVjdGlvbic7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIGV2ZW50c1VybCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXZlbnRzVXJsLCBtb2RlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmIChtb2RlICE9PSBudWxsICYmIG1vZGUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXZlbnRzVXJsID0gZXZlbnRzVXJsO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7IH1cclxuXHJcbiAgICBvbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzRHJpdmVyOiBTZXJ2ZXIgdHJpZ2dlcmVkIGV2ZW50JywgZXZlbnREYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdldmVudCcsIHtkZXRhaWw6IGV2ZW50RGF0YX0pO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Jhc2VTZXJ2ZXJFdmVudHNEcml2ZXJ9IGZyb20gXCIuL0Jhc2VTZXJ2ZXJFdmVudHNEcml2ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXIgLSBTZW50IGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICogQGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNTU0VEcml2ZXIgZXh0ZW5kcyBCYXNlU2VydmVyRXZlbnRzRHJpdmVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge0V2ZW50U291cmNlfG51bGx9XHJcbiAgICAgKi9cclxuICAgICNldmVudFNvdXJjZSA9IG51bGw7XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jZXZlbnRTb3VyY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c1NTRURyaXZlci4gJywgdGhpcy5ldmVudHNVcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5ldmVudHNVcmwgKyAnJnRzPScgKyBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuI2V2ZW50U291cmNlID0gbmV3IEV2ZW50U291cmNlKHVybCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLiNldmVudFNvdXJjZS5vbm9wZW4gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJFdmVudHNTU0VEcml2ZXIgY29ubmVjdGlvbiBpcyBvcGVuJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNldmVudFNvdXJjZS5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50RGF0YS5kYXRhICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBldmVudERhdGEuZGF0YSA9PT0gJ3N0cmluZycpICYmIGV2ZW50RGF0YS5kYXRhICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLmRhdGEgPSBKU09OLnBhcnNlKGV2ZW50RGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudERhdGEuZXZlbnRJZCA9IGV2ZW50Lmxhc3RFdmVudElkO1xyXG4gICAgICAgICAgICB0aGlzLm9uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2Uub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c1NTRURyaXZlciBjb25uZWN0aW9uIGVycm9yJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Jhc2VTZXJ2ZXJFdmVudHNEcml2ZXJ9IGZyb20gXCIuL0Jhc2VTZXJ2ZXJFdmVudHNEcml2ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXIgZXZlbnRzIGFqYXggZHJpdmVyXHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyRXZlbnRzQWpheERyaXZlciBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNEcml2ZXIge1xyXG4gICAgI3RpbWVPdXRQZXJpb2QgPSA2MDAwOyAvLyA2IHNlYy5cclxuXHJcbiAgICAjdGltZXJJZCA9IG51bGw7XHJcblxyXG4gICAgI2luaXRlZCA9IGZhbHNlO1xyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI2luaXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNpbml0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyRXZlbnRzQWpheERyaXZlciAnLCB0aGlzLmV2ZW50c1VybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiN0aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLiNnZXRFdmVudHMoKSwgNTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyAjZ2V0RXZlbnRzKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IHRoaXMuZXZlbnRzVXJsICsgJyZ0cz0nICsgRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlc3BvbnNlIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvci5jb2RlID09PSAnZHJpdmVyRGlzYWJsZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVzdWx0LmVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3Qgc2VuZCBtb3JlIHJlcXVlc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LmV2ZW50cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZXZlbnRJZCA9IGV2ZW50LmlkICE9PSB1bmRlZmluZWQgPyBldmVudC5pZCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiN0aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLiNnZXRFdmVudHMoKSwgdGhpcy4jdGltZU91dFBlcmlvZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignU2VydmVyRXZlbnRzQWpheERyaXZlciBnZXQgZXZlbnRzIGVycm9yOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMuI3RpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuI2dldEV2ZW50cygpLCB0aGlzLiN0aW1lT3V0UGVyaW9kKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c1NTRURyaXZlcn0gZnJvbSBcIi4vU2VydmVyRXZlbnRzU1NFRHJpdmVyXCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzQWpheERyaXZlcn0gZnJvbSBcIi4vU2VydmVyRXZlbnRzQWpheERyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIEJhc2Ugc2VydmVyIGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5IHtcclxuICAgICNiYXNlVXJsID0gJy8nO1xyXG5cclxuICAgICNtb2RlID0gJ3Byb2R1Y3Rpb24nXHJcblxyXG4gICAgY29uc3RydWN0b3IoYmFzZVVybCA9IG51bGwsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKGJhc2VVcmwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy4jYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI21vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkcml2ZXJUeXBlXHJcbiAgICAgKiBAcmV0dXJucyB7U2VydmVyRXZlbnRzU1NFRHJpdmVyfFNlcnZlckV2ZW50c0FqYXhEcml2ZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldEJ5VHlwZShkcml2ZXJUeXBlKSB7XHJcbiAgICAgICAgbGV0IGRyaXZlciA9IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlcnZlclNlbnRFdmVudHNVcmwgPSB0aGlzLiNiYXNlVXJsICsgJz9uPXNlcnZlci1ldmVudHMmYT1zc2UnO1xyXG4gICAgICAgIGNvbnN0IGFqYXhFdmVudHNVcmwgPSB0aGlzLiNiYXNlVXJsICsgJz9uPXNlcnZlci1ldmVudHMmYT1hamF4Jl9hamF4PTEnO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGRyaXZlclR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc3NlJzpcclxuICAgICAgICAgICAgICAgIC8vIFNlcnZlci1TZW50IGV2ZW50cyBkcml2ZXJcclxuICAgICAgICAgICAgICAgIGRyaXZlciA9IG5ldyBTZXJ2ZXJFdmVudHNTU0VEcml2ZXIoc2VydmVyU2VudEV2ZW50c1VybCwgdGhpcy4jbW9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jbW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzaW5nIFNlcnZlckV2ZW50c1NTRURyaXZlcicsIHNlcnZlclNlbnRFdmVudHNVcmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZHJpdmVyID0gbmV3IFNlcnZlckV2ZW50c0FqYXhEcml2ZXIoYWpheEV2ZW50c1VybCwgdGhpcy4jbW9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jbW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzaW5nIFNlcnZlckV2ZW50c0FqYXhEcml2ZXInLCBhamF4RXZlbnRzVXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkcml2ZXI7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Jhc2VTZXJ2ZXJFdmVudHNDbGllbnR9IGZyb20gXCIuL0Jhc2VTZXJ2ZXJFdmVudHNDbGllbnRcIjtcclxuaW1wb3J0IHtTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5fSBmcm9tIFwiLi4vZHJpdmVyL1NlcnZlckV2ZW50c0RyaXZlckZhY3RvcnlcIjtcclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXIgZXZlbnRzIGNsaWVudFxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50c0NsaWVudCBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNDbGllbnQge1xyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyRXZlbnRzQ2xpZW50Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmYWN0b3J5ID0gbmV3IFNlcnZlckV2ZW50c0RyaXZlckZhY3RvcnkoZ2V0QmFzZUhyZWYoKSwgdGhpcy5tb2RlKTtcclxuXHJcbiAgICAgICAgY29uc3QgZHJpdmVyID0gZmFjdG9yeS5nZXRCeVR5cGUodGhpcy5kcml2ZXJUeXBlLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIGRyaXZlci5hZGRFdmVudExpc3RlbmVyKCdldmVudCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uRXZlbnRUcmlnZ2VyZWQoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkcml2ZXIuaW5pdCgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCYXNlU2VydmVyRXZlbnRzQ2xpZW50fSBmcm9tIFwiLi9CYXNlU2VydmVyRXZlbnRzQ2xpZW50XCI7XHJcblxyXG4vKipcclxuICogU2hhcmVkIHdvcmtlciBzZXJ2ZXIgZXZlbnRzIGNsaWVudFxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2hhcmVkV29ya2VyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50IGV4dGVuZHMgQmFzZVNlcnZlckV2ZW50c0NsaWVudCB7XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGxldCB3b3JrZXJVcmwgPSAnL2pzL3NoYXJlZFdvcmtlclNlcnZlckV2ZW50cy5taW4uanM/dj0xJztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudDogJyArIHdvcmtlclVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JrZXIgPSBuZXcgU2hhcmVkV29ya2VyKHdvcmtlclVybCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcnQgPSB3b3JrZXIucG9ydDtcclxuXHJcbiAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2Uoe2NvbmZpZzoge21vZGU6IHRoaXMubW9kZSwgZHJpdmVyOiB0aGlzLmRyaXZlclR5cGUsIGJhc2VVcmw6IGdldEJhc2VIcmVmKCl9fSk7XHJcblxyXG4gICAgICAgICAgICBwb3J0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlclNlbnRFdmVudHNTaGFyZWRXb3JrZXIgZXZlbnQnLCBldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudFRyaWdnZXJlZChldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c0NsaWVudH0gZnJvbSBcIi4vY2xpZW50L1NlcnZlckV2ZW50c0NsaWVudFwiO1xyXG5pbXBvcnQge1NlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudH0gZnJvbSBcIi4vY2xpZW50L1NlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudFwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBldmVudHNcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNb2RlOiAncHJvZHVjdGlvbicgb3IgJ2RldmVsb3BtZW50J1xyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtudWxsfFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudHxTZXJ2ZXJFdmVudHNDbGllbnR9XHJcbiAgICAgKi9cclxuICAgICNjbGllbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgI2NsaWVudFR5cGUgPSAnc2hhcmVkV29ya2VyJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd9ICdzc2UnIChmb3IgU2VydmVyLVNlbnQgZXZlbnRzKSAsICdhamF4JyBvciAnd2Vic29ja2V0JyAobm90IGltcGxlbWVudGVkIHlldClcclxuICAgICAqL1xyXG4gICAgI2RyaXZlclR5cGUgPSAnc3NlJztcclxuXHJcbiAgICAjb2JzZXJ2ZXJzUmVnaXN0cnkgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuI2RyaXZlclR5cGUgPSBjb3QuY2ZnLnNlcnZlckV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIGFkZE9ic2VydmVyKG5hbWUsIGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmIChjb3QuY2ZnLnNlcnZlckV2ZW50cyA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5LnNldChuYW1lLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgb25FdmVudDogY2FsbGJhY2tcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuI2NsaWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNpbml0Q2xpZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICNpbml0Q2xpZW50KCkge1xyXG4gICAgICAgIGlmIChjb3QuY2ZnLnNlcnZlckV2ZW50cyA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLiNjbGllbnRUeXBlID09PSAnc2hhcmVkV29ya2VyJyAmJiAodHlwZW9mIFNoYXJlZFdvcmtlciAhPT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBTZXJ2ZXJFdmVudHNTaGFyZWRXb3JrZXJDbGllbnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNjbGllbnQgPSBuZXcgU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50KHRoaXMuI2RyaXZlclR5cGUsIHRoaXMubW9kZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRpbmcgU2VydmVyRXZlbnRzQ2xpZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jY2xpZW50ID0gbmV3IFNlcnZlckV2ZW50c0NsaWVudCh0aGlzLiNkcml2ZXJUeXBlLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jY2xpZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2V2ZW50JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuI29uRXZlbnRUcmlnZ2VyZWQoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAjb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXZlbnQgPT09IGV2ZW50RGF0YS5ldmVudFxyXG4gICAgICAgICAgICAgICAgJiYgdHlwZW9mIG9ic2VydmVyLm9uRXZlbnQgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vbkV2ZW50KGV2ZW50RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBUb2FzdFxyXG4gKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzUuMy9jb21wb25lbnRzL3RvYXN0cy9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb2FzdCB7XHJcbiAgICBzdGF0aWMgY29udGFpbmVyQ2xhc3MgPSAndG9hc3QtY29udGFpbmVyIHBvc2l0aW9uLWZpeGVkIGJvdHRvbS0wIGVuZC0wIHAtMyc7XHJcblxyXG4gICAgdGl0bGUgPSAnJztcclxuICAgIG1lc3NhZ2UgPSAnJztcclxuICAgIGhpbnQgPSAnJztcclxuICAgIHR5cGUgPSAnJztcclxuICAgIGRlbGF5ID0gNTAwMDtcclxuXHJcbiAgICAjY29udGFpbmVyID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCB0aXRsZSA9ICcnLCBoaW50ID0gJycsIHR5cGUgPSAnJykge1xyXG4gICAgICAgIGlmICh3aW5kb3cuYm9vdHN0cmFwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQm9vdHN0cmFwIGlzIG5vdCBmb3VuZC4gSXQgaXMgcmVxdWlyZWQgZm9yIHVzZSBcIlRvYXN0XCIgY29tcG9uZW50Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuaGludCA9IGhpbnQ7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNjb250YWluZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdC1jb250YWluZXInKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gdGhpcy4jY3JlYXRlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdG9hc3RUaXRsZSA9IGA8c3Ryb25nIGNsYXNzPVwibWUtYXV0b1wiPiR7dGhpcy50aXRsZX08L3N0cm9uZz5gO1xyXG4gICAgICAgIGNvbnN0IHRvYXN0SGludCA9IHRoaXMuaGludCAhPT0gJycgPyBgPHNtYWxsPiR7dGhpcy5oaW50fTwvc21hbGw+YCA6ICcnO1xyXG4gICAgICAgIGNvbnN0IGJhY2tHcm91bmQgPSB0aGlzLnR5cGUgIT09ICcnID8gYCB0ZXh0LWJnLSR7dGhpcy50eXBlfWAgOiAnJztcclxuXHJcbiAgICAgICAgY29uc3QgdG9hc3RIVE1MID0gYDxkaXYgY2xhc3M9XCJ0b2FzdCR7YmFja0dyb3VuZH1cIiByb2xlPVwiYWxlcnRcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiBgXHJcbiAgICAgICAgICAgICAgICArIGBkYXRhLWJzLWRlbGF5PVwiJHt0aGlzLmRlbGF5fVwiPmBcclxuICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInRvYXN0LWhlYWRlclwiPidcclxuICAgICAgICAgICAgICArIGAke3RvYXN0VGl0bGV9JHt0b2FzdEhpbnR9YFxyXG4gICAgICAgICAgICAgICsgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwidG9hc3RcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj4nXHJcbiAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgKyBgPGRpdiBjbGFzcz1cInRvYXN0LWJvZHlcIj4ke3RoaXMubWVzc2FnZX08L2Rpdj5gXHJcbiAgICAgICAgICArICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0b2FzdFdyYXBwZXIuaW5uZXJIVE1MID0gdG9hc3RIVE1MO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdEVsZW1lbnQgPSB0b2FzdFdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgdG9hc3QgdG8gdGhlIGNvbnRhaW5lclxyXG4gICAgICAgIHRoaXMuI2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2FzdEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSB0b2FzdFxyXG4gICAgICAgIGNvbnN0IHRvYXN0ID0gbmV3IHdpbmRvdy5ib290c3RyYXAuVG9hc3QodG9hc3RFbGVtZW50KTtcclxuICAgICAgICB0b2FzdC5zaG93KCk7XHJcblxyXG4gICAgICAgIC8vIE9wdGlvbmFsbHkgcmVtb3ZlIHRoZSB0b2FzdCBmcm9tIHRoZSBET00gYWZ0ZXIgaXQgaGlkZXNcclxuICAgICAgICB0aGlzLiNjb250YWluZXIubGFzdEVsZW1lbnRDaGlsZC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMudG9hc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRvYXN0RWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuI2NvbnRhaW5lci5pbm5lckhUTUwgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250YWluZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgI2NyZWF0ZUNvbnRhaW5lcigpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICByZXN1bHQuaWQgPSAndG9hc3QtY29udGFpbmVyJztcclxuICAgICAgICByZXN1bHQuY2xhc3NOYW1lID0gVG9hc3QuY29udGFpbmVyQ2xhc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQocmVzdWx0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIE1vZGFsXHJcbiAqIFNob3cgTW9kYWwgcHJvZ3JhbW1hdGljYWxseVxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKlxyXG4gKiBAbGluayBodHRwczovL2dldGJvb3RzdHJhcC5jb20vZG9jcy81LjMvY29tcG9uZW50cy9tb2RhbC9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb2RhbCB7XHJcbiAgICB0aXRsZSA9ICcnO1xyXG4gICAgY29udGVudCA9ICcnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUgeyh7bGFiZWw6IFN0cmluZywgb25DbGljazogZnVuY3Rpb24sIGNsb3NlT25DbGljazogYm9vbCwgdHlwZTogc3RyaW5nfXxzdHJpbmcpW118bnVsbH1cclxuICAgICAqL1xyXG4gICAgYnV0dG9ucyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJ0aWNhbGx5IGNlbnRlcmVkXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgY2VudGVyZWQgPSBmYWxzZTtcclxuXHJcbiAgICBkaWFsb2dDbGFzcyA9ICdtb2RhbC1kaWFsb2cnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge0VsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgICNlbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7KHtcclxuICAgICAqICAgIGxhYmVsOiBTdHJpbmcsXHJcbiAgICAgKiAgICBvbkNsaWNrOiBmdW5jdGlvbnx1bmRlZmluZWQsXHJcbiAgICAgKiAgICBjbG9zZU9uQ2xpY2s6IGJvb2x8dW5kZWZpbmVkLFxyXG4gICAgICogICAgdHlwZTogc3RyaW5nfHVuZGVmaW5lZCxcclxuICAgICAqICAgIGJ0blR5cGU6IHN0cmluZ3x1bmRlZmluZWRcclxuICAgICAqICB9fHN0cmluZylbXXxudWxsfSBidXR0b25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQsIHRpdGxlID0gJycsIGJ1dHRvbnMgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5ib290c3RyYXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCb290c3RyYXAgaXMgbm90IGZvdW5kLiBJdCBpcyByZXF1aXJlZCBmb3IgdXNlIFwiTW9kYWxcIiBjb21wb25lbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5idXR0b25zID0gYnV0dG9ucztcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGxldCBkaWFsb2dDbGFzcyA9IHRoaXMuZGlhbG9nQ2xhc3M7XHJcbiAgICAgICAgaWYgKHRoaXMuY2VudGVyZWQpIHtcclxuICAgICAgICAgICAgZGlhbG9nQ2xhc3MgKz0gJyBtb2RhbC1kaWFsb2ctY2VudGVyZWQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxIVE1MID0gJzxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQ9XCJDb3RvbnRpRHluYW1pY01vZGFsXCIgdGFiaW5kZXg9XCItMVwiICdcclxuICAgICAgICAgICAgICAgICsgJ2FyaWEtbGFiZWxsZWRieT1cIkNvdG9udGlEeW5hbWljTW9kYWxMYWJlbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPidcclxuICAgICAgICAgICsgYDxkaXYgY2xhc3M9XCIke2RpYWxvZ0NsYXNzfVwiPmBcclxuICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj4nXHJcbiAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPidcclxuICAgICAgICAgICAgICAgICsgYDxoNSBjbGFzcz1cIm1vZGFsLXRpdGxlXCIgaWQ9XCJDb3RvbnRpRHluYW1pY01vZGFsTGFiZWxcIj4ke3RoaXMudGl0bGV9PC9oNT5gXHJcbiAgICAgICAgICAgICAgICArICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+J1xyXG4gICAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgICArIGA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPiR7dGhpcy5jb250ZW50fTwvZGl2PmBcclxuICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PC9kaXY+J1xyXG4gICAgICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgKyAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWxXcmFwcGVyLmlubmVySFRNTCA9IG1vZGFsSFRNTDtcclxuICAgICAgICB0aGlzLiNlbGVtZW50ID0gbW9kYWxXcmFwcGVyLmZpcnN0RWxlbWVudENoaWxkO1xyXG5cclxuICAgICAgICB0aGlzLiNhZGRCdXR0b25zKCk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgbW9kYWwgdG8gdGhlIGJvZHlcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuI2VsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGFuZCBzaG93IHRoZSBtb2RhbFxyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IGJvb3RzdHJhcC5Nb2RhbCh0aGlzLiNlbGVtZW50KTtcclxuICAgICAgICBtb2RhbC5zaG93KCk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbW9kYWwgZnJvbSB0aGUgRE9NIGFmdGVyIGl0IGlzIGhpZGRlblxyXG4gICAgICAgIHRoaXMuI2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaGlkZGVuLmJzLm1vZGFsJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLiNlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICNhZGRCdXR0b25zKCkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLiNidWlsZEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgaWYgKGJ1dHRvbnMgPT09ICcnIHx8IGJ1dHRvbnMgPT09IFtdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuI2VsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWZvb3RlcicpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGJ1dHRvbnMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBidXR0b25zO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidXR0b25zKSkge1xyXG4gICAgICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidXR0b24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCArPSBidXR0b247XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICNidWlsZEJ1dHRvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XHJcbiAgICAgICAgbGV0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnM7XHJcbiAgICAgICAgaWYgKGJ1dHRvbnMgPT09IFtdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYnV0dG9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidXR0b25zKSkge1xyXG4gICAgICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbkRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYnV0dG9uRGF0YSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChidXR0b25EYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5sYWJlbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGJ1dHRvbkRhdGEubGFiZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsIGJ1dHRvbkRhdGEuYnRuVHlwZSAhPT0gdW5kZWZpbmVkID8gYnV0dG9uRGF0YS5idG5UeXBlIDogJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLnR5cGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tJyArIGJ1dHRvbkRhdGEudHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkRhdGEuY2xvc2VPbkNsaWNrICE9PSB1bmRlZmluZWQgJiYgYnV0dG9uRGF0YS5jbG9zZU9uQ2xpY2sgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWJzLWRpc21pc3MnLCAnbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5vbkNsaWNrICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGJ1dHRvbkRhdGEub25DbGljayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge3JldHVybiBidXR0b25EYXRhLm9uQ2xpY2soZXZlbnQpfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYnV0dG9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c30gZnJvbSAnLi9zZXJ2ZXJFdmVudHMvU2VydmVyRXZlbnRzLmpzJztcclxuaW1wb3J0IHtUb2FzdH0gZnJvbSBcIi4vVG9hc3RcIjtcclxuaW1wb3J0IHtNb2RhbH0gZnJvbSBcIi4vTW9kYWxcIjtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIENvdG9udGkgY2xhc3NcclxuICovXHJcbmNsYXNzIENvdG9udGlBcHBsaWNhdGlvblxyXG57XHJcbiAgICBjZmcgPSB7fTtcclxuICAgIEwgPSB7fTtcclxuXHJcbiAgICAjc2V2ZXJFdmVudHMgPSBudWxsO1xyXG5cclxuICAgIGluaXQoZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmNvbmZpZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2ZnID0gZGF0YS5jb25maWc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5sYW5nICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5MID0gZGF0YS5sYW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jaW5pdFNlbGVjdDIoKTtcclxuICAgIH1cclxuXHJcbiAgICAjaW5pdFNlbGVjdDIoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cualF1ZXJ5ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygd2luZG93LmpRdWVyeS5mbi5zZWxlY3QyID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdDInKTtcclxuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuZGF0YXNldC5pbml0ZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoZWxlbWVudCkuc2VsZWN0MigpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQuaW5pdGVkID0gJ3RydWUnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IFNlcnZlciBFdmVudHMgb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7U2VydmVyRXZlbnRzfVxyXG4gICAgICovXHJcbiAgICBnZXRTZXJ2ZXJFdmVudHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI3NldmVyRXZlbnRzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldmVyRXZlbnRzID0gbmV3IFNlcnZlckV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy4jc2V2ZXJFdmVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IENvbmZpcm0gZGlhbG9nIG1vZGFsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9rTGFiZWxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjYW5jZWxMYWJlbFxyXG4gICAgICogQHRvZG8gdHJhbnNsYXRlZCBkZWZhdWx0IGxhYmVsc1xyXG4gICAgICovXHJcbiAgICBjb25maXJtKHRpdGxlLCBjb250ZW50LCBjYWxsYmFjaywgb2tMYWJlbCA9ICdPaycsIGNhbmNlbExhYmVsID0gJ0NhbmNlbCcpIHtcclxuICAgICAgICB0aGlzLm1vZGFsKHRpdGxlLCBjb250ZW50LCBbXHJcbiAgICAgICAgICAgIHtsYWJlbDogb2tMYWJlbCwgb25DbGljazogKGV2ZW50KSA9PiB7cmV0dXJuIGNhbGxiYWNrKGV2ZW50KX0sIHR5cGU6ICdwcmltYXJ5JywgY2xvc2VPbkNsaWNrOiB0cnVlfSxcclxuICAgICAgICAgICAge2xhYmVsOiBjYW5jZWxMYWJlbCwgY2xvc2VPbkNsaWNrOiB0cnVlLCB0eXBlOiAnc2Vjb25kYXJ5J31cclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgTW9kYWwgaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7KHtcclxuICAgICAqICAgIGxhYmVsOiBTdHJpbmcsXHJcbiAgICAgKiAgICBvbkNsaWNrOiBmdW5jdGlvbnx1bmRlZmluZWQsXHJcbiAgICAgKiAgICBjbG9zZU9uQ2xpY2s6IGJvb2x8dW5kZWZpbmVkLFxyXG4gICAgICogICAgdHlwZTogc3RyaW5nfHVuZGVmaW5lZCxcclxuICAgICAqICAgIGJ0blR5cGU6IHN0cmluZ3x1bmRlZmluZWRcclxuICAgICAqICB9fHN0cmluZylbXXxudWxsfSBidXR0b25zXHJcbiAgICAgKiAgQHJldHVybnMgTW9kYWxcclxuICAgICAqL1xyXG4gICAgZ2V0TW9kYWwoY29udGVudCwgdGl0bGUgPSAnJywgYnV0dG9ucz0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTW9kYWwoY29udGVudCwgdGl0bGUsIGJ1dHRvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBNb2RhbCBwcm9ncmFtbWF0aWNhbGx5XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0geyh7XHJcbiAgICAgKiAgICBsYWJlbDogU3RyaW5nLFxyXG4gICAgICogICAgb25DbGljazogZnVuY3Rpb258dW5kZWZpbmVkLFxyXG4gICAgICogICAgY2xvc2VPbkNsaWNrOiBib29sfHVuZGVmaW5lZCxcclxuICAgICAqICAgIHR5cGU6IHN0cmluZ3x1bmRlZmluZWQsXHJcbiAgICAgKiAgICBidG5UeXBlOiBzdHJpbmd8dW5kZWZpbmVkXHJcbiAgICAgKiAgfXxzdHJpbmcpW118bnVsbH0gYnV0dG9uc1xyXG4gICAgICogIEByZXR1cm5zIE1vZGFsXHJcbiAgICAgKi9cclxuICAgIG1vZGFsKGNvbnRlbnQsIHRpdGxlID0gJycsIGJ1dHRvbnM9IG51bGwpIHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXMuZ2V0TW9kYWwoY29udGVudCwgdGl0bGUsIGJ1dHRvbnMpO1xyXG4gICAgICAgIG1vZGFsLnNob3coKTtcclxuICAgICAgICByZXR1cm4gbW9kYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaGludFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcclxuICAgICAqIEByZXR1cm5zIFRvYXN0XHJcbiAgICAgKi9cclxuICAgIGdldFRvYXN0KG1lc3NhZ2UsIHRpdGxlID0gJycsIGhpbnQgPSAnJywgdHlwZSA9ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUb2FzdChtZXNzYWdlLCB0aXRsZSwgaGludCwgdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaGludFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheVxyXG4gICAgICovXHJcbiAgICB0b2FzdChtZXNzYWdlLCB0aXRsZSA9ICcnLCBoaW50ID0gJycsIHR5cGUgPSAnJywgZGVsYXkgPSA1MDAwKSB7XHJcbiAgICAgICAgY29uc3QgdG9hc3QgPSB0aGlzLmdldFRvYXN0KG1lc3NhZ2UsIHRpdGxlLCBoaW50LCB0eXBlKTtcclxuXHJcbiAgICAgICAgaWYgKGRlbGF5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRvYXN0LmRlbGF5ID0gZGVsYXlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvYXN0LnNob3coKTtcclxuICAgICAgICByZXR1cm4gdG9hc3Q7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBkYXRhIGZyb20gL2luZGV4LnBocD9uPW1haW4mYT1nZXRcclxuICAgICAqIENhbiBiZSB1c2VmdWwsIGZvciBleGFtcGxlIHdoZW4gaXQgaXMgbmVlZGVkIHRvIGxvYWQgc29tZSBkeW5hbWljIGNvbnRlbnQgdG8gY2FjaGVkIHBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBFeGFtcGxlOlxyXG4gICAgICogY290LmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAqICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgKiB9KTtcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2hhdCBBcnJheSBvciBzdHJpbmcuIERhdGEgdG8gbG9hZC4gRm9yIGV4YW1wbGUsIFsnY2FwdGNoYScsICd4J10gKHggLSBhbnRpIFhTUyBwYXJhbWV0ZXIgdmFsdWUpXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7fT59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWREYXRhKHdoYXQpIHtcclxuICAgICAgICBpZiAoIXdoYXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkRGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhdGFUb0xvYWQgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aGF0ID09PSAnc3RyaW5nJyB8fCB3aGF0IGluc3RhbmNlb2YgU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHdoYXQgPSBbd2hhdF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHdoYXQpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhVG9Mb2FkLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhVG9Mb2FkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gQHRvZG8gY2hhbmdlIHRvIHN5c3RlbSBjb250cm9sbGVyIHdoZW4gaXQgd2lsbCBiZSBpbXBsZW1lbnRlZFxyXG4gICAgICAgICAgICBsZXQgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7bjogJ21haW4nLCBhOiAnZ2V0J30pO1xyXG5cclxuICAgICAgICAgICAgZGF0YVRvTG9hZC5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2RhdGFbJyArIGluZGV4ICsgJ10nLCBpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ19hamF4JywgMSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaW5kZXgucGhwPycgKyBwYXJhbXMudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhW2tleV0gPSByZXNwb25zZURhdGEuZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSFRUUCBlcnJvclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBlcnJvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICgoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaXRlbV0gPSB0aGlzLmxvYWRlZERhdGFbaXRlbV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGNhcHRjaGEgdmlhIGFqYXguIFVzZWQgb24gY2FjaGVkIHBhZ2VzLlxyXG4gICAgICovXHJcbiAgICBsb2FkQ2FwdGNoYSgpIHtcclxuICAgICAgICB0aGlzLmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgbGV0IGNhcHRjaGFFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXB0Y2hhLXBsYWNlLWhvbGRlcicpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIGNhcHRjaGFFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSByZXN1bHQuY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYXB0Y2hhLXBsYWNlLWhvbGRlcicsICdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NhcHRjaGEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gZWxlbWVudC5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFggPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZT1cInhcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRYICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0WC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmVzdWx0LngpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgeW91IGFwcGVuZCA8c2NyaXB0PiB0YWdzIHRvIHRoZSBlbGVtZW50cyBvZiB0aGUgZmluaXNoZWQgRE9NIGRvY3VtZW50LCB0aGV5IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKiBUaGUgbWV0aG9kIGV4ZWN1dGVzIDxzY3JpcHQ+IHNjcmlwdHMgbmVzdGVkIGluIHRoZSBzcGVjaWZpZWQgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsZW1lbnQgTm9kZVxyXG4gICAgICovXHJcbiAgICBleGVjdXRlU2NyaXB0RWxlbWVudHMoY29udGFpbmVyRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnRzID0gY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKTtcclxuXHJcbiAgICAgICAgQXJyYXkuZnJvbShzY3JpcHRFbGVtZW50cykuZm9yRWFjaCgoc2NyaXB0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjbG9uZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudC5hdHRyaWJ1dGVzKS5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsb25lZEVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC50ZXh0ID0gc2NyaXB0RWxlbWVudC50ZXh0O1xyXG4gICAgICAgICAgICBzY3JpcHRFbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lZEVsZW1lbnQsIHNjcmlwdEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuY290ID0gbmV3IENvdG9udGlBcHBsaWNhdGlvbigpO1xyXG4iLCJmdW5jdGlvbiBlbmNvZGVVUklmaXgoc3RyKSB7XHJcblx0Ly8gdG8gcHJldmVudCB0d2ljZSBlbmNvZGluZ1xyXG5cdC8vIGFuZCBmaXggJ1snLCddJyBzaWducyB0byBmb2xsb3cgUkZDMzk4NiAoc2VjdGlvbi0zLjIuMilcclxuXHRyZXR1cm4gZW5jb2RlVVJJKGRlY29kZVVSSShzdHIpKS5yZXBsYWNlKC8lNUIvZywgJ1snKS5yZXBsYWNlKC8lNUQvZywgJ10nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QmFzZUhyZWYoKSB7XHJcblx0dmFyIGhyZWYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdLmhyZWY7XHJcblx0aWYgKGhyZWYgPT0gbnVsbCkge1xyXG5cdFx0cmV0dXJuICcvJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIGhyZWY7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1cChjb2RlLCB3LCBoKXtcclxuICAgIHdpbmRvdy5vcGVuKGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP289JyArIGNvZGUsICcnLCAndG9vbGJhcj0wLGxvY2F0aW9uPTAsZGlyZWN0b3JpZXM9MCxtZW51QmFyPTAscmVzaXphYmxlPTAsc2Nyb2xsYmFycz15ZXMsd2lkdGg9JyArIHcgKyAnLGhlaWdodD0nICsgaCArICcsbGVmdD0zMix0b3A9MTYnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0b2RvIG1vdmUgdG8gcGZzIG1vZHVsZVxyXG4gKi9cclxuZnVuY3Rpb24gcGZzKGlkLCBjMSwgYzIsIHBhcnNlcil7XHJcbiAgICB3aW5kb3cub3BlbihcclxuXHRcdGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP2U9cGZzJnVzZXJpZD0nICsgaWQgKyAnJmMxPScgKyBjMSArICcmYzI9JyArIGMyICsgJyZwYXJzZXI9JyArIHBhcnNlcixcclxuXHRcdCdQRlMnLFxyXG5cdFx0J3N0YXR1cz0xLCB0b29sYmFyPTAsbG9jYXRpb249MCxkaXJlY3Rvcmllcz0wLG1lbnVCYXI9MCxyZXNpemFibGU9MSxzY3JvbGxiYXJzPXllcyx3aWR0aD03NTQsaGVpZ2h0PTUxMixsZWZ0PTMyLHRvcD0xNidcclxuXHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWRpcmVjdCh1cmwpe1xyXG4gICAgbG9jYXRpb24uaHJlZiA9IHVybC5vcHRpb25zW3VybC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlYmxvY2soaWQpe1xyXG4gICAgdmFyIGJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKGJsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUFsbChhY3Rpb24pIHtcclxuXHR2YXIgYmxrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZF49XCJibGtfXCJdJyk7XHJcblx0Zm9yIChpID0gMDsgaSA8IGJsa3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmIChhY3Rpb24gPT0gJ2hpZGUnKSB7XHJcblx0XHRcdGJsa3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdH0gZWxzZSBpZiAoYWN0aW9uID09ICdzaG93Jykge1xyXG5cdFx0XHRibGtzW2ldLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93LWdyb3VwJztcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyBJbnNlcnRzIHRleHQgaW50byB0ZXh0YXJlYSBhdCBjdXJzb3IgcG9zaXRpb25cclxuZnVuY3Rpb24gaW5zZXJ0VGV4dChkb2NPYmosIGZpZWxkTmFtZSwgdmFsdWUpIHtcclxuXHR2YXIgZmllbGQgPSBudWxsO1xyXG5cdGlmICghZG9jT2JqKSB7XHJcblx0XHRkb2NPYmogPSBkb2N1bWVudDtcclxuXHR9XHJcblx0Ly8gRmluZCB0aGUgZmllbGQgaW4gdGhlIGRvY09ialxyXG5cdGZpbmRGaWVsZDpcclxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRvY09iai5mb3Jtcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb2NPYmouZm9ybXNbaV0uZWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0aWYgKGRvY09iai5mb3Jtc1tpXS5lbGVtZW50c1tqXS5uYW1lID09IGZpZWxkTmFtZSkge1xyXG5cdFx0XHRcdGZpZWxkID0gZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzW2pdO1xyXG5cdFx0XHRcdGJyZWFrIGZpbmRGaWVsZDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoIWZpZWxkKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBJbnNlcnQgdGhlIHRleHRcclxuXHRpZiAoZG9jT2JqLnNlbGVjdGlvbikge1xyXG5cdFx0Ly8gTVNJRSBhbmQgT3BlcmFcclxuXHRcdGZpZWxkLmZvY3VzKCk7XHJcblx0XHR2YXIgc2VsID0gZG9jT2JqLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xyXG5cdFx0c2VsLnRleHQgPSB2YWx1ZTtcclxuXHR9IGVsc2UgaWYgKGZpZWxkLnNlbGVjdGlvblN0YXJ0IHx8IGZpZWxkLnNlbGVjdGlvblN0YXJ0ID09IDApIHtcclxuXHRcdC8vIE1vemlsbGFcclxuXHRcdHZhciBzdGFydFBvcyA9IGZpZWxkLnNlbGVjdGlvblN0YXJ0O1xyXG5cdFx0dmFyIGVuZFBvcyA9IGZpZWxkLnNlbGVjdGlvbkVuZDtcclxuXHRcdGZpZWxkLnZhbHVlID0gZmllbGQudmFsdWUuc3Vic3RyaW5nKDAsIHN0YXJ0UG9zKSArIHZhbHVlICsgZmllbGQudmFsdWUuc3Vic3RyaW5nKGVuZFBvcywgZmllbGQudmFsdWUubGVuZ3RoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZmllbGQudmFsdWUgKz0gdmFsdWU7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBBcnJheSBvZiBhamF4IGVycm9yIGhhbmRsZXJzXHJcbi8vIEV4YW1wbGUgb2YgdXNlOlxyXG4vLyBhamF4RXJyb3JIYW5kbGVycy5wdXNoKHtmdW5jOiBteUVycm9ySGFuZGxlcn0pO1xyXG4vLyBhamF4U3VjY2Vzc0hhbmRsZXJzLnB1c2goe2Z1bmM6IG15U3VjY2Vzc0hhbmRsZXJ9KTtcclxudmFyIGFqYXhFcnJvckhhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbnZhciBhamF4U3VjY2Vzc0hhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbi8vIEFKQVggZW5hYmxlbWVudCBkZWZhdWx0cyB0byBmYWxzZVxyXG52YXIgYWpheEVuYWJsZWQgPSBmYWxzZTtcclxuLy8gUmVxdWlyZWQgdG8gY2FsY3VsYXRlIHBhdGhzXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcblx0dmFyIGFqYXhDdXJyZW50QmFzZSA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgkKCdiYXNlJykuZXEoMCkuYXR0cignaHJlZicpLCAnJykucmVwbGFjZSgvXFw/LiokLywgJycpLnJlcGxhY2UoLyMuKiQvLCAnJyk7XHJcbn1cclxuLy8gVGhpcyBmbGFnIGluZGljYXRlcyB0aGF0IEFKQVgraGlzdG9yeSBoYXMgYmVlbiB1c2VkIG9uIHRoaXMgcGFnZVxyXG4vLyBJdCBtZWFucyB0aGF0IFwiI1wiIG9yIGhvbWUgbGluayBzaG91bGQgYmUgbG9hZGVkIHZpYSBhamF4IHRvb1xyXG52YXIgYWpheFVzZWQgPSBmYWxzZTtcclxuLy8gR2xvYmFsIGZsYWcgdG8gbGV0IGV2ZXJ5Ym9keSBrbm93IHRoYXQgQUpBWCBoYXMgZmFpbGVkXHJcbnZhciBhamF4RXJyb3IgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBBSkFYIGhlbHBlciBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge2hhc2h9IHNldHRpbmdzIEEgaGFzaHRhYmxlIHdpdGggc2V0dGluZ3NcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhTZW5kKHNldHRpbmdzKSB7XHJcblx0dmFyIG1ldGhvZCA9IHNldHRpbmdzLm1ldGhvZCA/IHNldHRpbmdzLm1ldGhvZC50b1VwcGVyQ2FzZSgpIDogJ0dFVCc7XHJcblx0dmFyIGRhdGEgPSBzZXR0aW5ncy5kYXRhIHx8ICcnO1xyXG5cdHZhciB1cmwgPSBzZXR0aW5ncy51cmwgfHwgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLmF0dHIoJ2FjdGlvbicpO1xyXG5cdGlmIChtZXRob2QgPT09ICdQT1NUJykge1xyXG5cdFx0ZGF0YSArPSAnJicgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fSBlbHNlIGlmIChzZXR0aW5ncy5mb3JtSWQpIHtcclxuXHRcdHZhciBzZXAgPSB1cmwuaW5kZXhPZignPycpID4gMCA/ICcmJyA6ICc/JztcclxuXHRcdHVybCArPSBzZXAgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fVxyXG5cdCQuYWpheCh7XHJcblx0XHR0eXBlOiBtZXRob2QsXHJcblx0XHR1cmw6IGVuY29kZVVSSWZpeCh1cmwpLFxyXG5cdFx0ZGF0YTogZGF0YSxcclxuXHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZClcclxuXHRcdFx0XHRcdC5hcHBlbmQoJzxzcGFuIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6JyArICgkKCcjJyArIHNldHRpbmdzLmRpdklkKS53aWR0aCgpLzIgLSAxMTApICsgJ3B4O3RvcDonICsgKCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhlaWdodCgpLzIgLSA5KSArICdweDtcIiBjbGFzcz1cImxvYWRpbmdcIiBpZD1cImxvYWRpbmdcIj48aW1nIHNyYz1cIi4vaW1hZ2VzL3NwaW5uZXIuZ2lmXCIgYWx0PVwibG9hZGluZ1wiLz48L3NwYW4+JykuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0c3VjY2VzczogZnVuY3Rpb24obXNnKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjbG9hZGluZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2ZhZGVpbikge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhpZGUoKS5odG1sKG1zZykuZmFkZUluKDUwMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaHRtbChtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWpheFN1Y2Nlc3NIYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmKGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYylcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYyhtc2cpO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0obXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGVycm9yOiBmdW5jdGlvbihtc2cpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyNsb2FkaW5nJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93ZmFkZWluKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGlkZSgpLmh0bWwobXNnKS5mYWRlSW4oNTAwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5odG1sKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoYWpheEVycm9ySGFuZGxlcnNbaV0uZnVuYykge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXS5mdW5jKG1zZyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXShtc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhbGVydCgnQUpBWCBlcnJvcjogJyArIG1zZyk7XHJcblx0XHRcdFx0YWpheEVycm9yID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3VicGFnZSBsb2FkZXIgd2l0aCBoaXN0b3J5IHN1cHBvcnRcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggQSBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4UGFnZUxvYWQoaGFzaCkge1xyXG4gICAgaWYgKGhhc2ggIT09ICcnKSB7XHJcblx0XHRoYXNoLnJlcGxhY2UoL14jLywgJycpO1xyXG5cdH1cclxuXHR2YXIgbSA9IGhhc2gubWF0Y2goL15nZXQoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuICAgICAgICB2YXIgdXJsID0gbVsyXS5pbmRleE9mKCc7JykgPiAwID8gbVsyXS5yZXBsYWNlKCc7JywgJz8nKSA6IGFqYXhDdXJyZW50QmFzZSArICc/JyArIGRlY29kZVVSSUNvbXBvbmVudChtWzJdKTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogJ0dFVCcsXHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRkaXZJZDogbVsxXSA/IG1bMV0uc3Vic3RyKDEpIDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAoaGFzaCA9PT0gJycgJiYgYWpheFVzZWQpIHtcclxuXHRcdC8vIGFqYXggaG9tZVxyXG5cdFx0cmV0dXJuIGFqYXhTZW5kICh7XHJcblx0XHRcdHVybDogbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLywgJycpLFxyXG5cdFx0XHRkaXZJZDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3ViZm9ybSBsb2FkZXIgd2l0aG91dCBoaXN0b3J5IHRyYWNraW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEEgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybUlkIFRhcmdldCBmb3JtIGlkIGF0dHJpYnV0ZVxyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheEZvcm1Mb2FkKGhhc2gsIGZvcm1JZCkge1xyXG5cdHZhciBtID0gaGFzaC5tYXRjaCgvXihnZXR8cG9zdCkoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuXHRcdHZhciB1cmwgPSBtWzNdLmluZGV4T2YoJzsnKSA+IDAgPyBtWzNdLnJlcGxhY2UoJzsnLCAnPycpIDogYWpheEN1cnJlbnRCYXNlICsgJz8nICsgbVszXTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogbVsxXS50b1VwcGVyQ2FzZSgpLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0ZGl2SWQ6IG1bMl0gPyBtWzJdLnN1YnN0cigxKSA6ICdhamF4QmxvY2snLFxyXG5cdFx0XHRmb3JtSWQ6IGZvcm1JZFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhamF4YWJsZSBoYXNoIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaHJlZiBMaW5rIGhyZWYgb3IgZm9ybSBhY3Rpb24gYXR0cmlidXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWwgQW4gYXR0cmlidXRlIHZhbHVlIHBvc3NpYmx5IGNvbnRhaW5pbmcgYSBoYXNoIGFkZHJlc3NcclxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1EYXRhIElzIHBhc3NlZCBmb3IgZm9ybXMgb25seSwgaXMgJ3Bvc3QnIGZvciBQT1NUIGZvcm1zXHJcbiAqIG9yIHNlcmlhbGl6ZWQgZm9ybSBkYXRhIGZvciBHRVQgZm9ybXNcclxuICogQHJldHVybiBBIHZhbGlkIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHR5cGUgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4TWFrZUhhc2goaHJlZiwgcmVsLCBmb3JtRGF0YSkge1xyXG5cdHZhciBoYXNoID0gKGZvcm1EYXRhID09ICdwb3N0JykgPyAncG9zdCcgOiAnZ2V0JztcclxuXHR2YXIgaHJlZkJhc2UsIHBhcmFtcztcclxuXHR2YXIgc2VwID0gJz8nO1xyXG5cdHZhciBtID0gcmVsID8gcmVsLm1hdGNoKC8oZ2V0fHBvc3QpKC1bXiA7XSspPyg7XFxTKik/LykgOiBmYWxzZTtcclxuXHRpZiAobSkge1xyXG5cdFx0aGFzaCA9IG1bMV07XHJcblx0XHRpZiAobVsyXSkge1xyXG5cdFx0XHRoYXNoICs9IG1bMl07XHJcblx0XHR9XHJcblx0XHRpZiAobVszXSkge1xyXG5cdFx0XHRocmVmID0gbVszXS5zdWJzdHIoMSk7XHJcblx0XHRcdHNlcCAgPSAnOyc7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gJzsnXHJcblx0aWYgKGhyZWYuaW5kZXhPZihzZXApID4gMCkge1xyXG5cdFx0aHJlZkJhc2UgPSBocmVmLnN1YnN0cigwLCBocmVmLmluZGV4T2Yoc2VwKSk7XHJcblx0XHRwYXJhbXMgPSBocmVmLnN1YnN0cihocmVmLmluZGV4T2Yoc2VwKSArIDEpO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gJyYnICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGhyZWZCYXNlID0gaHJlZjtcclxuXHRcdHBhcmFtcyA9ICcnO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gc2VwICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gaHJlZkJhc2UgPT0gYWpheEN1cnJlbnRCYXNlID8gcGFyYW1zIDogaHJlZkJhc2UgKyAnOycgKyBwYXJhbXM7XHJcblx0cmV0dXJuIGhhc2g7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFuZGFyZCBldmVudCBiaW5kaW5nc1xyXG4gKi9cclxuZnVuY3Rpb24gYmluZEhhbmRsZXJzKCkge1xyXG5cdGlmIChsb2NhdGlvbi5oYXNoID09ICcjY29tbWVudHMnIHx8IGxvY2F0aW9uLmhhc2gubWF0Y2goLyNjXFxkKy8pKSB7XHJcblx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0fVxyXG5cdCQoJy5jb21tZW50c19saW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRpZigkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScpIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0aWYobG9jYXRpb24uaHJlZi5tYXRjaCgvI2NvbW1lbnRzLykpIHtcclxuXHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHR9XHJcblxyXG5cdGlmIChhamF4RW5hYmxlZCkge1xyXG5cdFx0Ly8gQUpBWCBhdXRvLWhhbmRsaW5nXHJcblx0XHQkKCdib2R5Jykub24oJ3N1Ym1pdCcsICdmb3JtLmFqYXgnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuYXR0cignbWV0aG9kJykudG9VcHBlckNhc2UoKSA9PSAnUE9TVCcpIHtcclxuXHRcdFx0XHRhamF4Rm9ybUxvYWQoYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAncG9zdCcpLCAkKHRoaXMpLmF0dHIoJ2lkJykpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAkKHRoaXMpLnNlcmlhbGl6ZSgpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYWpheEVycm9yO1xyXG5cdFx0fSk7XHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EuYWpheCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2hyZWYnKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ3JlbCcpKTtcclxuXHRcdFx0cmV0dXJuIGFqYXhFcnJvcjtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFKQVggYWN0aW9uIGNvbmZpcm1hdGlvbnNcclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYS5jb25maXJtTGluaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdocmVmJykubWF0Y2goL21lc3NhZ2UuKzkyMC9pKSkge1xyXG5cdFx0XHRcdGlmICgkKCcjY29uZmlybUJveCcpKSB7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKCdib2R5JykucHJlcGVuZCgnPGRpdiBpZD1cImNvbmZpcm1Cb3hcIiBjbGFzcz1cImpxbVdpbmRvd1wiPjwvZGl2PicpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtKHthamF4OiQodGhpcykuYXR0cignaHJlZicpLG1vZGFsOnRydWUsb25Mb2FkOmZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmNzcygnbWFyZ2luLWxlZnQnLCAnLScrKCQoJyNjb25maXJtQm94Jykud2lkdGgoKS8yKSsncHgnKTtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykuY3NzKCdtYXJnaW4tdG9wJywgJy0nKygkKCcjY29uZmlybUJveCcpLmhlaWdodCgpLzIpKydweCcpO1xyXG5cdFx0XHRcdH19KTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbVNob3coKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIExpc3RlbiB0byBoYXNoIGNoYW5nZSBldmVudHNcclxuXHRcdCQod2luZG93KS5vbignaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhI2NvbmZpcm1ObycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJChcIiNjb25maXJtQm94XCIpLmlzKFwiLmpxbVdpbmRvd1wiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtSGlkZSgpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykucmVtb3ZlKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBJZiBwYWdlIHdhcyBsb2FkZWQgd2l0aCBoYXNoXHJcbiAgICAgICAgaWYgKGFqYXhFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiaW5kSGFuZGxlcnMoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG53aW5kb3cubmFtZSA9ICdtYWluJzsiXX0=
