/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
(()=>{"use strict";class t{eventsUrl=null;#t=null;onEvent=null;constructor(t,e=null){this.eventsUrl=t,null!==e&&(this.mode=e),this.init()}init(){null===this.#t&&("production"!==this.mode&&console.log("init ServerSentEventsClient"),this.#t=new EventSource(this.eventsUrl),"production"!==this.mode&&(this.#t.onopen=function(t){console.log("ServerSentEventsClient connection is open")}),this.#t.onmessage=t=>{const e=JSON.parse(t.data);void 0!==e.data&&"string"==typeof e.data&&""!==e.data&&(e.data=JSON.parse(e.data)),e.id=t.lastEventId,this.#e(e)},"production"!==this.mode&&(this.#t.onerror=function(t){console.log("ServerSentEventsClient connection error")}))}#e(t){"production"!==this.mode&&console.log("ServerSentEventsClient: Server triggered event",t),"function"!=typeof this.onEvent&&console.error(this.constructor.name+".onEvent is not defined"),this.onEvent(t)}}class e{eventsUrl=null;#n=null;onEvent=null;mode="production";constructor(t,e=null){this.eventsUrl=t,null!==e&&(this.mode=e),this.init()}init(){null===this.#n&&("production"!==this.mode&&console.log("init ServerSentEvents driver"),this.#n=new t(this.eventsUrl,this.mode),this.#n.onEvent=t=>{this.onEventTriggered(t)})}onEventTriggered(t){"function"!=typeof this.onEvent&&console.error(this.constructor.name+".onEvent is not defined"),this.onEvent(t)}}class n extends e{init(){"production"!==this.mode&&console.log("init ServerSentEventsSharedWorker driver");try{const t=new SharedWorker("/js/sharedWorkerSSE.min.js").port;t.postMessage({config:{url:this.eventsUrl,mode:this.mode}}),t.onmessage=t=>{"production"!==this.mode&&console.log("ServerSentEventsSharedWorker event",t.data),this.onEventTriggered(t.data)}}catch(t){console.error(t)}}}class o{#o=null;#s=null;mode="production";constructor(){this.#s=new Map}addObserver(t,e,n){this.#s.set(t,{name:t,event:e,onEvent:n}),null===this.#o&&this.#i()}#i(){const t=getBaseHref()+"index.php?n=server-events";void 0!==typeof SharedWorker?("production"!==this.mode&&console.log("creating ServerSentEventsSharedWorker driver"),this.#o=new n(t,this.mode)):("production"!==this.mode&&console.log("creating ServerSentEvents driver"),this.#o=new e(t,this.mode)),this.#o.onEvent=t=>{this.#r(t)},this.#o.mode=this.mode}#r(t){"production"!==this.mode&&console.log("Server triggered event",t),this.#s.forEach((e=>{e.event===t.event&&"function"==typeof e.onEvent&&e.onEvent(t.data)}))}}class s{static containerClass="toast-container position-fixed bottom-0 end-0 p-3";title="";message="";hint="";type="";delay=5e3;#a=null;constructor(t,e,n="",o=""){void 0!==window.bootstrap?(this.title=t,this.message=e,this.hint=n,this.type=o):console.error('Bootstrap is not found. It is required for use "Toast" component')}show(){if(null===this.#a){let t=document.getElementById("toast-container");null===t&&(t=this.#l()),this.#a=t}const t=""!==this.title?`<strong class="me-auto">${this.title}</strong>`:"",e=""!==this.hint?`<small>${this.hint}</small>`:"",n=`<div class="toast${""!==this.type?` text-bg-${this.type}`:""}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="${this.delay}"><div class="toast-header">${t}${e}<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div><div class="toast-body">${this.message}</div></div>`,o=document.createElement("div");o.innerHTML=n;const s=o.firstElementChild;this.#a.appendChild(s),new window.bootstrap.Toast(s).show(),this.#a.lastElementChild.addEventListener("hidden.bs.toast",(()=>{s.remove(),""===this.#a.innerHTML&&(this.#a.remove(),this.#a=null)}))}#l(){const t=document.createElement("div");return t.id="toast-container",t.className=s.containerClass,document.body.append(t),t}}class i{title="";content="";buttons=null;centered=!1;dialogClass="modal-dialog";#d=null;constructor(t,e,n){void 0!==window.bootstrap?(this.title=t,this.content=e,this.buttons=n):console.error('Bootstrap is not found. It is required for use "Modal" component')}show(){let t=this.dialogClass;this.centered&&(t+=" modal-dialog-centered");const e=`<div class="modal fade" id="CotontiDynamicModal" tabindex="-1" aria-labelledby="CotontiDynamicModalLabel" aria-hidden="true"><div class="${t}"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="CotontiDynamicModalLabel">${this.title}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">${this.content}</div><div class="modal-footer"></div></div></div></div>`,n=document.createElement("div");n.innerHTML=e,this.#d=n.firstElementChild,this.#c(),document.body.appendChild(this.#d),new bootstrap.Modal(this.#d).show(),this.#d.addEventListener("hidden.bs.modal",(()=>{this.#d.remove()}))}#c(){const t=this.#h();if(""===t||t===[])return;const e=this.#d.querySelector(".modal-footer");"string"!=typeof t?Array.isArray(t)&&t.forEach((t=>{"string"!=typeof t?e.appendChild(t):e.innerHTML+=t})):e.innerHTML=t}#h(){const t=[];let e=this.buttons;return e===[]?t:null===e?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':"string"==typeof e?e:(Array.isArray(e)&&e.forEach((e=>{if("string"==typeof e)return void t.push(e);const n=document.createElement("button");void 0!==e.label&&(n.innerHTML=e.label),n.setAttribute("type",void 0!==e.btnType?e.btnType:"button"),n.classList.add("btn"),void 0!==e.type&&n.classList.add("btn-"+e.type),void 0!==e.closeOnClick&&!0===e.closeOnClick&&n.setAttribute("data-bs-dismiss","modal"),void 0!==e.onClick&&"function"==typeof e.onClick&&n.addEventListener("click",(t=>e.onClick(t))),t.push(n)})),t)}}window.cot=new class{#v=null;getServerEvents(){return null===this.#v&&(this.#v=new o),this.#v}confirm(t,e,n,o="Ok",s="Cancel"){this.modal(t,e,[{label:o,onClick:t=>n(t),type:"primary",closeOnClick:!0},{label:s,closeOnClick:!0,type:"secondary"}])}getModal(t,e,n=null){return new i(t,e,n)}modal(t,e,n=null){const o=this.getModal(t,e,n);return o.show(),o}getToast(t,e,n="",o=""){return new s(t,e,n,o)}toast(t,e,n="",o="",s=5e3){const i=this.getToast(t,e,n,o);return null!==s&&(i.delay=s),i.show(),i}async loadData(t){if(!t)return{};void 0===this.loadedData&&(this.loadedData={});let e=[];("string"==typeof t||t instanceof String)&&(t=[t]);for(let n of t)n in this.loadedData||e.push(n);if(e.length>0){let t=new URLSearchParams({n:"main",a:"get"});e.forEach(((e,n,o)=>{t.append("data["+n+"]",e)})),t.append("_ajax",1);try{let e=await fetch("index.php?"+t.toString());if(e.ok){const t=await e.json();if(t.success)for(const e in t.data)this.loadedData[e]=t.data[e]}}catch(t){}}let n={};for(let e of t)e in this.loadedData&&(n[e]=this.loadedData[e]);return n}loadCaptcha(){this.loadData(["captcha","x"]).then((t=>{let e=document.querySelectorAll(".captcha-place-holder");for(let n of e){n.innerHTML=t.captcha,this.executeScriptElements(n),n.classList.remove("captcha-place-holder","loading"),n.classList.add("captcha");const e=n.closest("form");if(null!==e){let n=e.querySelector('input[type="hidden"][name="x"]');null!==n&&n.setAttribute("value",t.x)}}}))}executeScriptElements(t){const e=t.querySelectorAll("script");Array.from(e).forEach((t=>{const e=document.createElement("script");Array.from(t.attributes).forEach((t=>{e.setAttribute(t.name,t.value)})),e.text=t.text,t.parentNode.replaceChild(e,t)}))}}})();

function encodeURIfix(str) {
	// to prevent twice encoding
	// and fix '[',']' signs to follow RFC3986 (section-3.2.2)
	return encodeURI(decodeURI(str)).replace(/%5B/g, '[').replace(/%5D/g, ']');
}

function getBaseHref() {
	var href = document.getElementsByTagName('base')[0].href;
	if (href == null) {
		return '/';
	} else {
		return href;
	}
}

function popup(code, w, h){
    window.open(getBaseHref() + 'index.php?o=' + code, '', 'toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width=' + w + ',height=' + h + ',left=32,top=16');
}

/**
 * @todo move to pfs module
 */
function pfs(id, c1, c2, parser){
    window.open(
		getBaseHref() + 'index.php?e=pfs&userid=' + id + '&c1=' + c1 + '&c2=' + c2 + '&parser=' + parser,
		'PFS',
		'status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16'
	);
}

function redirect(url){
    location.href = url.options[url.selectedIndex].value;
}

function toggleblock(id){
    var bl = document.getElementById(id);
    if (bl.style.display == 'none') {
        bl.style.display = '';
    }
    else {
        bl.style.display = 'none';
    }
	return false;
}

function toggleAll(action) {
	var blks = document.querySelectorAll('[id^="blk_"]');
	for (i = 0; i < blks.length; i++) {
		if (action == 'hide') {
			blks[i].style.display = 'none';
		} else if (action == 'show') {
			blks[i].style.display = 'table-row-group';
		}
	}
	return false;
}

// Inserts text into textarea at cursor position
function insertText(docObj, fieldName, value) {
	var field = null;
	if (!docObj) {
		docObj = document;
	}
	// Find the field in the docObj
	findField:
	for (var i = 0; i < docObj.forms.length; i++) {
		for (var j = 0; j < docObj.forms[i].elements.length; j++) {
			if (docObj.forms[i].elements[j].name == fieldName) {
				field = docObj.forms[i].elements[j];
				break findField;
			}
		}
	}
	if (!field) {
		return false;
	}

	// Insert the text
	if (docObj.selection) {
		// MSIE and Opera
		field.focus();
		var sel = docObj.selection.createRange();
		sel.text = value;
	} else if (field.selectionStart || field.selectionStart == 0) {
		// Mozilla
		var startPos = field.selectionStart;
		var endPos = field.selectionEnd;
		field.value = field.value.substring(0, startPos) + value + field.value.substring(endPos, field.value.length);
	} else {
		field.value += value;
	}
	return true;
}

// Array of ajax error handlers
// Example of use:
// ajaxErrorHandlers.push({func: myErrorHandler});
// ajaxSuccessHandlers.push({func: mySuccessHandler});
var ajaxErrorHandlers = new Array();
var ajaxSuccessHandlers = new Array();
// AJAX enablement defaults to false
var ajaxEnabled = false;
// Required to calculate paths
if (typeof jQuery != 'undefined') {
	var ajaxCurrentBase = location.href.replace($('base').eq(0).attr('href'), '').replace(/\?.*$/, '').replace(/#.*$/, '');
}
// This flag indicates that AJAX+history has been used on this page
// It means that "#" or home link should be loaded via ajax too
var ajaxUsed = false;
// Global flag to let everybody know that AJAX has failed
var ajaxError = false;

/**
 * AJAX helper function
 * @param {hash} settings A hashtable with settings
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxSend(settings) {
	var method = settings.method ? settings.method.toUpperCase() : 'GET';
	var data = settings.data || '';
	var url = settings.url || $('#' + settings.formId).attr('action');
	if (method === 'POST') {
		data += '&' + $('#' + settings.formId).serialize();
	} else if (settings.formId) {
		var sep = url.indexOf('?') > 0 ? '&' : '?';
		url += sep + $('#' + settings.formId).serialize();
	}
	$.ajax({
		type: method,
		url: encodeURIfix(url),
		data: data,
		beforeSend: function() {
			if (!settings.nonshowloading) {
				$('#' + settings.divId)
					.append('<span style="position:absolute; left:' + ($('#' + settings.divId).width()/2 - 110) + 'px;top:' + ($('#' + settings.divId).height()/2 - 9) + 'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css('position', 'relative');
			}
		},
		success: function(msg) {
			if (!settings.nonshowloading) {
				$('#loading').remove();
			}
			if (!settings.nonshowfadein) {
				$('#' + settings.divId).hide().html(msg).fadeIn(500);
			} else {
				$('#' + settings.divId).html(msg);
			}
			for (var i = 0; i < ajaxSuccessHandlers.length; i++) {
				if(ajaxSuccessHandlers[i].func)
					ajaxSuccessHandlers[i].func(msg);
				else
					ajaxSuccessHandlers[i](msg);
			}
		},
		error: function(msg) {
			if (!settings.nonshowloading) {
				$('#loading').remove();
			}
			if (!settings.nonshowfadein) {
				$('#' + settings.divId).hide().html(msg).fadeIn(500);
			} else {
				$('#' + settings.divId).html(msg);
			}
			if (ajaxErrorHandlers.length > 0) {
				for (var i = 0; i < ajaxErrorHandlers.length; i++) {
					if (ajaxErrorHandlers[i].func) {
						ajaxErrorHandlers[i].func(msg);
					} else {
						ajaxErrorHandlers[i](msg);
					}
				}
			} else {
				alert('AJAX error: ' + msg);
				ajaxError = true;
			}
		}
	});
	return false;
}

/**
 * AJAX subpage loader with history support
 * @param {string} hash A hash-address string
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxPageLoad(hash) {
    if (hash !== '') {
		hash.replace(/^#/, '');
	}
	var m = hash.match(/^get(-.*?)?;(.*)$/);
	if (m) {
		// ajax bookmark
        var url = m[2].indexOf(';') > 0 ? m[2].replace(';', '?') : ajaxCurrentBase + '?' + decodeURIComponent(m[2]);
		ajaxUsed = true;
		return ajaxSend({
			method: 'GET',
			url: url,
			divId: m[1] ? m[1].substr(1) : 'ajaxBlock'
		});
	} else if (hash === '' && ajaxUsed) {
		// ajax home
		return ajaxSend ({
			url: location.href.replace(/#.*$/, ''),
			divId: 'ajaxBlock'
		});
	}
	return true;
}

/**
 * AJAX subform loader without history tracking
 * @param {string} hash A hash-address string
 * @param {string} formId Target form id attribute
 * @return FALSE on successful AJAX call, TRUE on error to continue in
 * synchronous mode
 * @type bool
 */
function ajaxFormLoad(hash, formId) {
	var m = hash.match(/^(get|post)(-.*?)?;(.*)$/);
	if (m) {
		// ajax bookmark
		var url = m[3].indexOf(';') > 0 ? m[3].replace(';', '?') : ajaxCurrentBase + '?' + m[3];
		ajaxUsed = true;
		return ajaxSend({
			method: m[1].toUpperCase(),
			url: url,
			divId: m[2] ? m[2].substr(1) : 'ajaxBlock',
			formId: formId
		});
	}
	return true;
}

/**
 * Constructs ajaxable hash string
 * @param {string} href Link href or form action attribute
 * @param {string} rel An attribute value possibly containing a hash address
 * @param {string} formData Is passed for forms only, is 'post' for POST forms
 * or serialized form data for GET forms
 * @return A valid hash-address string
 * @type string
 */
function ajaxMakeHash(href, rel, formData) {
	var hash = (formData == 'post') ? 'post' : 'get';
	var hrefBase, params;
	var sep = '?';
	var m = rel ? rel.match(/(get|post)(-[^ ;]+)?(;\S*)?/) : false;
	if (m) {
		hash = m[1];
		if (m[2]) {
			hash += m[2];
		}
		if (m[3]) {
			href = m[3].substr(1);
			sep  = ';';
		}
	}
	hash += ';'
	if (href.indexOf(sep) > 0) {
		hrefBase = href.substr(0, href.indexOf(sep));
		params = href.substr(href.indexOf(sep) + 1);
		if (formData && formData != 'post') {
			params += '&' + formData;
		}
	} else {
		hrefBase = href;
		params = '';
		if (formData && formData != 'post') {
			params += sep + formData;
		}
	}
	hash += hrefBase == ajaxCurrentBase ? params : hrefBase + ';' + params;
	return hash;
}

/**
 * Standard event bindings
 */
function bindHandlers() {
	if (location.hash == '#comments' || location.hash.match(/#c\d+/)) {
		$('.comments').css('display', '');
	}
	$('.comments_link').click(function() {
		if($('.comments').css('display') == 'none') {
			$('.comments').css('display', '');
		} else {
			$('.comments').css('display', 'none');
		}
	});

	if(location.href.match(/#comments/)) {
		$('.comments').css('display', '');
	}

	if (ajaxEnabled) {
		// AJAX auto-handling
		$('body').on('submit', 'form.ajax', function() {
			if ($(this).attr('method').toUpperCase() == 'POST') {
				ajaxFormLoad(ajaxMakeHash($(this).attr('action').replace(/#.*$/, ''), $(this).attr('class'), 'post'), $(this).attr('id'));
			} else {
				window.location.hash = ajaxMakeHash($(this).attr('action').replace(/#.*$/, ''), $(this).attr('class'), $(this).serialize());
			}
			return ajaxError;
		});
		$('body').on('click', 'a.ajax', function() {
			window.location.hash = ajaxMakeHash($(this).attr('href').replace(/#.*$/, ''), $(this).attr('rel'));
			return ajaxError;
		});

		// AJAX action confirmations
		$('body').on('click', 'a.confirmLink', function() {
			if ($(this).attr('href').match(/message.+920/i)) {
				if ($('#confirmBox')) {
					$('#confirmBox').remove();
				}
				$('body').prepend('<div id="confirmBox" class="jqmWindow"></div>');
				$('#confirmBox').jqm({ajax:$(this).attr('href'),modal:true,onLoad:function(){
					$('#confirmBox').css('margin-left', '-'+($('#confirmBox').width()/2)+'px');
					$('#confirmBox').css('margin-top', '-'+($('#confirmBox').height()/2)+'px');
				}});
				$('#confirmBox').jqmShow();
				return false;
			} else {
				return true;
			}
		});

		// Listen to hash change events
		$(window).on('hashchange', function() {
			ajaxPageLoad(window.location.hash.replace(/^#/, ''));
		});

		$('body').on('click', 'a#confirmNo', function() {
			if ($("#confirmBox").is(".jqmWindow"))
			{
				$('#confirmBox').jqmHide();
				$('#confirmBox').remove();
				return false;
			}
			else
			{
				return true;
			}
		});
	}
}

if (typeof jQuery != 'undefined') {
    $(document).ready(function() {
        // If page was loaded with hash
        if (ajaxEnabled) {
            if(window.location.hash != '') {
                ajaxPageLoad(window.location.hash.replace(/^#/, ''));
            }
        }

        bindHandlers();
    });
}

window.name = 'main';//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL1NlcnZlclNlbnRFdmVudHNDbGllbnQuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9TZXJ2ZXJTZW50RXZlbnRzLmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9kcml2ZXIvU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvU2VydmVyRXZlbnRzLmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL1RvYXN0LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL01vZGFsLmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL0NvdG9udGlBcHBsaWNhdGlvbi5qcyIsImJhc2UuanMiXSwibmFtZXMiOlsiU2VydmVyU2VudEV2ZW50c0NsaWVudCIsImV2ZW50c1VybCIsIm9uRXZlbnQiLCJjb25zdHJ1Y3RvciIsIm1vZGUiLCJ0aGlzIiwiaW5pdCIsImNvbnNvbGUiLCJsb2ciLCJFdmVudFNvdXJjZSIsIm9ub3BlbiIsImV2ZW50Iiwib25tZXNzYWdlIiwiZXZlbnREYXRhIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInVuZGVmaW5lZCIsImlkIiwibGFzdEV2ZW50SWQiLCJvbmVycm9yIiwiZXJyb3IiLCJuYW1lIiwiU2VydmVyU2VudEV2ZW50cyIsIm9uRXZlbnRUcmlnZ2VyZWQiLCJTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyIiwicG9ydCIsIlNoYXJlZFdvcmtlciIsInBvc3RNZXNzYWdlIiwiY29uZmlnIiwidXJsIiwiZSIsIlNlcnZlckV2ZW50cyIsIk1hcCIsImFkZE9ic2VydmVyIiwiY2FsbGJhY2siLCJzZXQiLCJnZXRCYXNlSHJlZiIsImZvckVhY2giLCJvYnNlcnZlciIsIlRvYXN0Iiwic3RhdGljIiwidGl0bGUiLCJtZXNzYWdlIiwiaGludCIsInR5cGUiLCJkZWxheSIsIndpbmRvdyIsImJvb3RzdHJhcCIsInNob3ciLCJjb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidG9hc3RUaXRsZSIsInRvYXN0SGludCIsInRvYXN0SFRNTCIsInRvYXN0V3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJ0b2FzdEVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImFwcGVuZENoaWxkIiwibGFzdEVsZW1lbnRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJyZXN1bHQiLCJjbGFzc05hbWUiLCJjb250YWluZXJDbGFzcyIsImJvZHkiLCJhcHBlbmQiLCJNb2RhbCIsImNvbnRlbnQiLCJidXR0b25zIiwiY2VudGVyZWQiLCJkaWFsb2dDbGFzcyIsIm1vZGFsSFRNTCIsIm1vZGFsV3JhcHBlciIsInF1ZXJ5U2VsZWN0b3IiLCJBcnJheSIsImlzQXJyYXkiLCJidXR0b24iLCJidXR0b25EYXRhIiwicHVzaCIsImxhYmVsIiwic2V0QXR0cmlidXRlIiwiYnRuVHlwZSIsImNsYXNzTGlzdCIsImFkZCIsImNsb3NlT25DbGljayIsIm9uQ2xpY2siLCJjb3QiLCJnZXRTZXJ2ZXJFdmVudHMiLCJjb25maXJtIiwib2tMYWJlbCIsImNhbmNlbExhYmVsIiwibW9kYWwiLCJnZXRNb2RhbCIsImdldFRvYXN0IiwidG9hc3QiLCJsb2FkRGF0YSIsIndoYXQiLCJsb2FkZWREYXRhIiwiZGF0YVRvTG9hZCIsIlN0cmluZyIsIml0ZW0iLCJsZW5ndGgiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJuIiwiYSIsImluZGV4IiwiYXJyYXkiLCJyZXNwb25zZSIsImZldGNoIiwidG9TdHJpbmciLCJvayIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJzdWNjZXNzIiwia2V5IiwibG9hZENhcHRjaGEiLCJ0aGVuIiwiY2FwdGNoYUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW1lbnQiLCJjYXB0Y2hhIiwiZXhlY3V0ZVNjcmlwdEVsZW1lbnRzIiwiZm9ybSIsImNsb3Nlc3QiLCJpbnB1dFgiLCJ4IiwiY29udGFpbmVyRWxlbWVudCIsInNjcmlwdEVsZW1lbnRzIiwiZnJvbSIsInNjcmlwdEVsZW1lbnQiLCJjbG9uZWRFbGVtZW50IiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsInZhbHVlIiwidGV4dCIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7bUJDQU8sTUFBTUEsRUFJVEMsVUFBWSxLQUtaLEdBQWUsS0FLZkMsUUFBVSxLQUVWLFdBQUFDLENBQVlGLEVBQVdHLEVBQU8sTUFDMUJDLEtBQUtKLFVBQVlBLEVBQ0osT0FBVEcsSUFDQUMsS0FBS0QsS0FBT0EsR0FFaEJDLEtBQUtDLE1BQ1QsQ0FFQSxJQUFBQSxHQUM4QixPQUF0QkQsTUFBSyxJQUlTLGVBQWRBLEtBQUtELE1BQ0xHLFFBQVFDLElBQUksK0JBR2hCSCxNQUFLLEVBQWUsSUFBSUksWUFBWUosS0FBS0osV0FFdkIsZUFBZEksS0FBS0QsT0FDTEMsTUFBSyxFQUFhSyxPQUFTLFNBQVVDLEdBQ2pDSixRQUFRQyxJQUFJLDRDQUNoQixHQUdKSCxNQUFLLEVBQWFPLFVBQWFELElBQzNCLE1BQU1FLEVBQVlDLEtBQUtDLE1BQU1KLEVBQU1LLFdBQ1pDLElBQW5CSixFQUFVRyxNQUFpRCxpQkFBbkJILEVBQVVHLE1BQXlDLEtBQW5CSCxFQUFVRyxPQUNsRkgsRUFBVUcsS0FBT0YsS0FBS0MsTUFBTUYsRUFBVUcsT0FFMUNILEVBQVVLLEdBQUtQLEVBQU1RLFlBQ3JCZCxNQUFLLEVBQWtCUSxFQUFVLEVBR25CLGVBQWRSLEtBQUtELE9BQ0xDLE1BQUssRUFBYWUsUUFBVSxTQUFVVCxHQUNsQ0osUUFBUUMsSUFBSSwwQ0FDaEIsR0FFUixDQUVBLEdBQWtCSyxHQUNJLGVBQWRSLEtBQUtELE1BQ0xHLFFBQVFDLElBQUksaURBQWtESyxHQUd0QyxtQkFBakJSLEtBQUtILFNBQ1pLLFFBQVFjLE1BQU1oQixLQUFLRixZQUFZbUIsS0FBTywyQkFFMUNqQixLQUFLSCxRQUFRVyxFQUNqQixFQy9ERyxNQUFNVSxFQUlUdEIsVUFBWSxLQUtaLEdBQVUsS0FLVkMsUUFBVSxLQUtWRSxLQUFPLGFBRVAsV0FBQUQsQ0FBWUYsRUFBV0csRUFBTyxNQUMxQkMsS0FBS0osVUFBWUEsRUFDSixPQUFURyxJQUNBQyxLQUFLRCxLQUFPQSxHQUVoQkMsS0FBS0MsTUFDVCxDQUVBLElBQUFBLEdBQ3lCLE9BQWpCRCxNQUFLLElBSVMsZUFBZEEsS0FBS0QsTUFDTEcsUUFBUUMsSUFBSSxnQ0FHaEJILE1BQUssRUFBVSxJQUFJTCxFQUF1QkssS0FBS0osVUFBV0ksS0FBS0QsTUFDL0RDLE1BQUssRUFBUUgsUUFBV1csSUFDcEJSLEtBQUttQixpQkFBaUJYLEVBQVUsRUFFeEMsQ0FFQSxnQkFBQVcsQ0FBaUJYLEdBQ2UsbUJBQWpCUixLQUFLSCxTQUNaSyxRQUFRYyxNQUFNaEIsS0FBS0YsWUFBWW1CLEtBQU8sMkJBRTFDakIsS0FBS0gsUUFBUVcsRUFDakIsRUNoREcsTUFBTVksVUFBcUNGLEVBQzlDLElBQUFqQixHQUNzQixlQUFkRCxLQUFLRCxNQUNMRyxRQUFRQyxJQUFJLDRDQUdoQixJQUNJLE1BQ01rQixFQURTLElBQUlDLGFBQWEsOEJBQ1pELEtBRXBCQSxFQUFLRSxZQUFZLENBQUNDLE9BQVEsQ0FBQ0MsSUFBS3pCLEtBQUtKLFVBQVdHLEtBQU1DLEtBQUtELFFBRTNEc0IsRUFBS2QsVUFBYUQsSUFDSSxlQUFkTixLQUFLRCxNQUNMRyxRQUFRQyxJQUFJLHFDQUFzQ0csRUFBTUssTUFFNURYLEtBQUttQixpQkFBaUJiLEVBQU1LLEtBQUssQ0FFekMsQ0FBRSxNQUFPZSxHQUNMeEIsUUFBUWMsTUFBTVUsRUFDbEIsQ0FDSixFQ3JCRyxNQUFNQyxFQUlULEdBQVUsS0FFVixHQUFxQixLQUVyQjVCLEtBQU8sYUFFUCxXQUFBRCxHQUNJRSxNQUFLLEVBQXFCLElBQUk0QixHQUNsQyxDQU9BLFdBQUFDLENBQVlaLEVBQU1YLEVBQU93QixHQUNyQjlCLE1BQUssRUFBbUIrQixJQUFJZCxFQUFNLENBQzlCQSxLQUFNQSxFQUNOWCxNQUFPQSxFQUNQVCxRQUFTaUMsSUFHUSxPQUFqQjlCLE1BQUssR0FDTEEsTUFBSyxHQUViLENBRUEsS0FDSSxNQUFNeUIsRUFBTU8sY0FBZ0IsaUNBQ0FwQixXQUFqQlUsY0FDVyxlQUFkdEIsS0FBS0QsTUFDTEcsUUFBUUMsSUFBSSxnREFFaEJILE1BQUssRUFBVSxJQUFJb0IsRUFBNkJLLEVBQUt6QixLQUFLRCxRQUV4QyxlQUFkQyxLQUFLRCxNQUNMRyxRQUFRQyxJQUFJLG9DQUVoQkgsTUFBSyxFQUFVLElBQUlrQixFQUFpQk8sRUFBS3pCLEtBQUtELE9BR2xEQyxNQUFLLEVBQVFILFFBQVdXLElBQ3BCUixNQUFLLEVBQWdCUSxFQUFVLEVBRW5DUixNQUFLLEVBQVFELEtBQU9DLEtBQUtELElBQzdCLENBRUEsR0FBZ0JTLEdBQ00sZUFBZFIsS0FBS0QsTUFDTEcsUUFBUUMsSUFBSSx5QkFBMEJLLEdBRzFDUixNQUFLLEVBQW1CaUMsU0FBU0MsSUFFekJBLEVBQVM1QixRQUFVRSxFQUFVRixPQUNFLG1CQUFyQjRCLEVBQVNyQyxTQUVuQnFDLEVBQVNyQyxRQUFRVyxFQUFVRyxLQUMvQixHQUVSLEVDaEVHLE1BQU13QixFQUNUQyxzQkFBd0Isb0RBRXhCQyxNQUFRLEdBQ1JDLFFBQVUsR0FDVkMsS0FBTyxHQUNQQyxLQUFPLEdBQ1BDLE1BQVEsSUFFUixHQUFhLEtBUWIsV0FBQTNDLENBQVl1QyxFQUFPQyxFQUFTQyxFQUFPLEdBQUlDLEVBQU8sU0FDakI1QixJQUFyQjhCLE9BQU9DLFdBS1gzQyxLQUFLcUMsTUFBUUEsRUFDYnJDLEtBQUtzQyxRQUFVQSxFQUNmdEMsS0FBS3VDLEtBQU9BLEVBQ1p2QyxLQUFLd0MsS0FBT0EsR0FQUnRDLFFBQVFjLE1BQU0sbUVBUXRCLENBRUEsSUFBQTRCLEdBQ0ksR0FBd0IsT0FBcEI1QyxNQUFLLEVBQXFCLENBQzFCLElBQUk2QyxFQUFZQyxTQUFTQyxlQUFlLG1CQUN0QixPQUFkRixJQUNBQSxFQUFZN0MsTUFBSyxLQUVyQkEsTUFBSyxFQUFhNkMsQ0FDdEIsQ0FFQSxNQUFNRyxFQUE0QixLQUFmaEQsS0FBS3FDLE1BQWUsMkJBQTJCckMsS0FBS3FDLGlCQUFtQixHQUNwRlksRUFBMEIsS0FBZGpELEtBQUt1QyxLQUFjLFVBQVV2QyxLQUFLdUMsZUFBaUIsR0FHL0RXLEVBQVksb0JBRmUsS0FBZGxELEtBQUt3QyxLQUFjLFlBQVl4QyxLQUFLd0MsT0FBUyw0RUFHcEN4QyxLQUFLeUMsb0NBRXRCTyxJQUFhQyw4SEFHU2pELEtBQUtzQyxzQkFHaENhLEVBQWVMLFNBQVNNLGNBQWMsT0FDNUNELEVBQWFFLFVBQVlILEVBRXpCLE1BQU1JLEVBQWVILEVBQWFJLGtCQUdsQ3ZELE1BQUssRUFBV3dELFlBQVlGLEdBR2QsSUFBSVosT0FBT0MsVUFBVVIsTUFBTW1CLEdBQ25DVixPQUdONUMsTUFBSyxFQUFXeUQsaUJBQWlCQyxpQkFBaUIsbUJBQW1CLEtBQ2pFSixFQUFhSyxTQUNxQixLQUE5QjNELE1BQUssRUFBV3FELFlBQ2hCckQsTUFBSyxFQUFXMkQsU0FDaEIzRCxNQUFLLEVBQWEsS0FDdEIsR0FFUixDQUVBLEtBQ0ksTUFBTTRELEVBQVNkLFNBQVNNLGNBQWMsT0FJdEMsT0FIQVEsRUFBTy9DLEdBQUssa0JBQ1orQyxFQUFPQyxVQUFZMUIsRUFBTTJCLGVBQ3pCaEIsU0FBU2lCLEtBQUtDLE9BQU9KLEdBQ2RBLENBQ1gsRUMvRUcsTUFBTUssRUFDVDVCLE1BQVEsR0FDUjZCLFFBQVUsR0FLVkMsUUFBVSxLQU1WQyxVQUFXLEVBRVhDLFlBQWMsZUFLZCxHQUFXLEtBYVgsV0FBQXZFLENBQVl1QyxFQUFPNkIsRUFBU0MsUUFDQ3ZELElBQXJCOEIsT0FBT0MsV0FLWDNDLEtBQUtxQyxNQUFRQSxFQUNickMsS0FBS2tFLFFBQVVBLEVBQ2ZsRSxLQUFLbUUsUUFBVUEsR0FOWGpFLFFBQVFjLE1BQU0sbUVBT3RCLENBRUEsSUFBQTRCLEdBQ0ksSUFBSXlCLEVBQWNyRSxLQUFLcUUsWUFDbkJyRSxLQUFLb0UsV0FDTEMsR0FBZSwwQkFHbkIsTUFBTUMsRUFFRiw0SUFBZUQsaUhBR2dEckUsS0FBS3FDLHVJQUdyQ3JDLEtBQUtrRSxrRUFNbENLLEVBQWV6QixTQUFTTSxjQUFjLE9BQzVDbUIsRUFBYWxCLFVBQVlpQixFQUN6QnRFLE1BQUssRUFBV3VFLEVBQWFoQixrQkFFN0J2RCxNQUFLLElBR0w4QyxTQUFTaUIsS0FBS1AsWUFBWXhELE1BQUssR0FHakIsSUFBSTJDLFVBQVVzQixNQUFNakUsTUFBSyxHQUNqQzRDLE9BR041QyxNQUFLLEVBQVMwRCxpQkFBaUIsbUJBQW1CLEtBQzlDMUQsTUFBSyxFQUFTMkQsUUFBUSxHQUU5QixDQUVBLEtBQ0ksTUFBTVEsRUFBVW5FLE1BQUssSUFFckIsR0FBZ0IsS0FBWm1FLEdBQWtCQSxJQUFZLEdBQzlCLE9BR0osTUFBTXRCLEVBQVk3QyxNQUFLLEVBQVN3RSxjQUFjLGlCQUV2QixpQkFBWkwsRUFLUE0sTUFBTUMsUUFBUVAsSUFDZEEsRUFBUWxDLFNBQVMwQyxJQUNTLGlCQUFYQSxFQUlYOUIsRUFBVVcsWUFBWW1CLEdBSGxCOUIsRUFBVVEsV0FBYXNCLENBR0UsSUFWakM5QixFQUFVUSxVQUFZYyxDQWE5QixDQUVBLEtBQ0ksTUFBTVAsRUFBUyxHQUNmLElBQUlPLEVBQVVuRSxLQUFLbUUsUUFDbkIsT0FBSUEsSUFBWSxHQUNMUCxFQUdLLE9BQVpPLEVBQ08seUZBR1ksaUJBQVpBLEVBQ0FBLEdBR1BNLE1BQU1DLFFBQVFQLElBQ2RBLEVBQVFsQyxTQUFTMkMsSUFDYixHQUEwQixpQkFBZkEsRUFFUCxZQURBaEIsRUFBT2lCLEtBQUtELEdBSWhCLE1BQU1ELEVBQVM3QixTQUFTTSxjQUFjLGVBQ2J4QyxJQUFyQmdFLEVBQVdFLFFBQ1hILEVBQU90QixVQUFZdUIsRUFBV0UsT0FHbENILEVBQU9JLGFBQWEsWUFBK0JuRSxJQUF2QmdFLEVBQVdJLFFBQXdCSixFQUFXSSxRQUFVLFVBQ3BGTCxFQUFPTSxVQUFVQyxJQUFJLFlBRUd0RSxJQUFwQmdFLEVBQVdwQyxNQUNYbUMsRUFBT00sVUFBVUMsSUFBSSxPQUFTTixFQUFXcEMsV0FHYjVCLElBQTVCZ0UsRUFBV08sZUFBMEQsSUFBNUJQLEVBQVdPLGNBQ3BEUixFQUFPSSxhQUFhLGtCQUFtQixjQUdoQm5FLElBQXZCZ0UsRUFBV1EsU0FBdUQsbUJBQXZCUixFQUFXUSxTQUN0RFQsRUFBT2pCLGlCQUFpQixTQUFVcEQsR0FBa0JzRSxFQUFXUSxRQUFROUUsS0FHM0VzRCxFQUFPaUIsS0FBS0YsRUFBTyxJQUdwQmYsRUFDWCxFQ3dESmxCLE9BQU8yQyxJQUFNLElBbk5iLE1BRUksR0FBZSxLQU1mLGVBQUFDLEdBSUksT0FIMEIsT0FBdEJ0RixNQUFLLElBQ0xBLE1BQUssRUFBZSxJQUFJMkIsR0FFckIzQixNQUFLLENBQ2hCLENBV0EsT0FBQXVGLENBQVFsRCxFQUFPNkIsRUFBU3BDLEVBQVUwRCxFQUFVLEtBQU1DLEVBQWMsVUFDNUR6RixLQUFLMEYsTUFBTXJELEVBQU82QixFQUFTLENBQ3ZCLENBQUNZLE1BQU9VLEVBQVNKLFFBQVU5RSxHQUFrQndCLEVBQVN4QixHQUFTa0MsS0FBTSxVQUFXMkMsY0FBYyxHQUM5RixDQUFDTCxNQUFPVyxFQUFhTixjQUFjLEVBQU0zQyxLQUFNLGNBRXZELENBZUEsUUFBQW1ELENBQVN0RCxFQUFPNkIsRUFBU0MsRUFBUyxNQUM5QixPQUFPLElBQUlGLEVBQU01QixFQUFPNkIsRUFBU0MsRUFDckMsQ0FlQSxLQUFBdUIsQ0FBTXJELEVBQU82QixFQUFTQyxFQUFTLE1BQzNCLE1BQU11QixFQUFRMUYsS0FBSzJGLFNBQVN0RCxFQUFPNkIsRUFBU0MsR0FFNUMsT0FEQXVCLEVBQU05QyxPQUNDOEMsQ0FDWCxDQVVBLFFBQUFFLENBQVN2RCxFQUFPQyxFQUFTQyxFQUFPLEdBQUlDLEVBQU8sSUFDdkMsT0FBTyxJQUFJTCxFQUFNRSxFQUFPQyxFQUFTQyxFQUFNQyxFQUMzQyxDQVVBLEtBQUFxRCxDQUFNeEQsRUFBT0MsRUFBU0MsRUFBTyxHQUFJQyxFQUFPLEdBQUlDLEVBQVEsS0FDaEQsTUFBTW9ELEVBQVE3RixLQUFLNEYsU0FBU3ZELEVBQU9DLEVBQVNDLEVBQU1DLEdBT2xELE9BTGMsT0FBVkMsSUFDQW9ELEVBQU1wRCxNQUFRQSxHQUdsQm9ELEVBQU1qRCxPQUNDaUQsQ0FDWCxDQWVBLGNBQU1DLENBQVNDLEdBQ1gsSUFBS0EsRUFDRCxNQUFPLENBQUMsT0FHWW5GLElBQXBCWixLQUFLZ0csYUFDTGhHLEtBQUtnRyxXQUFhLENBQUMsR0FHdkIsSUFBSUMsRUFBYSxJQUVHLGlCQUFURixHQUFxQkEsYUFBZ0JHLFVBQzVDSCxFQUFPLENBQUNBLElBR1osSUFBSyxJQUFJSSxLQUFRSixFQUNQSSxLQUFRbkcsS0FBS2dHLFlBQ2ZDLEVBQVdwQixLQUFLc0IsR0FJeEIsR0FBSUYsRUFBV0csT0FBUyxFQUFHLENBRXZCLElBQUlDLEVBQVMsSUFBSUMsZ0JBQWdCLENBQUNDLEVBQUcsT0FBUUMsRUFBRyxRQUVoRFAsRUFBV2hFLFNBQVEsQ0FBQ2tFLEVBQU1NLEVBQU9DLEtBQzdCTCxFQUFPckMsT0FBTyxRQUFVeUMsRUFBUSxJQUFLTixFQUFLLElBRTlDRSxFQUFPckMsT0FBTyxRQUFTLEdBQ3ZCLElBQ0ksSUFBSTJDLFFBQWlCQyxNQUFNLGFBQWVQLEVBQU9RLFlBRWpELEdBQUlGLEVBQVNHLEdBQUksQ0FDYixNQUFNQyxRQUFxQkosRUFBU0ssT0FDcEMsR0FBSUQsRUFBYUUsUUFDYixJQUFLLE1BQU1DLEtBQU9ILEVBQWFwRyxLQUMzQlgsS0FBS2dHLFdBQVdrQixHQUFPSCxFQUFhcEcsS0FBS3VHLEVBSXJELENBR0osQ0FBRSxNQUFPbEcsR0FFVCxDQUNKLENBRUEsSUFBSTRDLEVBQVMsQ0FBQyxFQUNkLElBQUssSUFBSXVDLEtBQVFKLEVBQ1JJLEtBQVFuRyxLQUFLZ0csYUFDZHBDLEVBQU91QyxHQUFRbkcsS0FBS2dHLFdBQVdHLElBSXZDLE9BQU92QyxDQUNYLENBS0EsV0FBQXVELEdBQ0luSCxLQUFLOEYsU0FBUyxDQUFDLFVBQVcsTUFBTXNCLE1BQUt4RCxJQUNqQyxJQUFJeUQsRUFBa0J2RSxTQUFTd0UsaUJBQWlCLHlCQUNoRCxJQUFLLElBQUlDLEtBQVdGLEVBQWlCLENBQ2pDRSxFQUFRbEUsVUFBWU8sRUFBTzRELFFBQzNCeEgsS0FBS3lILHNCQUFzQkYsR0FDM0JBLEVBQVF0QyxVQUFVdEIsT0FBTyx1QkFBd0IsV0FDakQ0RCxFQUFRdEMsVUFBVUMsSUFBSSxXQUV0QixNQUFNd0MsRUFBT0gsRUFBUUksUUFBUSxRQUM3QixHQUFhLE9BQVRELEVBQWUsQ0FDZixJQUFJRSxFQUFTRixFQUFLbEQsY0FBYyxrQ0FDakIsT0FBWG9ELEdBQ0FBLEVBQU83QyxhQUFhLFFBQVNuQixFQUFPaUUsRUFFNUMsQ0FDSixJQUVSLENBT0EscUJBQUFKLENBQXNCSyxHQUNsQixNQUFNQyxFQUFpQkQsRUFBaUJSLGlCQUFpQixVQUV6RDdDLE1BQU11RCxLQUFLRCxHQUFnQjlGLFNBQVNnRyxJQUNoQyxNQUFNQyxFQUFnQnBGLFNBQVNNLGNBQWMsVUFDN0NxQixNQUFNdUQsS0FBS0MsRUFBY0UsWUFBWWxHLFNBQVNtRyxJQUMxQ0YsRUFBY25ELGFBQWFxRCxFQUFVbkgsS0FBTW1ILEVBQVVDLE1BQU0sSUFFL0RILEVBQWNJLEtBQU9MLEVBQWNLLEtBQ25DTCxFQUFjTSxXQUFXQyxhQUFhTixFQUFlRCxFQUFjLEdBRTNFLEU7O0FDdk5KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICogQGxpY2Vuc2UgaHR0cHM6Ly9naXRodWIuY29tL0NvdG9udGkvQ290b250aS9ibG9iL21hc3Rlci9MaWNlbnNlLnR4dFxyXG4gKi8iLCIvKipcclxuICogU2VydmVyIFNlbnQgRXZlbnRzIGNsaWVudFxyXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50c1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlclNlbnRFdmVudHNDbGllbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIGV2ZW50c1VybCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7RXZlbnRTb3VyY2V8bnVsbH1cclxuICAgICAqL1xyXG4gICAgI2V2ZW50U291cmNlID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtmdW5jdGlvbnxudWxsfVxyXG4gICAgICovXHJcbiAgICBvbkV2ZW50ID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihldmVudHNVcmwsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudHNVcmwgPSBldmVudHNVcmw7XHJcbiAgICAgICAgaWYgKG1vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jZXZlbnRTb3VyY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlclNlbnRFdmVudHNDbGllbnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2V2ZW50U291cmNlID0gbmV3IEV2ZW50U291cmNlKHRoaXMuZXZlbnRzVXJsKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9ub3BlbiA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlclNlbnRFdmVudHNDbGllbnQgY29ubmVjdGlvbiBpcyBvcGVuJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNldmVudFNvdXJjZS5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50RGF0YS5kYXRhICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBldmVudERhdGEuZGF0YSA9PT0gJ3N0cmluZycpICYmIGV2ZW50RGF0YS5kYXRhICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLmRhdGEgPSBKU09OLnBhcnNlKGV2ZW50RGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudERhdGEuaWQgPSBldmVudC5sYXN0RXZlbnRJZDtcclxuICAgICAgICAgICAgdGhpcy4jb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLiNldmVudFNvdXJjZS5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyU2VudEV2ZW50c0NsaWVudCBjb25uZWN0aW9uIGVycm9yJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgI29uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJTZW50RXZlbnRzQ2xpZW50OiBTZXJ2ZXIgdHJpZ2dlcmVkIGV2ZW50JywgZXZlbnREYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkV2ZW50ICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgJy5vbkV2ZW50IGlzIG5vdCBkZWZpbmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25FdmVudChldmVudERhdGEpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7U2VydmVyU2VudEV2ZW50c0NsaWVudH0gZnJvbSBcIi4uL1NlcnZlclNlbnRFdmVudHNDbGllbnRcIjtcclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXIgU2VudCBFdmVudHMgZHJpdmVyIGltcGxlbWVudGF0aW9uIGZvciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IFNoYXJlZCBXb3JrZXIuXHJcbiAqIFRoZXNlIGFyZSBBbmRyb2lkIG1vYmlsZSBkZXZpY2UgYnJvd3NlcnMuXHJcbiAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyU2VudEV2ZW50cyB7XHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cclxuICAgICAqL1xyXG4gICAgZXZlbnRzVXJsID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtTZXJ2ZXJTZW50RXZlbnRzQ2xpZW50fG51bGx9XHJcbiAgICAgKi9cclxuICAgICNjbGllbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge2Z1bmN0aW9ufG51bGx9XHJcbiAgICAgKi9cclxuICAgIG9uRXZlbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ3xudWxsfVxyXG4gICAgICovXHJcbiAgICBtb2RlID0gJ3Byb2R1Y3Rpb24nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50c1VybCwgbW9kZSA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmV2ZW50c1VybCA9IGV2ZW50c1VybDtcclxuICAgICAgICBpZiAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNjbGllbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlclNlbnRFdmVudHMgZHJpdmVyJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNjbGllbnQgPSBuZXcgU2VydmVyU2VudEV2ZW50c0NsaWVudCh0aGlzLmV2ZW50c1VybCwgdGhpcy5tb2RlKTtcclxuICAgICAgICB0aGlzLiNjbGllbnQub25FdmVudCA9IChldmVudERhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXZlbnQgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnLm9uRXZlbnQgaXMgbm90IGRlZmluZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkV2ZW50KGV2ZW50RGF0YSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlclNlbnRFdmVudHN9IGZyb20gJy4vU2VydmVyU2VudEV2ZW50cyc7XHJcblxyXG4vKipcclxuICogU2VydmVyIFNlbnQgRXZlbnRzIGRyaXZlciBpbXBsZW1lbnRhdGlvbiB2aWEgU2hhcmVkV29ya2VyLlxyXG4gKlxyXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50c1xyXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2hhcmVkV29ya2VyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlciBleHRlbmRzIFNlcnZlclNlbnRFdmVudHMge1xyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlciBkcml2ZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmtlciA9IG5ldyBTaGFyZWRXb3JrZXIoJy9qcy9zaGFyZWRXb3JrZXJTU0UubWluLmpzJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcnQgPSB3b3JrZXIucG9ydDtcclxuXHJcbiAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2Uoe2NvbmZpZzoge3VybDogdGhpcy5ldmVudHNVcmwsIG1vZGU6IHRoaXMubW9kZX19KTtcclxuXHJcbiAgICAgICAgICAgIHBvcnQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlciBldmVudCcsIGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7U2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlcn0gZnJvbSBcIi4vZHJpdmVyL1NlcnZlclNlbnRFdmVudHNTaGFyZWRXb3JrZXJcIjtcclxuaW1wb3J0IHtTZXJ2ZXJTZW50RXZlbnRzfSBmcm9tIFwiLi9kcml2ZXIvU2VydmVyU2VudEV2ZW50c1wiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBldmVudHNcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7bnVsbHxTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyfFNlcnZlclNlbnRFdmVudHN9XHJcbiAgICAgKi9cclxuICAgICNkcml2ZXIgPSBudWxsO1xyXG5cclxuICAgICNvYnNlcnZlcnNSZWdpc3RyeSA9IG51bGw7XHJcblxyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLiNvYnNlcnZlcnNSZWdpc3RyeSA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIGFkZE9ic2VydmVyKG5hbWUsIGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5LnNldChuYW1lLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgb25FdmVudDogY2FsbGJhY2tcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuI2RyaXZlciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNpbml0RHJpdmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICNpbml0RHJpdmVyKCkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP249c2VydmVyLWV2ZW50cyc7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBTaGFyZWRXb3JrZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyIGRyaXZlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuI2RyaXZlciA9IG5ldyBTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyKHVybCwgdGhpcy5tb2RlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBTZXJ2ZXJTZW50RXZlbnRzIGRyaXZlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuI2RyaXZlciA9IG5ldyBTZXJ2ZXJTZW50RXZlbnRzKHVybCwgdGhpcy5tb2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2RyaXZlci5vbkV2ZW50ID0gKGV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLiNldmVudFRyaWdnZXJlZChldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLiNkcml2ZXIubW9kZSA9IHRoaXMubW9kZTtcclxuICAgIH1cclxuXHJcbiAgICAjZXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXIgdHJpZ2dlcmVkIGV2ZW50JywgZXZlbnREYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5LmZvckVhY2goKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyLmV2ZW50ID09PSBldmVudERhdGEuZXZlbnRcclxuICAgICAgICAgICAgICAgICYmIHR5cGVvZiBvYnNlcnZlci5vbkV2ZW50ID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIub25FdmVudChldmVudERhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBUb2FzdFxyXG4gKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzUuMy9jb21wb25lbnRzL3RvYXN0cy9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb2FzdCB7XHJcbiAgICBzdGF0aWMgY29udGFpbmVyQ2xhc3MgPSAndG9hc3QtY29udGFpbmVyIHBvc2l0aW9uLWZpeGVkIGJvdHRvbS0wIGVuZC0wIHAtMyc7XHJcblxyXG4gICAgdGl0bGUgPSAnJztcclxuICAgIG1lc3NhZ2UgPSAnJztcclxuICAgIGhpbnQgPSAnJztcclxuICAgIHR5cGUgPSAnJztcclxuICAgIGRlbGF5ID0gNTAwMDtcclxuXHJcbiAgICAjY29udGFpbmVyID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgbWVzc2FnZSwgaGludCA9ICcnLCB0eXBlID0gJycpIHtcclxuICAgICAgICBpZiAod2luZG93LmJvb3RzdHJhcCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Jvb3RzdHJhcCBpcyBub3QgZm91bmQuIEl0IGlzIHJlcXVpcmVkIGZvciB1c2UgXCJUb2FzdFwiIGNvbXBvbmVudCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLmhpbnQgPSBoaW50O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICBpZiAodGhpcy4jY29udGFpbmVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9hc3QtY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IHRoaXMuI2NyZWF0ZUNvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuI2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRvYXN0VGl0bGUgPSB0aGlzLnRpdGxlICE9PSAnJyA/IGA8c3Ryb25nIGNsYXNzPVwibWUtYXV0b1wiPiR7dGhpcy50aXRsZX08L3N0cm9uZz5gIDogJyc7XHJcbiAgICAgICAgY29uc3QgdG9hc3RIaW50ID0gdGhpcy5oaW50ICE9PSAnJyA/IGA8c21hbGw+JHt0aGlzLmhpbnR9PC9zbWFsbD5gIDogJyc7XHJcbiAgICAgICAgY29uc3QgYmFja0dyb3VuZCA9IHRoaXMudHlwZSAhPT0gJycgPyBgIHRleHQtYmctJHt0aGlzLnR5cGV9YCA6ICcnO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdEhUTUwgPSBgPGRpdiBjbGFzcz1cInRvYXN0JHtiYWNrR3JvdW5kfVwiIHJvbGU9XCJhbGVydFwiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiIGBcclxuICAgICAgICAgICAgICAgICsgYGRhdGEtYnMtZGVsYXk9XCIke3RoaXMuZGVsYXl9XCI+YFxyXG4gICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwidG9hc3QtaGVhZGVyXCI+J1xyXG4gICAgICAgICAgICAgICsgYCR7dG9hc3RUaXRsZX0ke3RvYXN0SGludH1gXHJcbiAgICAgICAgICAgICAgKyAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJ0b2FzdFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPidcclxuICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICArIGA8ZGl2IGNsYXNzPVwidG9hc3QtYm9keVwiPiR7dGhpcy5tZXNzYWdlfTwvZGl2PmBcclxuICAgICAgICAgICsgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvYXN0V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvYXN0V3JhcHBlci5pbm5lckhUTUwgPSB0b2FzdEhUTUw7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvYXN0RWxlbWVudCA9IHRvYXN0V3JhcHBlci5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSB0b2FzdCB0byB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy4jY29udGFpbmVyLmFwcGVuZENoaWxkKHRvYXN0RWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHRvYXN0XHJcbiAgICAgICAgY29uc3QgdG9hc3QgPSBuZXcgd2luZG93LmJvb3RzdHJhcC5Ub2FzdCh0b2FzdEVsZW1lbnQpO1xyXG4gICAgICAgIHRvYXN0LnNob3coKTtcclxuXHJcbiAgICAgICAgLy8gT3B0aW9uYWxseSByZW1vdmUgdGhlIHRvYXN0IGZyb20gdGhlIERPTSBhZnRlciBpdCBoaWRlc1xyXG4gICAgICAgIHRoaXMuI2NvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2hpZGRlbi5icy50b2FzdCcsICgpID0+IHtcclxuICAgICAgICAgICAgdG9hc3RFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy4jY29udGFpbmVyLmlubmVySFRNTCA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAjY3JlYXRlQ29udGFpbmVyKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHJlc3VsdC5pZCA9ICd0b2FzdC1jb250YWluZXInO1xyXG4gICAgICAgIHJlc3VsdC5jbGFzc05hbWUgPSBUb2FzdC5jb250YWluZXJDbGFzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChyZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogTW9kYWxcclxuICogU2hvdyBNb2RhbCBwcm9ncmFtbWF0aWNhbGx5XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzUuMy9jb21wb25lbnRzL21vZGFsL1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vZGFsIHtcclxuICAgIHRpdGxlID0gJyc7XHJcbiAgICBjb250ZW50ID0gJyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7KHtsYWJlbDogU3RyaW5nLCBvbkNsaWNrOiBmdW5jdGlvbiwgY2xvc2VPbkNsaWNrOiBib29sLCB0eXBlOiBzdHJpbmd9fHN0cmluZylbXXxudWxsfVxyXG4gICAgICovXHJcbiAgICBidXR0b25zID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFZlcnRpY2FsbHkgY2VudGVyZWRcclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBjZW50ZXJlZCA9IGZhbHNlO1xyXG5cclxuICAgIGRpYWxvZ0NsYXNzID0gJ21vZGFsLWRpYWxvZyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7RWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgI2VsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHsoe1xyXG4gICAgICogICAgbGFiZWw6IFN0cmluZyxcclxuICAgICAqICAgIG9uQ2xpY2s6IGZ1bmN0aW9ufHVuZGVmaW5lZCxcclxuICAgICAqICAgIGNsb3NlT25DbGljazogYm9vbHx1bmRlZmluZWQsXHJcbiAgICAgKiAgICB0eXBlOiBzdHJpbmd8dW5kZWZpbmVkLFxyXG4gICAgICogICAgYnRuVHlwZTogc3RyaW5nfHVuZGVmaW5lZFxyXG4gICAgICogIH18c3RyaW5nKVtdfG51bGx9IGJ1dHRvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGNvbnRlbnQsIGJ1dHRvbnMpIHtcclxuICAgICAgICBpZiAod2luZG93LmJvb3RzdHJhcCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Jvb3RzdHJhcCBpcyBub3QgZm91bmQuIEl0IGlzIHJlcXVpcmVkIGZvciB1c2UgXCJNb2RhbFwiIGNvbXBvbmVudCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBidXR0b25zO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgbGV0IGRpYWxvZ0NsYXNzID0gdGhpcy5kaWFsb2dDbGFzcztcclxuICAgICAgICBpZiAodGhpcy5jZW50ZXJlZCkge1xyXG4gICAgICAgICAgICBkaWFsb2dDbGFzcyArPSAnIG1vZGFsLWRpYWxvZy1jZW50ZXJlZCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtb2RhbEhUTUwgPSAnPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiBpZD1cIkNvdG9udGlEeW5hbWljTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgJ1xyXG4gICAgICAgICAgICAgICAgKyAnYXJpYS1sYWJlbGxlZGJ5PVwiQ290b250aUR5bmFtaWNNb2RhbExhYmVsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+J1xyXG4gICAgICAgICAgKyBgPGRpdiBjbGFzcz1cIiR7ZGlhbG9nQ2xhc3N9XCI+YFxyXG4gICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPidcclxuICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+J1xyXG4gICAgICAgICAgICAgICAgKyBgPGg1IGNsYXNzPVwibW9kYWwtdGl0bGVcIiBpZD1cIkNvdG9udGlEeW5hbWljTW9kYWxMYWJlbFwiPiR7dGhpcy50aXRsZX08L2g1PmBcclxuICAgICAgICAgICAgICAgICsgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj4nXHJcbiAgICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICAgICsgYDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+JHt0aGlzLmNvbnRlbnR9PC9kaXY+YFxyXG4gICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48L2Rpdj4nXHJcbiAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICArICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbFdyYXBwZXIuaW5uZXJIVE1MID0gbW9kYWxIVE1MO1xyXG4gICAgICAgIHRoaXMuI2VsZW1lbnQgPSBtb2RhbFdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG4gICAgICAgIHRoaXMuI2FkZEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSBtb2RhbCB0byB0aGUgYm9keVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy4jZWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgYW5kIHNob3cgdGhlIG1vZGFsXHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgYm9vdHN0cmFwLk1vZGFsKHRoaXMuI2VsZW1lbnQpO1xyXG4gICAgICAgIG1vZGFsLnNob3coKTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBtb2RhbCBmcm9tIHRoZSBET00gYWZ0ZXIgaXQgaXMgaGlkZGVuXHJcbiAgICAgICAgdGhpcy4jZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuI2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgI2FkZEJ1dHRvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuI2J1aWxkQnV0dG9ucygpO1xyXG5cclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gJycgfHwgYnV0dG9ucyA9PT0gW10pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZm9vdGVyJyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYnV0dG9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGJ1dHRvbnM7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGJ1dHRvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MICs9IGJ1dHRvbjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgI2J1aWxkQnV0dG9ucygpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBsZXQgYnV0dG9ucyA9IHRoaXMuYnV0dG9ucztcclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gW10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChidXR0b25zID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+Q2xvc2U8L2J1dHRvbj4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidXR0b25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYnV0dG9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidXR0b25EYXRhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGJ1dHRvbkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLmxhYmVsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gYnV0dG9uRGF0YS5sYWJlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgYnV0dG9uRGF0YS5idG5UeXBlICE9PSB1bmRlZmluZWQgPyBidXR0b25EYXRhLmJ0blR5cGUgOiAnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkRhdGEudHlwZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi0nICsgYnV0dG9uRGF0YS50eXBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5jbG9zZU9uQ2xpY2sgIT09IHVuZGVmaW5lZCAmJiBidXR0b25EYXRhLmNsb3NlT25DbGljayA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtZGlzbWlzcycsICdtb2RhbCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLm9uQ2xpY2sgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgYnV0dG9uRGF0YS5vbkNsaWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7cmV0dXJuIGJ1dHRvbkRhdGEub25DbGljayhldmVudCl9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChidXR0b24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufSIsImltcG9ydCB7U2VydmVyRXZlbnRzfSBmcm9tICcuL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMnO1xyXG5pbXBvcnQge1RvYXN0fSBmcm9tIFwiLi9Ub2FzdFwiO1xyXG5pbXBvcnQge01vZGFsfSBmcm9tIFwiLi9Nb2RhbFwiO1xyXG5cclxuLyoqXHJcbiAqIEJhc2UgQ290b250aSBjbGFzc1xyXG4gKi9cclxuY2xhc3MgQ290b250aUFwcGxpY2F0aW9uXHJcbntcclxuICAgICNzZXZlckV2ZW50cyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgU2VydmVyIEV2ZW50cyBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtTZXJ2ZXJFdmVudHN9XHJcbiAgICAgKi9cclxuICAgIGdldFNlcnZlckV2ZW50cygpIHtcclxuICAgICAgICBpZiAodGhpcy4jc2V2ZXJFdmVudHMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy4jc2V2ZXJFdmVudHMgPSBuZXcgU2VydmVyRXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNzZXZlckV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgQ29uZmlybSBkaWFsb2cgbW9kYWxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2tMYWJlbFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNhbmNlbExhYmVsXHJcbiAgICAgKiBAdG9kbyB0cmFuc2xhdGVkIGRlZmF1bHQgbGFiZWxzXHJcbiAgICAgKi9cclxuICAgIGNvbmZpcm0odGl0bGUsIGNvbnRlbnQsIGNhbGxiYWNrLCBva0xhYmVsID0gJ09rJywgY2FuY2VsTGFiZWwgPSAnQ2FuY2VsJykge1xyXG4gICAgICAgIHRoaXMubW9kYWwodGl0bGUsIGNvbnRlbnQsIFtcclxuICAgICAgICAgICAge2xhYmVsOiBva0xhYmVsLCBvbkNsaWNrOiAoZXZlbnQpID0+IHtyZXR1cm4gY2FsbGJhY2soZXZlbnQpfSwgdHlwZTogJ3ByaW1hcnknLCBjbG9zZU9uQ2xpY2s6IHRydWV9LFxyXG4gICAgICAgICAgICB7bGFiZWw6IGNhbmNlbExhYmVsLCBjbG9zZU9uQ2xpY2s6IHRydWUsIHR5cGU6ICdzZWNvbmRhcnknfVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBNb2RhbCBpbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHsoe1xyXG4gICAgICogICAgbGFiZWw6IFN0cmluZyxcclxuICAgICAqICAgIG9uQ2xpY2s6IGZ1bmN0aW9ufHVuZGVmaW5lZCxcclxuICAgICAqICAgIGNsb3NlT25DbGljazogYm9vbHx1bmRlZmluZWQsXHJcbiAgICAgKiAgICB0eXBlOiBzdHJpbmd8dW5kZWZpbmVkLFxyXG4gICAgICogICAgYnRuVHlwZTogc3RyaW5nfHVuZGVmaW5lZFxyXG4gICAgICogIH18c3RyaW5nKVtdfG51bGx9IGJ1dHRvbnNcclxuICAgICAqICBAcmV0dXJucyBNb2RhbFxyXG4gICAgICovXHJcbiAgICBnZXRNb2RhbCh0aXRsZSwgY29udGVudCwgYnV0dG9ucz0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTW9kYWwodGl0bGUsIGNvbnRlbnQsIGJ1dHRvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBNb2RhbCBwcm9ncmFtbWF0aWNhbGx5XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0geyh7XHJcbiAgICAgKiAgICBsYWJlbDogU3RyaW5nLFxyXG4gICAgICogICAgb25DbGljazogZnVuY3Rpb258dW5kZWZpbmVkLFxyXG4gICAgICogICAgY2xvc2VPbkNsaWNrOiBib29sfHVuZGVmaW5lZCxcclxuICAgICAqICAgIHR5cGU6IHN0cmluZ3x1bmRlZmluZWQsXHJcbiAgICAgKiAgICBidG5UeXBlOiBzdHJpbmd8dW5kZWZpbmVkXHJcbiAgICAgKiAgfXxzdHJpbmcpW118bnVsbH0gYnV0dG9uc1xyXG4gICAgICogIEByZXR1cm5zIE1vZGFsXHJcbiAgICAgKi9cclxuICAgIG1vZGFsKHRpdGxlLCBjb250ZW50LCBidXR0b25zPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSB0aGlzLmdldE1vZGFsKHRpdGxlLCBjb250ZW50LCBidXR0b25zKTtcclxuICAgICAgICBtb2RhbC5zaG93KCk7XHJcbiAgICAgICAgcmV0dXJuIG1vZGFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBUb2FzdHMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhpbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXHJcbiAgICAgKiBAcmV0dXJucyBUb2FzdFxyXG4gICAgICovXHJcbiAgICBnZXRUb2FzdCh0aXRsZSwgbWVzc2FnZSwgaGludCA9ICcnLCB0eXBlID0gJycpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRvYXN0KHRpdGxlLCBtZXNzYWdlLCBoaW50LCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgVG9hc3RzIHByb2dyYW1tYXRpY2FsbHlcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5XHJcbiAgICAgKi9cclxuICAgIHRvYXN0KHRpdGxlLCBtZXNzYWdlLCBoaW50ID0gJycsIHR5cGUgPSAnJywgZGVsYXkgPSA1MDAwKSB7XHJcbiAgICAgICAgY29uc3QgdG9hc3QgPSB0aGlzLmdldFRvYXN0KHRpdGxlLCBtZXNzYWdlLCBoaW50LCB0eXBlKTtcclxuXHJcbiAgICAgICAgaWYgKGRlbGF5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRvYXN0LmRlbGF5ID0gZGVsYXlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvYXN0LnNob3coKTtcclxuICAgICAgICByZXR1cm4gdG9hc3Q7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBkYXRhIGZyb20gL2luZGV4LnBocD9uPW1haW4mYT1nZXRcclxuICAgICAqIENhbiBiZSB1c2VmdWwsIGZvciBleGFtcGxlIHdoZW4gaXQgaXMgbmVlZGVkIHRvIGxvYWQgc29tZSBkeW5hbWljIGNvbnRlbnQgdG8gY2FjaGVkIHBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBFeGFtcGxlOlxyXG4gICAgICogY290LmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAqICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgKiB9KTtcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2hhdCBBcnJheSBvciBzdHJpbmcuIERhdGEgdG8gbG9hZC4gRm9yIGV4YW1wbGUsIFsnY2FwdGNoYScsICd4J10gKHggLSBhbnRpIFhTUyBwYXJhbWV0ZXIgdmFsdWUpXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7fT59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWREYXRhKHdoYXQpIHtcclxuICAgICAgICBpZiAoIXdoYXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkRGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhdGFUb0xvYWQgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aGF0ID09PSAnc3RyaW5nJyB8fCB3aGF0IGluc3RhbmNlb2YgU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHdoYXQgPSBbd2hhdF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHdoYXQpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhVG9Mb2FkLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhVG9Mb2FkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gQHRvZG8gY2hhbmdlIHRvIHN5c3RlbSBjb250cm9sbGVyIHdoZW4gaXQgd2lsbCBiZSBpbXBsZW1lbnRlZFxyXG4gICAgICAgICAgICBsZXQgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7bjogJ21haW4nLCBhOiAnZ2V0J30pO1xyXG5cclxuICAgICAgICAgICAgZGF0YVRvTG9hZC5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2RhdGFbJyArIGluZGV4ICsgJ10nLCBpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ19hamF4JywgMSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaW5kZXgucGhwPycgKyBwYXJhbXMudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhW2tleV0gPSByZXNwb25zZURhdGEuZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSFRUUCBlcnJvclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBlcnJvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICgoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaXRlbV0gPSB0aGlzLmxvYWRlZERhdGFbaXRlbV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGNhcHRjaGEgdmlhIGFqYXguIFVzZWQgb24gY2FjaGVkIHBhZ2VzLlxyXG4gICAgICovXHJcbiAgICBsb2FkQ2FwdGNoYSgpIHtcclxuICAgICAgICB0aGlzLmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgbGV0IGNhcHRjaGFFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXB0Y2hhLXBsYWNlLWhvbGRlcicpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIGNhcHRjaGFFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSByZXN1bHQuY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYXB0Y2hhLXBsYWNlLWhvbGRlcicsICdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NhcHRjaGEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gZWxlbWVudC5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFggPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZT1cInhcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRYICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0WC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmVzdWx0LngpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgeW91IGFwcGVuZCA8c2NyaXB0PiB0YWdzIHRvIHRoZSBlbGVtZW50cyBvZiB0aGUgZmluaXNoZWQgRE9NIGRvY3VtZW50LCB0aGV5IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKiBUaGUgbWV0aG9kIGV4ZWN1dGVzIDxzY3JpcHQ+IHNjcmlwdHMgbmVzdGVkIGluIHRoZSBzcGVjaWZpZWQgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsZW1lbnQgTm9kZVxyXG4gICAgICovXHJcbiAgICBleGVjdXRlU2NyaXB0RWxlbWVudHMoY29udGFpbmVyRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnRzID0gY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKTtcclxuXHJcbiAgICAgICAgQXJyYXkuZnJvbShzY3JpcHRFbGVtZW50cykuZm9yRWFjaCgoc2NyaXB0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjbG9uZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudC5hdHRyaWJ1dGVzKS5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsb25lZEVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC50ZXh0ID0gc2NyaXB0RWxlbWVudC50ZXh0O1xyXG4gICAgICAgICAgICBzY3JpcHRFbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lZEVsZW1lbnQsIHNjcmlwdEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuY290ID0gbmV3IENvdG9udGlBcHBsaWNhdGlvbigpO1xyXG4iLCJmdW5jdGlvbiBlbmNvZGVVUklmaXgoc3RyKSB7XHJcblx0Ly8gdG8gcHJldmVudCB0d2ljZSBlbmNvZGluZ1xyXG5cdC8vIGFuZCBmaXggJ1snLCddJyBzaWducyB0byBmb2xsb3cgUkZDMzk4NiAoc2VjdGlvbi0zLjIuMilcclxuXHRyZXR1cm4gZW5jb2RlVVJJKGRlY29kZVVSSShzdHIpKS5yZXBsYWNlKC8lNUIvZywgJ1snKS5yZXBsYWNlKC8lNUQvZywgJ10nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QmFzZUhyZWYoKSB7XHJcblx0dmFyIGhyZWYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdLmhyZWY7XHJcblx0aWYgKGhyZWYgPT0gbnVsbCkge1xyXG5cdFx0cmV0dXJuICcvJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIGhyZWY7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1cChjb2RlLCB3LCBoKXtcclxuICAgIHdpbmRvdy5vcGVuKGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP289JyArIGNvZGUsICcnLCAndG9vbGJhcj0wLGxvY2F0aW9uPTAsZGlyZWN0b3JpZXM9MCxtZW51QmFyPTAscmVzaXphYmxlPTAsc2Nyb2xsYmFycz15ZXMsd2lkdGg9JyArIHcgKyAnLGhlaWdodD0nICsgaCArICcsbGVmdD0zMix0b3A9MTYnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0b2RvIG1vdmUgdG8gcGZzIG1vZHVsZVxyXG4gKi9cclxuZnVuY3Rpb24gcGZzKGlkLCBjMSwgYzIsIHBhcnNlcil7XHJcbiAgICB3aW5kb3cub3BlbihcclxuXHRcdGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP2U9cGZzJnVzZXJpZD0nICsgaWQgKyAnJmMxPScgKyBjMSArICcmYzI9JyArIGMyICsgJyZwYXJzZXI9JyArIHBhcnNlcixcclxuXHRcdCdQRlMnLFxyXG5cdFx0J3N0YXR1cz0xLCB0b29sYmFyPTAsbG9jYXRpb249MCxkaXJlY3Rvcmllcz0wLG1lbnVCYXI9MCxyZXNpemFibGU9MSxzY3JvbGxiYXJzPXllcyx3aWR0aD03NTQsaGVpZ2h0PTUxMixsZWZ0PTMyLHRvcD0xNidcclxuXHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWRpcmVjdCh1cmwpe1xyXG4gICAgbG9jYXRpb24uaHJlZiA9IHVybC5vcHRpb25zW3VybC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlYmxvY2soaWQpe1xyXG4gICAgdmFyIGJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKGJsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUFsbChhY3Rpb24pIHtcclxuXHR2YXIgYmxrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZF49XCJibGtfXCJdJyk7XHJcblx0Zm9yIChpID0gMDsgaSA8IGJsa3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmIChhY3Rpb24gPT0gJ2hpZGUnKSB7XHJcblx0XHRcdGJsa3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdH0gZWxzZSBpZiAoYWN0aW9uID09ICdzaG93Jykge1xyXG5cdFx0XHRibGtzW2ldLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93LWdyb3VwJztcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyBJbnNlcnRzIHRleHQgaW50byB0ZXh0YXJlYSBhdCBjdXJzb3IgcG9zaXRpb25cclxuZnVuY3Rpb24gaW5zZXJ0VGV4dChkb2NPYmosIGZpZWxkTmFtZSwgdmFsdWUpIHtcclxuXHR2YXIgZmllbGQgPSBudWxsO1xyXG5cdGlmICghZG9jT2JqKSB7XHJcblx0XHRkb2NPYmogPSBkb2N1bWVudDtcclxuXHR9XHJcblx0Ly8gRmluZCB0aGUgZmllbGQgaW4gdGhlIGRvY09ialxyXG5cdGZpbmRGaWVsZDpcclxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRvY09iai5mb3Jtcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb2NPYmouZm9ybXNbaV0uZWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0aWYgKGRvY09iai5mb3Jtc1tpXS5lbGVtZW50c1tqXS5uYW1lID09IGZpZWxkTmFtZSkge1xyXG5cdFx0XHRcdGZpZWxkID0gZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzW2pdO1xyXG5cdFx0XHRcdGJyZWFrIGZpbmRGaWVsZDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoIWZpZWxkKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBJbnNlcnQgdGhlIHRleHRcclxuXHRpZiAoZG9jT2JqLnNlbGVjdGlvbikge1xyXG5cdFx0Ly8gTVNJRSBhbmQgT3BlcmFcclxuXHRcdGZpZWxkLmZvY3VzKCk7XHJcblx0XHR2YXIgc2VsID0gZG9jT2JqLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xyXG5cdFx0c2VsLnRleHQgPSB2YWx1ZTtcclxuXHR9IGVsc2UgaWYgKGZpZWxkLnNlbGVjdGlvblN0YXJ0IHx8IGZpZWxkLnNlbGVjdGlvblN0YXJ0ID09IDApIHtcclxuXHRcdC8vIE1vemlsbGFcclxuXHRcdHZhciBzdGFydFBvcyA9IGZpZWxkLnNlbGVjdGlvblN0YXJ0O1xyXG5cdFx0dmFyIGVuZFBvcyA9IGZpZWxkLnNlbGVjdGlvbkVuZDtcclxuXHRcdGZpZWxkLnZhbHVlID0gZmllbGQudmFsdWUuc3Vic3RyaW5nKDAsIHN0YXJ0UG9zKSArIHZhbHVlICsgZmllbGQudmFsdWUuc3Vic3RyaW5nKGVuZFBvcywgZmllbGQudmFsdWUubGVuZ3RoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZmllbGQudmFsdWUgKz0gdmFsdWU7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBBcnJheSBvZiBhamF4IGVycm9yIGhhbmRsZXJzXHJcbi8vIEV4YW1wbGUgb2YgdXNlOlxyXG4vLyBhamF4RXJyb3JIYW5kbGVycy5wdXNoKHtmdW5jOiBteUVycm9ySGFuZGxlcn0pO1xyXG4vLyBhamF4U3VjY2Vzc0hhbmRsZXJzLnB1c2goe2Z1bmM6IG15U3VjY2Vzc0hhbmRsZXJ9KTtcclxudmFyIGFqYXhFcnJvckhhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbnZhciBhamF4U3VjY2Vzc0hhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbi8vIEFKQVggZW5hYmxlbWVudCBkZWZhdWx0cyB0byBmYWxzZVxyXG52YXIgYWpheEVuYWJsZWQgPSBmYWxzZTtcclxuLy8gUmVxdWlyZWQgdG8gY2FsY3VsYXRlIHBhdGhzXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcblx0dmFyIGFqYXhDdXJyZW50QmFzZSA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgkKCdiYXNlJykuZXEoMCkuYXR0cignaHJlZicpLCAnJykucmVwbGFjZSgvXFw/LiokLywgJycpLnJlcGxhY2UoLyMuKiQvLCAnJyk7XHJcbn1cclxuLy8gVGhpcyBmbGFnIGluZGljYXRlcyB0aGF0IEFKQVgraGlzdG9yeSBoYXMgYmVlbiB1c2VkIG9uIHRoaXMgcGFnZVxyXG4vLyBJdCBtZWFucyB0aGF0IFwiI1wiIG9yIGhvbWUgbGluayBzaG91bGQgYmUgbG9hZGVkIHZpYSBhamF4IHRvb1xyXG52YXIgYWpheFVzZWQgPSBmYWxzZTtcclxuLy8gR2xvYmFsIGZsYWcgdG8gbGV0IGV2ZXJ5Ym9keSBrbm93IHRoYXQgQUpBWCBoYXMgZmFpbGVkXHJcbnZhciBhamF4RXJyb3IgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBBSkFYIGhlbHBlciBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge2hhc2h9IHNldHRpbmdzIEEgaGFzaHRhYmxlIHdpdGggc2V0dGluZ3NcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhTZW5kKHNldHRpbmdzKSB7XHJcblx0dmFyIG1ldGhvZCA9IHNldHRpbmdzLm1ldGhvZCA/IHNldHRpbmdzLm1ldGhvZC50b1VwcGVyQ2FzZSgpIDogJ0dFVCc7XHJcblx0dmFyIGRhdGEgPSBzZXR0aW5ncy5kYXRhIHx8ICcnO1xyXG5cdHZhciB1cmwgPSBzZXR0aW5ncy51cmwgfHwgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLmF0dHIoJ2FjdGlvbicpO1xyXG5cdGlmIChtZXRob2QgPT09ICdQT1NUJykge1xyXG5cdFx0ZGF0YSArPSAnJicgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fSBlbHNlIGlmIChzZXR0aW5ncy5mb3JtSWQpIHtcclxuXHRcdHZhciBzZXAgPSB1cmwuaW5kZXhPZignPycpID4gMCA/ICcmJyA6ICc/JztcclxuXHRcdHVybCArPSBzZXAgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fVxyXG5cdCQuYWpheCh7XHJcblx0XHR0eXBlOiBtZXRob2QsXHJcblx0XHR1cmw6IGVuY29kZVVSSWZpeCh1cmwpLFxyXG5cdFx0ZGF0YTogZGF0YSxcclxuXHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZClcclxuXHRcdFx0XHRcdC5hcHBlbmQoJzxzcGFuIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6JyArICgkKCcjJyArIHNldHRpbmdzLmRpdklkKS53aWR0aCgpLzIgLSAxMTApICsgJ3B4O3RvcDonICsgKCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhlaWdodCgpLzIgLSA5KSArICdweDtcIiBjbGFzcz1cImxvYWRpbmdcIiBpZD1cImxvYWRpbmdcIj48aW1nIHNyYz1cIi4vaW1hZ2VzL3NwaW5uZXIuZ2lmXCIgYWx0PVwibG9hZGluZ1wiLz48L3NwYW4+JykuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0c3VjY2VzczogZnVuY3Rpb24obXNnKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjbG9hZGluZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2ZhZGVpbikge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhpZGUoKS5odG1sKG1zZykuZmFkZUluKDUwMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaHRtbChtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWpheFN1Y2Nlc3NIYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmKGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYylcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYyhtc2cpO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0obXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGVycm9yOiBmdW5jdGlvbihtc2cpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyNsb2FkaW5nJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93ZmFkZWluKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGlkZSgpLmh0bWwobXNnKS5mYWRlSW4oNTAwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5odG1sKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoYWpheEVycm9ySGFuZGxlcnNbaV0uZnVuYykge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXS5mdW5jKG1zZyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXShtc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhbGVydCgnQUpBWCBlcnJvcjogJyArIG1zZyk7XHJcblx0XHRcdFx0YWpheEVycm9yID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3VicGFnZSBsb2FkZXIgd2l0aCBoaXN0b3J5IHN1cHBvcnRcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggQSBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4UGFnZUxvYWQoaGFzaCkge1xyXG4gICAgaWYgKGhhc2ggIT09ICcnKSB7XHJcblx0XHRoYXNoLnJlcGxhY2UoL14jLywgJycpO1xyXG5cdH1cclxuXHR2YXIgbSA9IGhhc2gubWF0Y2goL15nZXQoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuICAgICAgICB2YXIgdXJsID0gbVsyXS5pbmRleE9mKCc7JykgPiAwID8gbVsyXS5yZXBsYWNlKCc7JywgJz8nKSA6IGFqYXhDdXJyZW50QmFzZSArICc/JyArIGRlY29kZVVSSUNvbXBvbmVudChtWzJdKTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogJ0dFVCcsXHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRkaXZJZDogbVsxXSA/IG1bMV0uc3Vic3RyKDEpIDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAoaGFzaCA9PT0gJycgJiYgYWpheFVzZWQpIHtcclxuXHRcdC8vIGFqYXggaG9tZVxyXG5cdFx0cmV0dXJuIGFqYXhTZW5kICh7XHJcblx0XHRcdHVybDogbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLywgJycpLFxyXG5cdFx0XHRkaXZJZDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3ViZm9ybSBsb2FkZXIgd2l0aG91dCBoaXN0b3J5IHRyYWNraW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEEgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybUlkIFRhcmdldCBmb3JtIGlkIGF0dHJpYnV0ZVxyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheEZvcm1Mb2FkKGhhc2gsIGZvcm1JZCkge1xyXG5cdHZhciBtID0gaGFzaC5tYXRjaCgvXihnZXR8cG9zdCkoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuXHRcdHZhciB1cmwgPSBtWzNdLmluZGV4T2YoJzsnKSA+IDAgPyBtWzNdLnJlcGxhY2UoJzsnLCAnPycpIDogYWpheEN1cnJlbnRCYXNlICsgJz8nICsgbVszXTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogbVsxXS50b1VwcGVyQ2FzZSgpLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0ZGl2SWQ6IG1bMl0gPyBtWzJdLnN1YnN0cigxKSA6ICdhamF4QmxvY2snLFxyXG5cdFx0XHRmb3JtSWQ6IGZvcm1JZFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhamF4YWJsZSBoYXNoIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaHJlZiBMaW5rIGhyZWYgb3IgZm9ybSBhY3Rpb24gYXR0cmlidXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWwgQW4gYXR0cmlidXRlIHZhbHVlIHBvc3NpYmx5IGNvbnRhaW5pbmcgYSBoYXNoIGFkZHJlc3NcclxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1EYXRhIElzIHBhc3NlZCBmb3IgZm9ybXMgb25seSwgaXMgJ3Bvc3QnIGZvciBQT1NUIGZvcm1zXHJcbiAqIG9yIHNlcmlhbGl6ZWQgZm9ybSBkYXRhIGZvciBHRVQgZm9ybXNcclxuICogQHJldHVybiBBIHZhbGlkIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHR5cGUgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4TWFrZUhhc2goaHJlZiwgcmVsLCBmb3JtRGF0YSkge1xyXG5cdHZhciBoYXNoID0gKGZvcm1EYXRhID09ICdwb3N0JykgPyAncG9zdCcgOiAnZ2V0JztcclxuXHR2YXIgaHJlZkJhc2UsIHBhcmFtcztcclxuXHR2YXIgc2VwID0gJz8nO1xyXG5cdHZhciBtID0gcmVsID8gcmVsLm1hdGNoKC8oZ2V0fHBvc3QpKC1bXiA7XSspPyg7XFxTKik/LykgOiBmYWxzZTtcclxuXHRpZiAobSkge1xyXG5cdFx0aGFzaCA9IG1bMV07XHJcblx0XHRpZiAobVsyXSkge1xyXG5cdFx0XHRoYXNoICs9IG1bMl07XHJcblx0XHR9XHJcblx0XHRpZiAobVszXSkge1xyXG5cdFx0XHRocmVmID0gbVszXS5zdWJzdHIoMSk7XHJcblx0XHRcdHNlcCAgPSAnOyc7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gJzsnXHJcblx0aWYgKGhyZWYuaW5kZXhPZihzZXApID4gMCkge1xyXG5cdFx0aHJlZkJhc2UgPSBocmVmLnN1YnN0cigwLCBocmVmLmluZGV4T2Yoc2VwKSk7XHJcblx0XHRwYXJhbXMgPSBocmVmLnN1YnN0cihocmVmLmluZGV4T2Yoc2VwKSArIDEpO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gJyYnICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGhyZWZCYXNlID0gaHJlZjtcclxuXHRcdHBhcmFtcyA9ICcnO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gc2VwICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gaHJlZkJhc2UgPT0gYWpheEN1cnJlbnRCYXNlID8gcGFyYW1zIDogaHJlZkJhc2UgKyAnOycgKyBwYXJhbXM7XHJcblx0cmV0dXJuIGhhc2g7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFuZGFyZCBldmVudCBiaW5kaW5nc1xyXG4gKi9cclxuZnVuY3Rpb24gYmluZEhhbmRsZXJzKCkge1xyXG5cdGlmIChsb2NhdGlvbi5oYXNoID09ICcjY29tbWVudHMnIHx8IGxvY2F0aW9uLmhhc2gubWF0Y2goLyNjXFxkKy8pKSB7XHJcblx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0fVxyXG5cdCQoJy5jb21tZW50c19saW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRpZigkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScpIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0aWYobG9jYXRpb24uaHJlZi5tYXRjaCgvI2NvbW1lbnRzLykpIHtcclxuXHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHR9XHJcblxyXG5cdGlmIChhamF4RW5hYmxlZCkge1xyXG5cdFx0Ly8gQUpBWCBhdXRvLWhhbmRsaW5nXHJcblx0XHQkKCdib2R5Jykub24oJ3N1Ym1pdCcsICdmb3JtLmFqYXgnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuYXR0cignbWV0aG9kJykudG9VcHBlckNhc2UoKSA9PSAnUE9TVCcpIHtcclxuXHRcdFx0XHRhamF4Rm9ybUxvYWQoYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAncG9zdCcpLCAkKHRoaXMpLmF0dHIoJ2lkJykpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAkKHRoaXMpLnNlcmlhbGl6ZSgpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYWpheEVycm9yO1xyXG5cdFx0fSk7XHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EuYWpheCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2hyZWYnKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ3JlbCcpKTtcclxuXHRcdFx0cmV0dXJuIGFqYXhFcnJvcjtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFKQVggYWN0aW9uIGNvbmZpcm1hdGlvbnNcclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYS5jb25maXJtTGluaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdocmVmJykubWF0Y2goL21lc3NhZ2UuKzkyMC9pKSkge1xyXG5cdFx0XHRcdGlmICgkKCcjY29uZmlybUJveCcpKSB7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKCdib2R5JykucHJlcGVuZCgnPGRpdiBpZD1cImNvbmZpcm1Cb3hcIiBjbGFzcz1cImpxbVdpbmRvd1wiPjwvZGl2PicpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtKHthamF4OiQodGhpcykuYXR0cignaHJlZicpLG1vZGFsOnRydWUsb25Mb2FkOmZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmNzcygnbWFyZ2luLWxlZnQnLCAnLScrKCQoJyNjb25maXJtQm94Jykud2lkdGgoKS8yKSsncHgnKTtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykuY3NzKCdtYXJnaW4tdG9wJywgJy0nKygkKCcjY29uZmlybUJveCcpLmhlaWdodCgpLzIpKydweCcpO1xyXG5cdFx0XHRcdH19KTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbVNob3coKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIExpc3RlbiB0byBoYXNoIGNoYW5nZSBldmVudHNcclxuXHRcdCQod2luZG93KS5vbignaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhI2NvbmZpcm1ObycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJChcIiNjb25maXJtQm94XCIpLmlzKFwiLmpxbVdpbmRvd1wiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtSGlkZSgpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykucmVtb3ZlKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBJZiBwYWdlIHdhcyBsb2FkZWQgd2l0aCBoYXNoXHJcbiAgICAgICAgaWYgKGFqYXhFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiaW5kSGFuZGxlcnMoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG53aW5kb3cubmFtZSA9ICdtYWluJzsiXX0=
