/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
class CotontiApplication{async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let a=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let t of e)t in this.loadedData||a.push(t);if(a.length>0){let e=new URLSearchParams({a:"get"});a.forEach(((a,t,n)=>{e.append("data["+t+"]",a)})),e.append("_ajax",1);try{let a=await fetch("index.php?"+e.toString());if(a.ok){const e=await a.json();if(e.success)for(const a in e.data)this.loadedData[a]=e.data[a]}}catch(e){}}let t={};for(let a of e)a in this.loadedData&&(t[a]=this.loadedData[a]);return t}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let a=document.querySelectorAll(".captcha-place-holder");for(let t of a){t.innerHTML=e.captcha,this.executeScriptElements(t),t.classList.remove("captcha-place-holder","loading"),t.classList.add("captcha");const a=t.closest("form");if(null!==a){let t=a.querySelector('input[type="hidden"][name="x"]');null!==t&&t.setAttribute("value",e.x)}}}))}executeScriptElements(e){const a=e.querySelectorAll("script");Array.from(a).forEach((e=>{const a=document.createElement("script");Array.from(e.attributes).forEach((e=>{a.setAttribute(e.name,e.value)})),a.text=e.text,e.parentNode.replaceChild(a,e)}))}}let cot=new CotontiApplication;function encodeURIfix(e){return encodeURI(decodeURI(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")}function getBaseHref(){var e=document.getElementsByTagName("base")[0].href;return null==e?"/":e}function popup(e,a,t){window.open(getBaseHref()+"index.php?o="+e,"","toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width="+a+",height="+t+",left=32,top=16")}function pfs(e,a,t,n){window.open(getBaseHref()+"index.php?e=pfs&userid="+e+"&c1="+a+"&c2="+t+"&parser="+n,"PFS","status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16")}function redirect(e){location.href=e.options[e.selectedIndex].value}function toggleblock(e){var a=document.getElementById(e);return"none"==a.style.display?a.style.display="":a.style.display="none",!1}function toggleAll(e){var a=document.querySelectorAll('[id^="blk_"]');for(i=0;i<a.length;i++)"hide"==e?a[i].style.display="none":"show"==e&&(a[i].style.display="table-row-group");return!1}function insertText(e,a,t){var n=null;e||(e=document);e:for(var o=0;o<e.forms.length;o++)for(var r=0;r<e.forms[o].elements.length;r++)if(e.forms[o].elements[r].name==a){n=e.forms[o].elements[r];break e}if(!n)return!1;if(e.selection)n.focus(),e.selection.createRange().text=t;else if(n.selectionStart||0==n.selectionStart){var i=n.selectionStart,s=n.selectionEnd;n.value=n.value.substring(0,i)+t+n.value.substring(s,n.value.length)}else n.value+=t;return!0}var ajaxErrorHandlers=new Array,ajaxSuccessHandlers=new Array,ajaxEnabled=!1;if("undefined"!=typeof jQuery)var ajaxCurrentBase=location.href.replace($("base").eq(0).attr("href"),"").replace(/\?.*$/,"").replace(/#.*$/,"");var ajaxUsed=!1,ajaxError=!1;function ajaxSend(e){var a=e.method?e.method.toUpperCase():"GET",t=e.data||"",n=e.url||$("#"+e.formId).attr("action");if("POST"===a)t+="&"+$("#"+e.formId).serialize();else if(e.formId){var o=n.indexOf("?")>0?"&":"?";n+=o+$("#"+e.formId).serialize()}return $.ajax({type:a,url:encodeURIfix(n),data:t,beforeSend:function(){e.nonshowloading||$("#"+e.divId).append('<span style="position:absolute; left:'+($("#"+e.divId).width()/2-110)+"px;top:"+($("#"+e.divId).height()/2-9)+'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css("position","relative")},success:function(a){e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(a):$("#"+e.divId).hide().html(a).fadeIn(500);for(var t=0;t<ajaxSuccessHandlers.length;t++)ajaxSuccessHandlers[t].func?ajaxSuccessHandlers[t].func(a):ajaxSuccessHandlers[t](a)},error:function(a){if(e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(a):$("#"+e.divId).hide().html(a).fadeIn(500),ajaxErrorHandlers.length>0)for(var t=0;t<ajaxErrorHandlers.length;t++)ajaxErrorHandlers[t].func?ajaxErrorHandlers[t].func(a):ajaxErrorHandlers[t](a);else alert("AJAX error: "+a),ajaxError=!0}}),!1}function ajaxPageLoad(e){""!==e&&e.replace(/^#/,"");var a=e.match(/^get(-.*?)?;(.*)$/);if(a){var t=a[2].indexOf(";")>0?a[2].replace(";","?"):ajaxCurrentBase+"?"+decodeURIComponent(a[2]);return ajaxUsed=!0,ajaxSend({method:"GET",url:t,divId:a[1]?a[1].substr(1):"ajaxBlock"})}return""!==e||!ajaxUsed||ajaxSend({url:location.href.replace(/#.*$/,""),divId:"ajaxBlock"})}function ajaxFormLoad(e,a){var t=e.match(/^(get|post)(-.*?)?;(.*)$/);if(t){var n=t[3].indexOf(";")>0?t[3].replace(";","?"):ajaxCurrentBase+"?"+t[3];return ajaxUsed=!0,ajaxSend({method:t[1].toUpperCase(),url:n,divId:t[2]?t[2].substr(1):"ajaxBlock",formId:a})}return!0}function ajaxMakeHash(e,a,t){var n,o,r="post"==t?"post":"get",i="?",s=!!a&&a.match(/(get|post)(-[^ ;]+)?(;\S*)?/);return s&&(r=s[1],s[2]&&(r+=s[2]),s[3]&&(e=s[3].substr(1),i=";")),r+=";",e.indexOf(i)>0?(n=e.substr(0,e.indexOf(i)),o=e.substr(e.indexOf(i)+1),t&&"post"!=t&&(o+="&"+t)):(n=e,o="",t&&"post"!=t&&(o+=i+t)),r+=n==ajaxCurrentBase?o:n+";"+o}function bindHandlers(){("#comments"==location.hash||location.hash.match(/#c\d+/))&&$(".comments").css("display",""),$(".comments_link").click((function(){"none"==$(".comments").css("display")?$(".comments").css("display",""):$(".comments").css("display","none")})),location.href.match(/#comments/)&&$(".comments").css("display",""),ajaxEnabled&&($("body").on("submit","form.ajax",(function(){return"POST"==$(this).attr("method").toUpperCase()?ajaxFormLoad(ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),"post"),$(this).attr("id")):window.location.hash=ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),$(this).serialize()),ajaxError})),$("body").on("click","a.ajax",(function(){return window.location.hash=ajaxMakeHash($(this).attr("href").replace(/#.*$/,""),$(this).attr("rel")),ajaxError})),$("body").on("click","a.confirmLink",(function(){return!$(this).attr("href").match(/message.+920/i)||($("#confirmBox")&&$("#confirmBox").remove(),$("body").prepend('<div id="confirmBox" class="jqmWindow"></div>'),$("#confirmBox").jqm({ajax:$(this).attr("href"),modal:!0,onLoad:function(){$("#confirmBox").css("margin-left","-"+$("#confirmBox").width()/2+"px"),$("#confirmBox").css("margin-top","-"+$("#confirmBox").height()/2+"px")}}),$("#confirmBox").jqmShow(),!1)})),$(window).on("hashchange",(function(){ajaxPageLoad(window.location.hash.replace(/^#/,""))})),$("body").on("click","a#confirmNo",(function(){return!$("#confirmBox").is(".jqmWindow")||($("#confirmBox").jqmHide(),$("#confirmBox").remove(),!1)})))}"undefined"!=typeof jQuery&&$(document).ready((function(){ajaxEnabled&&""!=window.location.hash&&ajaxPageLoad(window.location.hash.replace(/^#/,"")),bindHandlers()})),window.name="main";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvdG9udGlBcHBsaWNhdGlvbi5qcyIsImJhc2UuanMiXSwibmFtZXMiOlsiQ290b250aUFwcGxpY2F0aW9uIiwibG9hZERhdGEiLCJ3aGF0IiwidW5kZWZpbmVkIiwidGhpcyIsImxvYWRlZERhdGEiLCJkYXRhVG9Mb2FkIiwiU3RyaW5nIiwiaXRlbSIsInB1c2giLCJsZW5ndGgiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhIiwiZm9yRWFjaCIsImluZGV4IiwiYXJyYXkiLCJhcHBlbmQiLCJyZXNwb25zZSIsImZldGNoIiwidG9TdHJpbmciLCJvayIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJzdWNjZXNzIiwia2V5IiwiZGF0YSIsImVycm9yIiwicmVzdWx0IiwibG9hZENhcHRjaGEiLCJ0aGVuIiwiY2FwdGNoYUVsZW1lbnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlbWVudCIsImlubmVySFRNTCIsImNhcHRjaGEiLCJleGVjdXRlU2NyaXB0RWxlbWVudHMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJmb3JtIiwiY2xvc2VzdCIsImlucHV0WCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRBdHRyaWJ1dGUiLCJ4IiwiY29udGFpbmVyRWxlbWVudCIsInNjcmlwdEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwic2NyaXB0RWxlbWVudCIsImNsb25lZEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsIm5hbWUiLCJ2YWx1ZSIsInRleHQiLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwiY290IiwiZW5jb2RlVVJJZml4Iiwic3RyIiwiZW5jb2RlVVJJIiwiZGVjb2RlVVJJIiwicmVwbGFjZSIsImdldEJhc2VIcmVmIiwiaHJlZiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicG9wdXAiLCJjb2RlIiwidyIsImgiLCJ3aW5kb3ciLCJvcGVuIiwicGZzIiwiaWQiLCJjMSIsImMyIiwicGFyc2VyIiwicmVkaXJlY3QiLCJ1cmwiLCJsb2NhdGlvbiIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwidG9nZ2xlYmxvY2siLCJibCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwidG9nZ2xlQWxsIiwiYWN0aW9uIiwiYmxrcyIsImkiLCJpbnNlcnRUZXh0IiwiZG9jT2JqIiwiZmllbGROYW1lIiwiZmllbGQiLCJmaW5kRmllbGQiLCJmb3JtcyIsImoiLCJlbGVtZW50cyIsInNlbGVjdGlvbiIsImZvY3VzIiwiY3JlYXRlUmFuZ2UiLCJzZWxlY3Rpb25TdGFydCIsInN0YXJ0UG9zIiwiZW5kUG9zIiwic2VsZWN0aW9uRW5kIiwic3Vic3RyaW5nIiwiYWpheEVycm9ySGFuZGxlcnMiLCJhamF4U3VjY2Vzc0hhbmRsZXJzIiwiYWpheEVuYWJsZWQiLCJqUXVlcnkiLCJhamF4Q3VycmVudEJhc2UiLCIkIiwiZXEiLCJhdHRyIiwiYWpheFVzZWQiLCJhamF4RXJyb3IiLCJhamF4U2VuZCIsInNldHRpbmdzIiwibWV0aG9kIiwidG9VcHBlckNhc2UiLCJmb3JtSWQiLCJzZXJpYWxpemUiLCJzZXAiLCJpbmRleE9mIiwiYWpheCIsInR5cGUiLCJiZWZvcmVTZW5kIiwibm9uc2hvd2xvYWRpbmciLCJkaXZJZCIsIndpZHRoIiwiaGVpZ2h0IiwiY3NzIiwibXNnIiwibm9uc2hvd2ZhZGVpbiIsImh0bWwiLCJoaWRlIiwiZmFkZUluIiwiZnVuYyIsImFsZXJ0IiwiYWpheFBhZ2VMb2FkIiwiaGFzaCIsIm0iLCJtYXRjaCIsImRlY29kZVVSSUNvbXBvbmVudCIsInN1YnN0ciIsImFqYXhGb3JtTG9hZCIsImFqYXhNYWtlSGFzaCIsInJlbCIsImZvcm1EYXRhIiwiaHJlZkJhc2UiLCJiaW5kSGFuZGxlcnMiLCJjbGljayIsIm9uIiwicHJlcGVuZCIsImpxbSIsIm1vZGFsIiwib25Mb2FkIiwianFtU2hvdyIsImlzIiwianFtSGlkZSIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOzs7OztBQUdB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LCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQmFzZSBDb3RvbnRpIGNsYXNzXHJcbiAqL1xyXG5jbGFzcyBDb3RvbnRpQXBwbGljYXRpb25cclxue1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGRhdGEgZnJvbSAvaW5kZXgucGhwP2E9Z2V0XHJcbiAgICAgKiBDYW4gYmUgdXNlZnVsLCBmb3IgZXhhbXBsZSB3aGVuIGl0IGlzIG5lZWRlZCB0byBsb2FkIHNvbWUgZHluYW1pYyBjb250ZW50IHRvIGNhY2hlZCBwYWdlXHJcbiAgICAgKlxyXG4gICAgICogRXhhbXBsZTpcclxuICAgICAqIGNvdC5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgKiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICogfSk7XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHdoYXQgQXJyYXkgb3Igc3RyaW5nLiBEYXRhIHRvIGxvYWQuIEZvciBleGFtcGxlLCBbJ2NhcHRjaGEnLCAneCddICh4IC0gYW50aSBYU1MgcGFyYW1ldGVyIHZhbHVlKVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e30+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkRGF0YSh3aGF0KSB7XHJcbiAgICAgICAgaWYgKCF3aGF0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlZERhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZERhdGEgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkYXRhVG9Mb2FkID0gW107XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2hhdCA9PT0gJ3N0cmluZycgfHwgd2hhdCBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICB3aGF0ID0gW3doYXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVRvTG9hZC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YVRvTG9hZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIEB0b2RvIGNoYW5nZSB0byBzeXN0ZW0gY29udHJvbGxlciB3aGVuIGl0IHdpbGwgYmUgaW1wbGVtZW50ZWRcclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe2E6ICdnZXQnLH0pO1xyXG5cclxuICAgICAgICAgICAgZGF0YVRvTG9hZC5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2RhdGFbJyArIGluZGV4ICsgJ10nLCBpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ19hamF4JywgMSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaW5kZXgucGhwPycgKyBwYXJhbXMudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhW2tleV0gPSByZXNwb25zZURhdGEuZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSFRUUCBlcnJvclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBlcnJvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICgoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaXRlbV0gPSB0aGlzLmxvYWRlZERhdGFbaXRlbV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGNhcHRjaGEgdmlhIGFqYXguIFVzZWQgb24gY2FjaGVkIHBhZ2VzLlxyXG4gICAgICovXHJcbiAgICBsb2FkQ2FwdGNoYSgpIHtcclxuICAgICAgICB0aGlzLmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgbGV0IGNhcHRjaGFFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXB0Y2hhLXBsYWNlLWhvbGRlcicpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIGNhcHRjaGFFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSByZXN1bHQuY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYXB0Y2hhLXBsYWNlLWhvbGRlcicsICdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NhcHRjaGEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gZWxlbWVudC5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFggPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZT1cInhcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRYICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0WC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmVzdWx0LngpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgeW91IGFwcGVuZCA8c2NyaXB0PiB0YWdzIHRvIHRoZSBlbGVtZW50cyBvZiB0aGUgZmluaXNoZWQgRE9NIGRvY3VtZW50LCB0aGV5IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKiBUaGUgbWV0aG9kIGV4ZWN1dGVzIDxzY3JpcHQ+IHNjcmlwdHMgbmVzdGVkIGluIHRoZSBzcGVjaWZpZWQgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsZW1lbnQgTm9kZVxyXG4gICAgICovXHJcbiAgICBleGVjdXRlU2NyaXB0RWxlbWVudHMoY29udGFpbmVyRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnRzID0gY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKTtcclxuXHJcbiAgICAgICAgQXJyYXkuZnJvbShzY3JpcHRFbGVtZW50cykuZm9yRWFjaCgoc2NyaXB0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjbG9uZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudC5hdHRyaWJ1dGVzKS5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsb25lZEVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC50ZXh0ID0gc2NyaXB0RWxlbWVudC50ZXh0O1xyXG4gICAgICAgICAgICBzY3JpcHRFbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lZEVsZW1lbnQsIHNjcmlwdEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgY290ID0gbmV3IENvdG9udGlBcHBsaWNhdGlvbigpO1xyXG4iLCJmdW5jdGlvbiBlbmNvZGVVUklmaXgoc3RyKSB7XHJcblx0Ly8gdG8gcHJldmVudCB0d2ljZSBlbmNvZGluZ1xyXG5cdC8vIGFuZCBmaXggJ1snLCddJyBzaWducyB0byBmb2xsb3cgUkZDMzk4NiAoc2VjdGlvbi0zLjIuMilcclxuXHRyZXR1cm4gZW5jb2RlVVJJKGRlY29kZVVSSShzdHIpKS5yZXBsYWNlKC8lNUIvZywgJ1snKS5yZXBsYWNlKC8lNUQvZywgJ10nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QmFzZUhyZWYoKSB7XHJcblx0dmFyIGhyZWYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdLmhyZWY7XHJcblx0aWYgKGhyZWYgPT0gbnVsbCkge1xyXG5cdFx0cmV0dXJuICcvJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIGhyZWY7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1cChjb2RlLCB3LCBoKXtcclxuICAgIHdpbmRvdy5vcGVuKGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP289JyArIGNvZGUsICcnLCAndG9vbGJhcj0wLGxvY2F0aW9uPTAsZGlyZWN0b3JpZXM9MCxtZW51QmFyPTAscmVzaXphYmxlPTAsc2Nyb2xsYmFycz15ZXMsd2lkdGg9JyArIHcgKyAnLGhlaWdodD0nICsgaCArICcsbGVmdD0zMix0b3A9MTYnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0b2RvIG1vdmUgdG8gcGZzIG1vZHVsZVxyXG4gKi9cclxuZnVuY3Rpb24gcGZzKGlkLCBjMSwgYzIsIHBhcnNlcil7XHJcbiAgICB3aW5kb3cub3BlbihcclxuXHRcdGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP2U9cGZzJnVzZXJpZD0nICsgaWQgKyAnJmMxPScgKyBjMSArICcmYzI9JyArIGMyICsgJyZwYXJzZXI9JyArIHBhcnNlcixcclxuXHRcdCdQRlMnLFxyXG5cdFx0J3N0YXR1cz0xLCB0b29sYmFyPTAsbG9jYXRpb249MCxkaXJlY3Rvcmllcz0wLG1lbnVCYXI9MCxyZXNpemFibGU9MSxzY3JvbGxiYXJzPXllcyx3aWR0aD03NTQsaGVpZ2h0PTUxMixsZWZ0PTMyLHRvcD0xNidcclxuXHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWRpcmVjdCh1cmwpe1xyXG4gICAgbG9jYXRpb24uaHJlZiA9IHVybC5vcHRpb25zW3VybC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlYmxvY2soaWQpe1xyXG4gICAgdmFyIGJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKGJsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUFsbChhY3Rpb24pIHtcclxuXHR2YXIgYmxrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZF49XCJibGtfXCJdJyk7XHJcblx0Zm9yIChpID0gMDsgaSA8IGJsa3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmIChhY3Rpb24gPT0gJ2hpZGUnKSB7XHJcblx0XHRcdGJsa3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdH0gZWxzZSBpZiAoYWN0aW9uID09ICdzaG93Jykge1xyXG5cdFx0XHRibGtzW2ldLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93LWdyb3VwJztcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyBJbnNlcnRzIHRleHQgaW50byB0ZXh0YXJlYSBhdCBjdXJzb3IgcG9zaXRpb25cclxuZnVuY3Rpb24gaW5zZXJ0VGV4dChkb2NPYmosIGZpZWxkTmFtZSwgdmFsdWUpIHtcclxuXHR2YXIgZmllbGQgPSBudWxsO1xyXG5cdGlmICghZG9jT2JqKSB7XHJcblx0XHRkb2NPYmogPSBkb2N1bWVudDtcclxuXHR9XHJcblx0Ly8gRmluZCB0aGUgZmllbGQgaW4gdGhlIGRvY09ialxyXG5cdGZpbmRGaWVsZDpcclxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRvY09iai5mb3Jtcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb2NPYmouZm9ybXNbaV0uZWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0aWYgKGRvY09iai5mb3Jtc1tpXS5lbGVtZW50c1tqXS5uYW1lID09IGZpZWxkTmFtZSkge1xyXG5cdFx0XHRcdGZpZWxkID0gZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzW2pdO1xyXG5cdFx0XHRcdGJyZWFrIGZpbmRGaWVsZDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoIWZpZWxkKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBJbnNlcnQgdGhlIHRleHRcclxuXHRpZiAoZG9jT2JqLnNlbGVjdGlvbikge1xyXG5cdFx0Ly8gTVNJRSBhbmQgT3BlcmFcclxuXHRcdGZpZWxkLmZvY3VzKCk7XHJcblx0XHR2YXIgc2VsID0gZG9jT2JqLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xyXG5cdFx0c2VsLnRleHQgPSB2YWx1ZTtcclxuXHR9IGVsc2UgaWYgKGZpZWxkLnNlbGVjdGlvblN0YXJ0IHx8IGZpZWxkLnNlbGVjdGlvblN0YXJ0ID09IDApIHtcclxuXHRcdC8vIE1vemlsbGFcclxuXHRcdHZhciBzdGFydFBvcyA9IGZpZWxkLnNlbGVjdGlvblN0YXJ0O1xyXG5cdFx0dmFyIGVuZFBvcyA9IGZpZWxkLnNlbGVjdGlvbkVuZDtcclxuXHRcdGZpZWxkLnZhbHVlID0gZmllbGQudmFsdWUuc3Vic3RyaW5nKDAsIHN0YXJ0UG9zKSArIHZhbHVlICsgZmllbGQudmFsdWUuc3Vic3RyaW5nKGVuZFBvcywgZmllbGQudmFsdWUubGVuZ3RoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZmllbGQudmFsdWUgKz0gdmFsdWU7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBBcnJheSBvZiBhamF4IGVycm9yIGhhbmRsZXJzXHJcbi8vIEV4YW1wbGUgb2YgdXNlOlxyXG4vLyBhamF4RXJyb3JIYW5kbGVycy5wdXNoKHtmdW5jOiBteUVycm9ySGFuZGxlcn0pO1xyXG4vLyBhamF4U3VjY2Vzc0hhbmRsZXJzLnB1c2goe2Z1bmM6IG15U3VjY2Vzc0hhbmRsZXJ9KTtcclxudmFyIGFqYXhFcnJvckhhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbnZhciBhamF4U3VjY2Vzc0hhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbi8vIEFKQVggZW5hYmxlbWVudCBkZWZhdWx0cyB0byBmYWxzZVxyXG52YXIgYWpheEVuYWJsZWQgPSBmYWxzZTtcclxuLy8gUmVxdWlyZWQgdG8gY2FsY3VsYXRlIHBhdGhzXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcblx0dmFyIGFqYXhDdXJyZW50QmFzZSA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgkKCdiYXNlJykuZXEoMCkuYXR0cignaHJlZicpLCAnJykucmVwbGFjZSgvXFw/LiokLywgJycpLnJlcGxhY2UoLyMuKiQvLCAnJyk7XHJcbn1cclxuLy8gVGhpcyBmbGFnIGluZGljYXRlcyB0aGF0IEFKQVgraGlzdG9yeSBoYXMgYmVlbiB1c2VkIG9uIHRoaXMgcGFnZVxyXG4vLyBJdCBtZWFucyB0aGF0IFwiI1wiIG9yIGhvbWUgbGluayBzaG91bGQgYmUgbG9hZGVkIHZpYSBhamF4IHRvb1xyXG52YXIgYWpheFVzZWQgPSBmYWxzZTtcclxuLy8gR2xvYmFsIGZsYWcgdG8gbGV0IGV2ZXJ5Ym9keSBrbm93IHRoYXQgQUpBWCBoYXMgZmFpbGVkXHJcbnZhciBhamF4RXJyb3IgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBBSkFYIGhlbHBlciBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge2hhc2h9IHNldHRpbmdzIEEgaGFzaHRhYmxlIHdpdGggc2V0dGluZ3NcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhTZW5kKHNldHRpbmdzKSB7XHJcblx0dmFyIG1ldGhvZCA9IHNldHRpbmdzLm1ldGhvZCA/IHNldHRpbmdzLm1ldGhvZC50b1VwcGVyQ2FzZSgpIDogJ0dFVCc7XHJcblx0dmFyIGRhdGEgPSBzZXR0aW5ncy5kYXRhIHx8ICcnO1xyXG5cdHZhciB1cmwgPSBzZXR0aW5ncy51cmwgfHwgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLmF0dHIoJ2FjdGlvbicpO1xyXG5cdGlmIChtZXRob2QgPT09ICdQT1NUJykge1xyXG5cdFx0ZGF0YSArPSAnJicgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fSBlbHNlIGlmIChzZXR0aW5ncy5mb3JtSWQpIHtcclxuXHRcdHZhciBzZXAgPSB1cmwuaW5kZXhPZignPycpID4gMCA/ICcmJyA6ICc/JztcclxuXHRcdHVybCArPSBzZXAgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fVxyXG5cdCQuYWpheCh7XHJcblx0XHR0eXBlOiBtZXRob2QsXHJcblx0XHR1cmw6IGVuY29kZVVSSWZpeCh1cmwpLFxyXG5cdFx0ZGF0YTogZGF0YSxcclxuXHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZClcclxuXHRcdFx0XHRcdC5hcHBlbmQoJzxzcGFuIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6JyArICgkKCcjJyArIHNldHRpbmdzLmRpdklkKS53aWR0aCgpLzIgLSAxMTApICsgJ3B4O3RvcDonICsgKCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhlaWdodCgpLzIgLSA5KSArICdweDtcIiBjbGFzcz1cImxvYWRpbmdcIiBpZD1cImxvYWRpbmdcIj48aW1nIHNyYz1cIi4vaW1hZ2VzL3NwaW5uZXIuZ2lmXCIgYWx0PVwibG9hZGluZ1wiLz48L3NwYW4+JykuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0c3VjY2VzczogZnVuY3Rpb24obXNnKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjbG9hZGluZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2ZhZGVpbikge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhpZGUoKS5odG1sKG1zZykuZmFkZUluKDUwMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaHRtbChtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWpheFN1Y2Nlc3NIYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmKGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYylcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYyhtc2cpO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0obXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGVycm9yOiBmdW5jdGlvbihtc2cpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyNsb2FkaW5nJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93ZmFkZWluKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGlkZSgpLmh0bWwobXNnKS5mYWRlSW4oNTAwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5odG1sKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoYWpheEVycm9ySGFuZGxlcnNbaV0uZnVuYykge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXS5mdW5jKG1zZyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXShtc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhbGVydCgnQUpBWCBlcnJvcjogJyArIG1zZyk7XHJcblx0XHRcdFx0YWpheEVycm9yID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3VicGFnZSBsb2FkZXIgd2l0aCBoaXN0b3J5IHN1cHBvcnRcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggQSBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4UGFnZUxvYWQoaGFzaCkge1xyXG4gICAgaWYgKGhhc2ggIT09ICcnKSB7XHJcblx0XHRoYXNoLnJlcGxhY2UoL14jLywgJycpO1xyXG5cdH1cclxuXHR2YXIgbSA9IGhhc2gubWF0Y2goL15nZXQoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuICAgICAgICB2YXIgdXJsID0gbVsyXS5pbmRleE9mKCc7JykgPiAwID8gbVsyXS5yZXBsYWNlKCc7JywgJz8nKSA6IGFqYXhDdXJyZW50QmFzZSArICc/JyArIGRlY29kZVVSSUNvbXBvbmVudChtWzJdKTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogJ0dFVCcsXHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRkaXZJZDogbVsxXSA/IG1bMV0uc3Vic3RyKDEpIDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAoaGFzaCA9PT0gJycgJiYgYWpheFVzZWQpIHtcclxuXHRcdC8vIGFqYXggaG9tZVxyXG5cdFx0cmV0dXJuIGFqYXhTZW5kICh7XHJcblx0XHRcdHVybDogbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLywgJycpLFxyXG5cdFx0XHRkaXZJZDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3ViZm9ybSBsb2FkZXIgd2l0aG91dCBoaXN0b3J5IHRyYWNraW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEEgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybUlkIFRhcmdldCBmb3JtIGlkIGF0dHJpYnV0ZVxyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheEZvcm1Mb2FkKGhhc2gsIGZvcm1JZCkge1xyXG5cdHZhciBtID0gaGFzaC5tYXRjaCgvXihnZXR8cG9zdCkoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuXHRcdHZhciB1cmwgPSBtWzNdLmluZGV4T2YoJzsnKSA+IDAgPyBtWzNdLnJlcGxhY2UoJzsnLCAnPycpIDogYWpheEN1cnJlbnRCYXNlICsgJz8nICsgbVszXTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogbVsxXS50b1VwcGVyQ2FzZSgpLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0ZGl2SWQ6IG1bMl0gPyBtWzJdLnN1YnN0cigxKSA6ICdhamF4QmxvY2snLFxyXG5cdFx0XHRmb3JtSWQ6IGZvcm1JZFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhamF4YWJsZSBoYXNoIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaHJlZiBMaW5rIGhyZWYgb3IgZm9ybSBhY3Rpb24gYXR0cmlidXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWwgQW4gYXR0cmlidXRlIHZhbHVlIHBvc3NpYmx5IGNvbnRhaW5pbmcgYSBoYXNoIGFkZHJlc3NcclxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1EYXRhIElzIHBhc3NlZCBmb3IgZm9ybXMgb25seSwgaXMgJ3Bvc3QnIGZvciBQT1NUIGZvcm1zXHJcbiAqIG9yIHNlcmlhbGl6ZWQgZm9ybSBkYXRhIGZvciBHRVQgZm9ybXNcclxuICogQHJldHVybiBBIHZhbGlkIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHR5cGUgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4TWFrZUhhc2goaHJlZiwgcmVsLCBmb3JtRGF0YSkge1xyXG5cdHZhciBoYXNoID0gKGZvcm1EYXRhID09ICdwb3N0JykgPyAncG9zdCcgOiAnZ2V0JztcclxuXHR2YXIgaHJlZkJhc2UsIHBhcmFtcztcclxuXHR2YXIgc2VwID0gJz8nO1xyXG5cdHZhciBtID0gcmVsID8gcmVsLm1hdGNoKC8oZ2V0fHBvc3QpKC1bXiA7XSspPyg7XFxTKik/LykgOiBmYWxzZTtcclxuXHRpZiAobSkge1xyXG5cdFx0aGFzaCA9IG1bMV07XHJcblx0XHRpZiAobVsyXSkge1xyXG5cdFx0XHRoYXNoICs9IG1bMl07XHJcblx0XHR9XHJcblx0XHRpZiAobVszXSkge1xyXG5cdFx0XHRocmVmID0gbVszXS5zdWJzdHIoMSk7XHJcblx0XHRcdHNlcCAgPSAnOyc7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gJzsnXHJcblx0aWYgKGhyZWYuaW5kZXhPZihzZXApID4gMCkge1xyXG5cdFx0aHJlZkJhc2UgPSBocmVmLnN1YnN0cigwLCBocmVmLmluZGV4T2Yoc2VwKSk7XHJcblx0XHRwYXJhbXMgPSBocmVmLnN1YnN0cihocmVmLmluZGV4T2Yoc2VwKSArIDEpO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gJyYnICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGhyZWZCYXNlID0gaHJlZjtcclxuXHRcdHBhcmFtcyA9ICcnO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gc2VwICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gaHJlZkJhc2UgPT0gYWpheEN1cnJlbnRCYXNlID8gcGFyYW1zIDogaHJlZkJhc2UgKyAnOycgKyBwYXJhbXM7XHJcblx0cmV0dXJuIGhhc2g7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFuZGFyZCBldmVudCBiaW5kaW5nc1xyXG4gKi9cclxuZnVuY3Rpb24gYmluZEhhbmRsZXJzKCkge1xyXG5cdGlmIChsb2NhdGlvbi5oYXNoID09ICcjY29tbWVudHMnIHx8IGxvY2F0aW9uLmhhc2gubWF0Y2goLyNjXFxkKy8pKSB7XHJcblx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0fVxyXG5cdCQoJy5jb21tZW50c19saW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRpZigkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScpIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0aWYobG9jYXRpb24uaHJlZi5tYXRjaCgvI2NvbW1lbnRzLykpIHtcclxuXHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHR9XHJcblxyXG5cdGlmIChhamF4RW5hYmxlZCkge1xyXG5cdFx0Ly8gQUpBWCBhdXRvLWhhbmRsaW5nXHJcblx0XHQkKCdib2R5Jykub24oJ3N1Ym1pdCcsICdmb3JtLmFqYXgnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuYXR0cignbWV0aG9kJykudG9VcHBlckNhc2UoKSA9PSAnUE9TVCcpIHtcclxuXHRcdFx0XHRhamF4Rm9ybUxvYWQoYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAncG9zdCcpLCAkKHRoaXMpLmF0dHIoJ2lkJykpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAkKHRoaXMpLnNlcmlhbGl6ZSgpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYWpheEVycm9yO1xyXG5cdFx0fSk7XHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EuYWpheCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2hyZWYnKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ3JlbCcpKTtcclxuXHRcdFx0cmV0dXJuIGFqYXhFcnJvcjtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFKQVggYWN0aW9uIGNvbmZpcm1hdGlvbnNcclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYS5jb25maXJtTGluaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdocmVmJykubWF0Y2goL21lc3NhZ2UuKzkyMC9pKSkge1xyXG5cdFx0XHRcdGlmICgkKCcjY29uZmlybUJveCcpKSB7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKCdib2R5JykucHJlcGVuZCgnPGRpdiBpZD1cImNvbmZpcm1Cb3hcIiBjbGFzcz1cImpxbVdpbmRvd1wiPjwvZGl2PicpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtKHthamF4OiQodGhpcykuYXR0cignaHJlZicpLG1vZGFsOnRydWUsb25Mb2FkOmZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmNzcygnbWFyZ2luLWxlZnQnLCAnLScrKCQoJyNjb25maXJtQm94Jykud2lkdGgoKS8yKSsncHgnKTtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykuY3NzKCdtYXJnaW4tdG9wJywgJy0nKygkKCcjY29uZmlybUJveCcpLmhlaWdodCgpLzIpKydweCcpO1xyXG5cdFx0XHRcdH19KTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbVNob3coKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIExpc3RlbiB0byBoYXNoIGNoYW5nZSBldmVudHNcclxuXHRcdCQod2luZG93KS5vbignaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhI2NvbmZpcm1ObycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJChcIiNjb25maXJtQm94XCIpLmlzKFwiLmpxbVdpbmRvd1wiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtSGlkZSgpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykucmVtb3ZlKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBJZiBwYWdlIHdhcyBsb2FkZWQgd2l0aCBoYXNoXHJcbiAgICAgICAgaWYgKGFqYXhFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiaW5kSGFuZGxlcnMoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG53aW5kb3cubmFtZSA9ICdtYWluJzsiXX0=
