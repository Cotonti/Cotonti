/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
function encodeURIfix(e){return encodeURI(decodeURI(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")}function getBaseHref(){var e=document.getElementsByTagName("base")[0].href;return null==e?"/":e}function popup(e,t,n){window.open(getBaseHref()+"index.php?o="+e,"","toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width="+t+",height="+n+",left=32,top=16")}function pfs(e,t,n,o){window.open(getBaseHref()+"index.php?e=pfs&userid="+e+"&c1="+t+"&c2="+n+"&parser="+o,"PFS","status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16")}function redirect(e){location.href=e.options[e.selectedIndex].value}function toggleblock(e){var t=document.getElementById(e);return"none"==t.style.display?t.style.display="":t.style.display="none",!1}function toggleAll(e){var t=document.querySelectorAll('[id^="blk_"]');for(i=0;i<t.length;i++)"hide"==e?t[i].style.display="none":"show"==e&&(t[i].style.display="table-row-group");return!1}function insertText(e,t,n){var o=null;e||(e=document);e:for(var s=0;s<e.forms.length;s++)for(var a=0;a<e.forms[s].elements.length;a++)if(e.forms[s].elements[a].name==t){o=e.forms[s].elements[a];break e}if(!o)return!1;if(e.selection)o.focus(),e.selection.createRange().text=n;else if(o.selectionStart||0==o.selectionStart){var i=o.selectionStart,r=o.selectionEnd;o.value=o.value.substring(0,i)+n+o.value.substring(r,o.value.length)}else o.value+=n;return!0}(()=>{"use strict";class e extends EventTarget{mode="production";driverType="";constructor(e,t=null){super(),this.driverType=e,null!==t&&(this.mode=t),this.init()}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsClient: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class t extends EventTarget{mode="production";eventsUrl=null;constructor(e,t=null){super(),null!==t&&""!==t&&(this.mode=t),this.eventsUrl=e}init(){}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsDriver: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class n extends t{#e=null;init(){null===this.#e&&("production"!==this.mode&&console.log("init ServerEventsSSEDriver. ",this.eventsUrl),this.#e=new EventSource(this.eventsUrl),"production"!==this.mode&&(this.#e.onopen=function(e){console.log("ServerEventsSSEDriver connection is open")}),this.#e.onmessage=e=>{const t=JSON.parse(e.data);void 0!==t.data&&"string"==typeof t.data&&""!==t.data&&(t.data=JSON.parse(t.data)),t.eventId=e.lastEventId,this.onEventTriggered(t)},"production"!==this.mode&&(this.#e.onerror=function(e){console.log("ServerEventsSSEDriver connection error")}))}}class o extends t{#t=3e3;#n=null;#o=!1;init(){this.#o||(this.#o=!0,"production"!==this.mode&&console.log("init ServerEventsAjaxDriver ",this.eventsUrl),this.#n=setTimeout((()=>this.#s()),500))}async#s(){try{const e=await fetch(this.eventsUrl);if(!e.ok)throw new Error(`Response status: ${e.status}`);const t=await e.json();void 0!==t.events&&t.events.forEach((e=>{e.eventId=void 0!==e.id?e.id:null,this.onEventTriggered(e)})),this.#n=setTimeout((()=>this.#s()),this.#t)}catch(e){console.log("ServerEventsAjaxDriver get events error: "+e.message),this.#n=setTimeout((()=>this.#s()),this.#t)}}}class s{#a="/";#i="production";constructor(e=null,t=null){null!==e&&(this.#a=e),null!==t&&(this.#i=t)}getByType(e){let t=null;const s=this.#a+"?n=server-events&a=sse",a=this.#a+"?n=server-events&a=ajax&_ajax=1";return"sse"===e?(t=new n(s),"production"!==this.#i&&console.log("using ServerEventsSSEDriver",s)):(t=new o(a),"production"!==this.#i&&console.log("using ServerEventsAjaxDriver",a)),t}}class a extends e{init(){"production"!==this.mode&&console.log("init ServerEventsClient");const e=new s(getBaseHref(),this.mode).getByType(this.driverType,this.mode);e.addEventListener("event",(e=>{this.onEventTriggered(e.detail)})),e.init()}}class i extends e{init(){let e="/js/sharedWorkerServerEvents.min.js";"production"!==this.mode&&console.log("init ServerEventsSharedWorkerClient: "+e);try{const t=new SharedWorker(e).port;t.postMessage({config:{mode:this.mode,driver:this.driverType,baseUrl:getBaseHref()}}),t.onmessage=e=>{"production"!==this.mode&&console.log("ServerSentEventsSharedWorker event",e.data),this.onEventTriggered(e.data)}}catch(e){console.error(e)}}}class r{mode="production";#r=null;#l="sharedWorker";#d="sse";#c=null;constructor(){this.#c=new Map,this.#d=cot.cfg.serverEvents}addObserver(e,t,n){"none"!==cot.cfg.serverEvents&&(this.#c.set(e,{name:e,event:t,onEvent:n}),null===this.#r&&this.#h())}#h(){"none"!==cot.cfg.serverEvents&&("sharedWorker"===this.#l&&void 0!==typeof SharedWorker?("production"!==this.mode&&console.log("creating ServerEventsSharedWorkerClient"),this.#r=new i(this.#d,this.mode)):("production"!==this.mode&&console.log("creating ServerEventsClient"),this.#r=new a(this.#d,this.mode)),this.#r.addEventListener("event",(e=>{this.#u(e.detail)})))}#u(e){"production"!==this.mode&&console.log("Server triggered event",e),this.#c.forEach((t=>{t.event===e.event&&"function"==typeof t.onEvent&&t.onEvent(e)}))}}class l{static containerClass="toast-container position-fixed bottom-0 end-0 p-3";title="";message="";hint="";type="";delay=5e3;#m=null;constructor(e,t="",n="",o=""){void 0!==window.bootstrap?(this.title=t,this.message=e,this.hint=n,this.type=o):console.error('Bootstrap is not found. It is required for use "Toast" component')}show(){if(null===this.#m){let e=document.getElementById("toast-container");null===e&&(e=this.#v()),this.#m=e}const e=`<strong class="me-auto">${this.title}</strong>`,t=""!==this.hint?`<small>${this.hint}</small>`:"",n=`<div class="toast${""!==this.type?` text-bg-${this.type}`:""}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="${this.delay}"><div class="toast-header">${e}${t}<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div><div class="toast-body">${this.message}</div></div>`,o=document.createElement("div");o.innerHTML=n;const s=o.firstElementChild;this.#m.appendChild(s),new window.bootstrap.Toast(s).show(),this.#m.lastElementChild.addEventListener("hidden.bs.toast",(()=>{s.remove(),""===this.#m.innerHTML&&(this.#m.remove(),this.#m=null)}))}#v(){const e=document.createElement("div");return e.id="toast-container",e.className=l.containerClass,document.body.append(e),e}}class d{title="";content="";buttons=null;centered=!1;dialogClass="modal-dialog";#p=null;constructor(e,t="",n=null){void 0!==window.bootstrap?(this.title=t,this.content=e,this.buttons=n):console.error('Bootstrap is not found. It is required for use "Modal" component')}show(){let e=this.dialogClass;this.centered&&(e+=" modal-dialog-centered");const t=`<div class="modal fade" id="CotontiDynamicModal" tabindex="-1" aria-labelledby="CotontiDynamicModalLabel" aria-hidden="true"><div class="${e}"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="CotontiDynamicModalLabel">${this.title}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">${this.content}</div><div class="modal-footer"></div></div></div></div>`,n=document.createElement("div");n.innerHTML=t,this.#p=n.firstElementChild,this.#f(),document.body.appendChild(this.#p),new bootstrap.Modal(this.#p).show(),this.#p.addEventListener("hidden.bs.modal",(()=>{this.#p.remove()}))}#f(){const e=this.#g();if(""===e||e===[])return;const t=this.#p.querySelector(".modal-footer");"string"!=typeof e?Array.isArray(e)&&e.forEach((e=>{"string"!=typeof e?t.appendChild(e):t.innerHTML+=e})):t.innerHTML=e}#g(){const e=[];let t=this.buttons;return t===[]?e:null===t?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':"string"==typeof t?t:(Array.isArray(t)&&t.forEach((t=>{if("string"==typeof t)return void e.push(t);const n=document.createElement("button");void 0!==t.label&&(n.innerHTML=t.label),n.setAttribute("type",void 0!==t.btnType?t.btnType:"button"),n.classList.add("btn"),void 0!==t.type&&n.classList.add("btn-"+t.type),void 0!==t.closeOnClick&&!0===t.closeOnClick&&n.setAttribute("data-bs-dismiss","modal"),void 0!==t.onClick&&"function"==typeof t.onClick&&n.addEventListener("click",(e=>t.onClick(e))),e.push(n)})),e)}}window.cot=new class{cfg={};L={};#y=null;init(e){void 0!==e.config&&(this.cfg=e.config),void 0!==e.lang&&(this.L=e.lang)}getServerEvents(){return null===this.#y&&(this.#y=new r),this.#y}confirm(e,t,n,o="Ok",s="Cancel"){this.modal(e,t,[{label:o,onClick:e=>n(e),type:"primary",closeOnClick:!0},{label:s,closeOnClick:!0,type:"secondary"}])}getModal(e,t="",n=null){return new d(e,t,n)}modal(e,t="",n=null){const o=this.getModal(e,t,n);return o.show(),o}getToast(e,t="",n="",o=""){return new l(e,t,n,o)}toast(e,t="",n="",o="",s=5e3){const a=this.getToast(e,t,n,o);return null!==s&&(a.delay=s),a.show(),a}async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let t=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let n of e)n in this.loadedData||t.push(n);if(t.length>0){let n=new URLSearchParams({n:"main",a:"get"});t.forEach(((e,t,o)=>{n.append("data["+t+"]",e)})),n.append("_ajax",1);try{let e=await fetch("index.php?"+n.toString());if(e.ok){const t=await e.json();if(t.success)for(const e in t.data)this.loadedData[e]=t.data[e]}}catch(e){}}let n={};for(let t of e)t in this.loadedData&&(n[t]=this.loadedData[t]);return n}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let t=document.querySelectorAll(".captcha-place-holder");for(let n of t){n.innerHTML=e.captcha,this.executeScriptElements(n),n.classList.remove("captcha-place-holder","loading"),n.classList.add("captcha");const t=n.closest("form");if(null!==t){let n=t.querySelector('input[type="hidden"][name="x"]');null!==n&&n.setAttribute("value",e.x)}}}))}executeScriptElements(e){const t=e.querySelectorAll("script");Array.from(t).forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.text=e.text,e.parentNode.replaceChild(t,e)}))}}})();var ajaxErrorHandlers=new Array,ajaxSuccessHandlers=new Array,ajaxEnabled=!1;if("undefined"!=typeof jQuery)var ajaxCurrentBase=location.href.replace($("base").eq(0).attr("href"),"").replace(/\?.*$/,"").replace(/#.*$/,"");var ajaxUsed=!1,ajaxError=!1;function ajaxSend(e){var t=e.method?e.method.toUpperCase():"GET",n=e.data||"",o=e.url||$("#"+e.formId).attr("action");if("POST"===t)n+="&"+$("#"+e.formId).serialize();else if(e.formId){var s=o.indexOf("?")>0?"&":"?";o+=s+$("#"+e.formId).serialize()}return $.ajax({type:t,url:encodeURIfix(o),data:n,beforeSend:function(){e.nonshowloading||$("#"+e.divId).append('<span style="position:absolute; left:'+($("#"+e.divId).width()/2-110)+"px;top:"+($("#"+e.divId).height()/2-9)+'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css("position","relative")},success:function(t){e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500);for(var n=0;n<ajaxSuccessHandlers.length;n++)ajaxSuccessHandlers[n].func?ajaxSuccessHandlers[n].func(t):ajaxSuccessHandlers[n](t)},error:function(t){if(e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500),ajaxErrorHandlers.length>0)for(var n=0;n<ajaxErrorHandlers.length;n++)ajaxErrorHandlers[n].func?ajaxErrorHandlers[n].func(t):ajaxErrorHandlers[n](t);else alert("AJAX error: "+t),ajaxError=!0}}),!1}function ajaxPageLoad(e){""!==e&&e.replace(/^#/,"");var t=e.match(/^get(-.*?)?;(.*)$/);if(t){var n=t[2].indexOf(";")>0?t[2].replace(";","?"):ajaxCurrentBase+"?"+decodeURIComponent(t[2]);return ajaxUsed=!0,ajaxSend({method:"GET",url:n,divId:t[1]?t[1].substr(1):"ajaxBlock"})}return""!==e||!ajaxUsed||ajaxSend({url:location.href.replace(/#.*$/,""),divId:"ajaxBlock"})}function ajaxFormLoad(e,t){var n=e.match(/^(get|post)(-.*?)?;(.*)$/);if(n){var o=n[3].indexOf(";")>0?n[3].replace(";","?"):ajaxCurrentBase+"?"+n[3];return ajaxUsed=!0,ajaxSend({method:n[1].toUpperCase(),url:o,divId:n[2]?n[2].substr(1):"ajaxBlock",formId:t})}return!0}function ajaxMakeHash(e,t,n){var o,s,a="post"==n?"post":"get",i="?",r=!!t&&t.match(/(get|post)(-[^ ;]+)?(;\S*)?/);return r&&(a=r[1],r[2]&&(a+=r[2]),r[3]&&(e=r[3].substr(1),i=";")),a+=";",e.indexOf(i)>0?(o=e.substr(0,e.indexOf(i)),s=e.substr(e.indexOf(i)+1),n&&"post"!=n&&(s+="&"+n)):(o=e,s="",n&&"post"!=n&&(s+=i+n)),a+=o==ajaxCurrentBase?s:o+";"+s}function bindHandlers(){("#comments"==location.hash||location.hash.match(/#c\d+/))&&$(".comments").css("display",""),$(".comments_link").click((function(){"none"==$(".comments").css("display")?$(".comments").css("display",""):$(".comments").css("display","none")})),location.href.match(/#comments/)&&$(".comments").css("display",""),ajaxEnabled&&($("body").on("submit","form.ajax",(function(){return"POST"==$(this).attr("method").toUpperCase()?ajaxFormLoad(ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),"post"),$(this).attr("id")):window.location.hash=ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),$(this).serialize()),ajaxError})),$("body").on("click","a.ajax",(function(){return window.location.hash=ajaxMakeHash($(this).attr("href").replace(/#.*$/,""),$(this).attr("rel")),ajaxError})),$("body").on("click","a.confirmLink",(function(){return!$(this).attr("href").match(/message.+920/i)||($("#confirmBox")&&$("#confirmBox").remove(),$("body").prepend('<div id="confirmBox" class="jqmWindow"></div>'),$("#confirmBox").jqm({ajax:$(this).attr("href"),modal:!0,onLoad:function(){$("#confirmBox").css("margin-left","-"+$("#confirmBox").width()/2+"px"),$("#confirmBox").css("margin-top","-"+$("#confirmBox").height()/2+"px")}}),$("#confirmBox").jqmShow(),!1)})),$(window).on("hashchange",(function(){ajaxPageLoad(window.location.hash.replace(/^#/,""))})),$("body").on("click","a#confirmNo",(function(){return!$("#confirmBox").is(".jqmWindow")||($("#confirmBox").jqmHide(),$("#confirmBox").remove(),!1)})))}"undefined"!=typeof jQuery&&$(document).ready((function(){ajaxEnabled&&""!=window.location.hash&&ajaxPageLoad(window.location.hash.replace(/^#/,"")),bindHandlers()})),window.name="main";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2NsaWVudC9CYXNlU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9kcml2ZXIvQmFzZVNlcnZlckV2ZW50c0RyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c1NTRURyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c0FqYXhEcml2ZXIuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9TZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvVG9hc3QuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvQ290b250aUFwcGxpY2F0aW9uLmpzIl0sIm5hbWVzIjpbImVuY29kZVVSSWZpeCIsInN0ciIsImVuY29kZVVSSSIsImRlY29kZVVSSSIsInJlcGxhY2UiLCJnZXRCYXNlSHJlZiIsImhyZWYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicG9wdXAiLCJjb2RlIiwidyIsImgiLCJ3aW5kb3ciLCJvcGVuIiwicGZzIiwiaWQiLCJjMSIsImMyIiwicGFyc2VyIiwicmVkaXJlY3QiLCJ1cmwiLCJsb2NhdGlvbiIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwidmFsdWUiLCJ0b2dnbGVibG9jayIsImJsIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJ0b2dnbGVBbGwiLCJhY3Rpb24iLCJibGtzIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJpbnNlcnRUZXh0IiwiZG9jT2JqIiwiZmllbGROYW1lIiwiZmllbGQiLCJmaW5kRmllbGQiLCJmb3JtcyIsImoiLCJlbGVtZW50cyIsIm5hbWUiLCJzZWxlY3Rpb24iLCJmb2N1cyIsImNyZWF0ZVJhbmdlIiwidGV4dCIsInNlbGVjdGlvblN0YXJ0Iiwic3RhcnRQb3MiLCJlbmRQb3MiLCJzZWxlY3Rpb25FbmQiLCJzdWJzdHJpbmciLCJCYXNlU2VydmVyRXZlbnRzQ2xpZW50IiwiRXZlbnRUYXJnZXQiLCJtb2RlIiwiZHJpdmVyVHlwZSIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJ0aGlzIiwiaW5pdCIsIm9uRXZlbnRUcmlnZ2VyZWQiLCJldmVudERhdGEiLCJjb25zb2xlIiwibG9nIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJCYXNlU2VydmVyRXZlbnRzRHJpdmVyIiwiZXZlbnRzVXJsIiwiU2VydmVyRXZlbnRzU1NFRHJpdmVyIiwiZSIsIkV2ZW50U291cmNlIiwib25vcGVuIiwib25tZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsImV2ZW50SWQiLCJsYXN0RXZlbnRJZCIsIm9uZXJyb3IiLCJTZXJ2ZXJFdmVudHNBamF4RHJpdmVyIiwidCIsIm4iLCJzIiwic2V0VGltZW91dCIsIm8iLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsInN0YXR1cyIsInJlc3VsdCIsImpzb24iLCJldmVudHMiLCJmb3JFYWNoIiwiZXJyb3IiLCJtZXNzYWdlIiwiU2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeSIsInIiLCJiYXNlVXJsIiwiZ2V0QnlUeXBlIiwiZHJpdmVyIiwic2VydmVyU2VudEV2ZW50c1VybCIsImFqYXhFdmVudHNVcmwiLCJTZXJ2ZXJFdmVudHNDbGllbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50Iiwid29ya2VyVXJsIiwicG9ydCIsIlNoYXJlZFdvcmtlciIsInBvc3RNZXNzYWdlIiwiY29uZmlnIiwiU2VydmVyRXZlbnRzIiwiYSIsImwiLCJkIiwiYyIsIk1hcCIsImNvdCIsImNmZyIsInNlcnZlckV2ZW50cyIsImFkZE9ic2VydmVyIiwiY2FsbGJhY2siLCJzZXQiLCJvbkV2ZW50IiwidiIsIm9ic2VydmVyIiwiVG9hc3QiLCJzdGF0aWMiLCJ0aXRsZSIsImhpbnQiLCJ0eXBlIiwiZGVsYXkiLCJ1IiwiYm9vdHN0cmFwIiwic2hvdyIsImNvbnRhaW5lciIsInRvYXN0VGl0bGUiLCJ0b2FzdEhpbnQiLCJ0b2FzdEhUTUwiLCJ0b2FzdFdyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwidG9hc3RFbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJhcHBlbmRDaGlsZCIsImxhc3RFbGVtZW50Q2hpbGQiLCJyZW1vdmUiLCJtIiwiY2xhc3NOYW1lIiwiY29udGFpbmVyQ2xhc3MiLCJib2R5IiwiYXBwZW5kIiwiTW9kYWwiLCJjb250ZW50IiwiYnV0dG9ucyIsImNlbnRlcmVkIiwiZGlhbG9nQ2xhc3MiLCJwIiwibW9kYWxIVE1MIiwibW9kYWxXcmFwcGVyIiwiZyIsInF1ZXJ5U2VsZWN0b3IiLCJBcnJheSIsImlzQXJyYXkiLCJidXR0b24iLCJFIiwiYnV0dG9uRGF0YSIsInB1c2giLCJsYWJlbCIsInNldEF0dHJpYnV0ZSIsImJ0blR5cGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJjbG9zZU9uQ2xpY2siLCJvbkNsaWNrIiwiTCIsInkiLCJsYW5nIiwiZ2V0U2VydmVyRXZlbnRzIiwiY29uZmlybSIsIm9rTGFiZWwiLCJjYW5jZWxMYWJlbCIsIm1vZGFsIiwiZ2V0TW9kYWwiLCJnZXRUb2FzdCIsInRvYXN0IiwibG9hZERhdGEiLCJ3aGF0IiwibG9hZGVkRGF0YSIsImRhdGFUb0xvYWQiLCJTdHJpbmciLCJpdGVtIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiaW5kZXgiLCJhcnJheSIsInRvU3RyaW5nIiwicmVzcG9uc2VEYXRhIiwic3VjY2VzcyIsImtleSIsImxvYWRDYXB0Y2hhIiwidGhlbiIsImNhcHRjaGFFbGVtZW50cyIsImVsZW1lbnQiLCJjYXB0Y2hhIiwiZXhlY3V0ZVNjcmlwdEVsZW1lbnRzIiwiZm9ybSIsImNsb3Nlc3QiLCJpbnB1dFgiLCJ4IiwiY29udGFpbmVyRWxlbWVudCIsInNjcmlwdEVsZW1lbnRzIiwiZnJvbSIsInNjcmlwdEVsZW1lbnQiLCJjbG9uZWRFbGVtZW50IiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJhamF4RXJyb3JIYW5kbGVycyIsImFqYXhTdWNjZXNzSGFuZGxlcnMiLCJhamF4RW5hYmxlZCIsImpRdWVyeSIsImFqYXhDdXJyZW50QmFzZSIsIiQiLCJlcSIsImF0dHIiLCJhamF4VXNlZCIsImFqYXhFcnJvciIsImFqYXhTZW5kIiwic2V0dGluZ3MiLCJtZXRob2QiLCJ0b1VwcGVyQ2FzZSIsImZvcm1JZCIsInNlcmlhbGl6ZSIsInNlcCIsImluZGV4T2YiLCJhamF4IiwiYmVmb3JlU2VuZCIsIm5vbnNob3dsb2FkaW5nIiwiZGl2SWQiLCJ3aWR0aCIsImhlaWdodCIsImNzcyIsIm1zZyIsIm5vbnNob3dmYWRlaW4iLCJodG1sIiwiaGlkZSIsImZhZGVJbiIsImZ1bmMiLCJhbGVydCIsImFqYXhQYWdlTG9hZCIsImhhc2giLCJtYXRjaCIsImRlY29kZVVSSUNvbXBvbmVudCIsInN1YnN0ciIsImFqYXhGb3JtTG9hZCIsImFqYXhNYWtlSGFzaCIsInJlbCIsImZvcm1EYXRhIiwiaHJlZkJhc2UiLCJiaW5kSGFuZGxlcnMiLCJjbGljayIsIm9uIiwicHJlcGVuZCIsImpxbSIsIm9u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ZUFBQWtCLFNBQUEsT0FDQSxJQUNBbEIsRUFBQSxlQUFBMkMsV0FDQSxFQUlBLElBR0EzQyxFQUFBeE4sUUFBQStQLEdBQUEseUJBQ0FaLGFBQUFuUCxPQUFBUyxTQUFBMk8sS0FBQTdQLFFBQUEsU0FDQSxJQUVBaU8sRUFBQSxRQUFBdUMsR0FBQSxrQ0FDQSxPQUFBdkMsRUFBQSxlQUFBNEMsR0FBQSxnQkFFQTVDLEVBQUEsZUFBQTZDLFVBQ0E3QyxFQUFBLGVBQUE5RSxVQUNBLEVBTUEsSUFFQSxDQUVBLG9CQUFBNEUsUUFDQUUsRUFBQTlOLFVBQUE0USxPQUFBLFdBRUFqRCxhQUNBLElBQUFyTixPQUFBUyxTQUFBMk8sTUFDQUQsYUFBQW5QLE9BQUFTLFNBQUEyTyxLQUFBN1AsUUFBQSxVQUlBc1EsY0FDQSxJQUdBN1AsT0FBQWdDLEtBQUEiLCJmaWxlIjoiYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBlbmNvZGVVUklmaXgoc3RyKSB7XHJcblx0Ly8gdG8gcHJldmVudCB0d2ljZSBlbmNvZGluZ1xyXG5cdC8vIGFuZCBmaXggJ1snLCddJyBzaWducyB0byBmb2xsb3cgUkZDMzk4NiAoc2VjdGlvbi0zLjIuMilcclxuXHRyZXR1cm4gZW5jb2RlVVJJKGRlY29kZVVSSShzdHIpKS5yZXBsYWNlKC8lNUIvZywgJ1snKS5yZXBsYWNlKC8lNUQvZywgJ10nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QmFzZUhyZWYoKSB7XHJcblx0dmFyIGhyZWYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdLmhyZWY7XHJcblx0aWYgKGhyZWYgPT0gbnVsbCkge1xyXG5cdFx0cmV0dXJuICcvJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIGhyZWY7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBwb3B1cChjb2RlLCB3LCBoKXtcclxuICAgIHdpbmRvdy5vcGVuKGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP289JyArIGNvZGUsICcnLCAndG9vbGJhcj0wLGxvY2F0aW9uPTAsZGlyZWN0b3JpZXM9MCxtZW51QmFyPTAscmVzaXphYmxlPTAsc2Nyb2xsYmFycz15ZXMsd2lkdGg9JyArIHcgKyAnLGhlaWdodD0nICsgaCArICcsbGVmdD0zMix0b3A9MTYnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0b2RvIG1vdmUgdG8gcGZzIG1vZHVsZVxyXG4gKi9cclxuZnVuY3Rpb24gcGZzKGlkLCBjMSwgYzIsIHBhcnNlcil7XHJcbiAgICB3aW5kb3cub3BlbihcclxuXHRcdGdldEJhc2VIcmVmKCkgKyAnaW5kZXgucGhwP2U9cGZzJnVzZXJpZD0nICsgaWQgKyAnJmMxPScgKyBjMSArICcmYzI9JyArIGMyICsgJyZwYXJzZXI9JyArIHBhcnNlcixcclxuXHRcdCdQRlMnLFxyXG5cdFx0J3N0YXR1cz0xLCB0b29sYmFyPTAsbG9jYXRpb249MCxkaXJlY3Rvcmllcz0wLG1lbnVCYXI9MCxyZXNpemFibGU9MSxzY3JvbGxiYXJzPXllcyx3aWR0aD03NTQsaGVpZ2h0PTUxMixsZWZ0PTMyLHRvcD0xNidcclxuXHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWRpcmVjdCh1cmwpe1xyXG4gICAgbG9jYXRpb24uaHJlZiA9IHVybC5vcHRpb25zW3VybC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlYmxvY2soaWQpe1xyXG4gICAgdmFyIGJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgaWYgKGJsLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYmwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUFsbChhY3Rpb24pIHtcclxuXHR2YXIgYmxrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZF49XCJibGtfXCJdJyk7XHJcblx0Zm9yIChpID0gMDsgaSA8IGJsa3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmIChhY3Rpb24gPT0gJ2hpZGUnKSB7XHJcblx0XHRcdGJsa3NbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdH0gZWxzZSBpZiAoYWN0aW9uID09ICdzaG93Jykge1xyXG5cdFx0XHRibGtzW2ldLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93LWdyb3VwJztcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyBJbnNlcnRzIHRleHQgaW50byB0ZXh0YXJlYSBhdCBjdXJzb3IgcG9zaXRpb25cclxuZnVuY3Rpb24gaW5zZXJ0VGV4dChkb2NPYmosIGZpZWxkTmFtZSwgdmFsdWUpIHtcclxuXHR2YXIgZmllbGQgPSBudWxsO1xyXG5cdGlmICghZG9jT2JqKSB7XHJcblx0XHRkb2NPYmogPSBkb2N1bWVudDtcclxuXHR9XHJcblx0Ly8gRmluZCB0aGUgZmllbGQgaW4gdGhlIGRvY09ialxyXG5cdGZpbmRGaWVsZDpcclxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRvY09iai5mb3Jtcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb2NPYmouZm9ybXNbaV0uZWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0aWYgKGRvY09iai5mb3Jtc1tpXS5lbGVtZW50c1tqXS5uYW1lID09IGZpZWxkTmFtZSkge1xyXG5cdFx0XHRcdGZpZWxkID0gZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzW2pdO1xyXG5cdFx0XHRcdGJyZWFrIGZpbmRGaWVsZDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoIWZpZWxkKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBJbnNlcnQgdGhlIHRleHRcclxuXHRpZiAoZG9jT2JqLnNlbGVjdGlvbikge1xyXG5cdFx0Ly8gTVNJRSBhbmQgT3BlcmFcclxuXHRcdGZpZWxkLmZvY3VzKCk7XHJcblx0XHR2YXIgc2VsID0gZG9jT2JqLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xyXG5cdFx0c2VsLnRleHQgPSB2YWx1ZTtcclxuXHR9IGVsc2UgaWYgKGZpZWxkLnNlbGVjdGlvblN0YXJ0IHx8IGZpZWxkLnNlbGVjdGlvblN0YXJ0ID09IDApIHtcclxuXHRcdC8vIE1vemlsbGFcclxuXHRcdHZhciBzdGFydFBvcyA9IGZpZWxkLnNlbGVjdGlvblN0YXJ0O1xyXG5cdFx0dmFyIGVuZFBvcyA9IGZpZWxkLnNlbGVjdGlvbkVuZDtcclxuXHRcdGZpZWxkLnZhbHVlID0gZmllbGQudmFsdWUuc3Vic3RyaW5nKDAsIHN0YXJ0UG9zKSArIHZhbHVlICsgZmllbGQudmFsdWUuc3Vic3RyaW5nKGVuZFBvcywgZmllbGQudmFsdWUubGVuZ3RoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZmllbGQudmFsdWUgKz0gdmFsdWU7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBBcnJheSBvZiBhamF4IGVycm9yIGhhbmRsZXJzXHJcbi8vIEV4YW1wbGUgb2YgdXNlOlxyXG4vLyBhamF4RXJyb3JIYW5kbGVycy5wdXNoKHtmdW5jOiBteUVycm9ySGFuZGxlcn0pO1xyXG4vLyBhamF4U3VjY2Vzc0hhbmRsZXJzLnB1c2goe2Z1bmM6IG15U3VjY2Vzc0hhbmRsZXJ9KTtcclxudmFyIGFqYXhFcnJvckhhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbnZhciBhamF4U3VjY2Vzc0hhbmRsZXJzID0gbmV3IEFycmF5KCk7XHJcbi8vIEFKQVggZW5hYmxlbWVudCBkZWZhdWx0cyB0byBmYWxzZVxyXG52YXIgYWpheEVuYWJsZWQgPSBmYWxzZTtcclxuLy8gUmVxdWlyZWQgdG8gY2FsY3VsYXRlIHBhdGhzXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcblx0dmFyIGFqYXhDdXJyZW50QmFzZSA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgkKCdiYXNlJykuZXEoMCkuYXR0cignaHJlZicpLCAnJykucmVwbGFjZSgvXFw/LiokLywgJycpLnJlcGxhY2UoLyMuKiQvLCAnJyk7XHJcbn1cclxuLy8gVGhpcyBmbGFnIGluZGljYXRlcyB0aGF0IEFKQVgraGlzdG9yeSBoYXMgYmVlbiB1c2VkIG9uIHRoaXMgcGFnZVxyXG4vLyBJdCBtZWFucyB0aGF0IFwiI1wiIG9yIGhvbWUgbGluayBzaG91bGQgYmUgbG9hZGVkIHZpYSBhamF4IHRvb1xyXG52YXIgYWpheFVzZWQgPSBmYWxzZTtcclxuLy8gR2xvYmFsIGZsYWcgdG8gbGV0IGV2ZXJ5Ym9keSBrbm93IHRoYXQgQUpBWCBoYXMgZmFpbGVkXHJcbnZhciBhamF4RXJyb3IgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBBSkFYIGhlbHBlciBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge2hhc2h9IHNldHRpbmdzIEEgaGFzaHRhYmxlIHdpdGggc2V0dGluZ3NcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhTZW5kKHNldHRpbmdzKSB7XHJcblx0dmFyIG1ldGhvZCA9IHNldHRpbmdzLm1ldGhvZCA/IHNldHRpbmdzLm1ldGhvZC50b1VwcGVyQ2FzZSgpIDogJ0dFVCc7XHJcblx0dmFyIGRhdGEgPSBzZXR0aW5ncy5kYXRhIHx8ICcnO1xyXG5cdHZhciB1cmwgPSBzZXR0aW5ncy51cmwgfHwgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLmF0dHIoJ2FjdGlvbicpO1xyXG5cdGlmIChtZXRob2QgPT09ICdQT1NUJykge1xyXG5cdFx0ZGF0YSArPSAnJicgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fSBlbHNlIGlmIChzZXR0aW5ncy5mb3JtSWQpIHtcclxuXHRcdHZhciBzZXAgPSB1cmwuaW5kZXhPZignPycpID4gMCA/ICcmJyA6ICc/JztcclxuXHRcdHVybCArPSBzZXAgKyAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuc2VyaWFsaXplKCk7XHJcblx0fVxyXG5cdCQuYWpheCh7XHJcblx0XHR0eXBlOiBtZXRob2QsXHJcblx0XHR1cmw6IGVuY29kZVVSSWZpeCh1cmwpLFxyXG5cdFx0ZGF0YTogZGF0YSxcclxuXHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZClcclxuXHRcdFx0XHRcdC5hcHBlbmQoJzxzcGFuIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6JyArICgkKCcjJyArIHNldHRpbmdzLmRpdklkKS53aWR0aCgpLzIgLSAxMTApICsgJ3B4O3RvcDonICsgKCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhlaWdodCgpLzIgLSA5KSArICdweDtcIiBjbGFzcz1cImxvYWRpbmdcIiBpZD1cImxvYWRpbmdcIj48aW1nIHNyYz1cIi4vaW1hZ2VzL3NwaW5uZXIuZ2lmXCIgYWx0PVwibG9hZGluZ1wiLz48L3NwYW4+JykuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0c3VjY2VzczogZnVuY3Rpb24obXNnKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjbG9hZGluZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2ZhZGVpbikge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhpZGUoKS5odG1sKG1zZykuZmFkZUluKDUwMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaHRtbChtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWpheFN1Y2Nlc3NIYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmKGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYylcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0uZnVuYyhtc2cpO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdGFqYXhTdWNjZXNzSGFuZGxlcnNbaV0obXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGVycm9yOiBmdW5jdGlvbihtc2cpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyNsb2FkaW5nJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93ZmFkZWluKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGlkZSgpLmh0bWwobXNnKS5mYWRlSW4oNTAwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5odG1sKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFqYXhFcnJvckhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoYWpheEVycm9ySGFuZGxlcnNbaV0uZnVuYykge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXS5mdW5jKG1zZyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRhamF4RXJyb3JIYW5kbGVyc1tpXShtc2cpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhbGVydCgnQUpBWCBlcnJvcjogJyArIG1zZyk7XHJcblx0XHRcdFx0YWpheEVycm9yID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3VicGFnZSBsb2FkZXIgd2l0aCBoaXN0b3J5IHN1cHBvcnRcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggQSBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4UGFnZUxvYWQoaGFzaCkge1xyXG4gICAgaWYgKGhhc2ggIT09ICcnKSB7XHJcblx0XHRoYXNoLnJlcGxhY2UoL14jLywgJycpO1xyXG5cdH1cclxuXHR2YXIgbSA9IGhhc2gubWF0Y2goL15nZXQoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuICAgICAgICB2YXIgdXJsID0gbVsyXS5pbmRleE9mKCc7JykgPiAwID8gbVsyXS5yZXBsYWNlKCc7JywgJz8nKSA6IGFqYXhDdXJyZW50QmFzZSArICc/JyArIGRlY29kZVVSSUNvbXBvbmVudChtWzJdKTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogJ0dFVCcsXHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRkaXZJZDogbVsxXSA/IG1bMV0uc3Vic3RyKDEpIDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAoaGFzaCA9PT0gJycgJiYgYWpheFVzZWQpIHtcclxuXHRcdC8vIGFqYXggaG9tZVxyXG5cdFx0cmV0dXJuIGFqYXhTZW5kICh7XHJcblx0XHRcdHVybDogbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLywgJycpLFxyXG5cdFx0XHRkaXZJZDogJ2FqYXhCbG9jaydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFKQVggc3ViZm9ybSBsb2FkZXIgd2l0aG91dCBoaXN0b3J5IHRyYWNraW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEEgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybUlkIFRhcmdldCBmb3JtIGlkIGF0dHJpYnV0ZVxyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheEZvcm1Mb2FkKGhhc2gsIGZvcm1JZCkge1xyXG5cdHZhciBtID0gaGFzaC5tYXRjaCgvXihnZXR8cG9zdCkoLS4qPyk/OyguKikkLyk7XHJcblx0aWYgKG0pIHtcclxuXHRcdC8vIGFqYXggYm9va21hcmtcclxuXHRcdHZhciB1cmwgPSBtWzNdLmluZGV4T2YoJzsnKSA+IDAgPyBtWzNdLnJlcGxhY2UoJzsnLCAnPycpIDogYWpheEN1cnJlbnRCYXNlICsgJz8nICsgbVszXTtcclxuXHRcdGFqYXhVc2VkID0gdHJ1ZTtcclxuXHRcdHJldHVybiBhamF4U2VuZCh7XHJcblx0XHRcdG1ldGhvZDogbVsxXS50b1VwcGVyQ2FzZSgpLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0ZGl2SWQ6IG1bMl0gPyBtWzJdLnN1YnN0cigxKSA6ICdhamF4QmxvY2snLFxyXG5cdFx0XHRmb3JtSWQ6IGZvcm1JZFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhamF4YWJsZSBoYXNoIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaHJlZiBMaW5rIGhyZWYgb3IgZm9ybSBhY3Rpb24gYXR0cmlidXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWwgQW4gYXR0cmlidXRlIHZhbHVlIHBvc3NpYmx5IGNvbnRhaW5pbmcgYSBoYXNoIGFkZHJlc3NcclxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1EYXRhIElzIHBhc3NlZCBmb3IgZm9ybXMgb25seSwgaXMgJ3Bvc3QnIGZvciBQT1NUIGZvcm1zXHJcbiAqIG9yIHNlcmlhbGl6ZWQgZm9ybSBkYXRhIGZvciBHRVQgZm9ybXNcclxuICogQHJldHVybiBBIHZhbGlkIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHR5cGUgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4TWFrZUhhc2goaHJlZiwgcmVsLCBmb3JtRGF0YSkge1xyXG5cdHZhciBoYXNoID0gKGZvcm1EYXRhID09ICdwb3N0JykgPyAncG9zdCcgOiAnZ2V0JztcclxuXHR2YXIgaHJlZkJhc2UsIHBhcmFtcztcclxuXHR2YXIgc2VwID0gJz8nO1xyXG5cdHZhciBtID0gcmVsID8gcmVsLm1hdGNoKC8oZ2V0fHBvc3QpKC1bXiA7XSspPyg7XFxTKik/LykgOiBmYWxzZTtcclxuXHRpZiAobSkge1xyXG5cdFx0aGFzaCA9IG1bMV07XHJcblx0XHRpZiAobVsyXSkge1xyXG5cdFx0XHRoYXNoICs9IG1bMl07XHJcblx0XHR9XHJcblx0XHRpZiAobVszXSkge1xyXG5cdFx0XHRocmVmID0gbVszXS5zdWJzdHIoMSk7XHJcblx0XHRcdHNlcCAgPSAnOyc7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gJzsnXHJcblx0aWYgKGhyZWYuaW5kZXhPZihzZXApID4gMCkge1xyXG5cdFx0aHJlZkJhc2UgPSBocmVmLnN1YnN0cigwLCBocmVmLmluZGV4T2Yoc2VwKSk7XHJcblx0XHRwYXJhbXMgPSBocmVmLnN1YnN0cihocmVmLmluZGV4T2Yoc2VwKSArIDEpO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gJyYnICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGhyZWZCYXNlID0gaHJlZjtcclxuXHRcdHBhcmFtcyA9ICcnO1xyXG5cdFx0aWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhICE9ICdwb3N0Jykge1xyXG5cdFx0XHRwYXJhbXMgKz0gc2VwICsgZm9ybURhdGE7XHJcblx0XHR9XHJcblx0fVxyXG5cdGhhc2ggKz0gaHJlZkJhc2UgPT0gYWpheEN1cnJlbnRCYXNlID8gcGFyYW1zIDogaHJlZkJhc2UgKyAnOycgKyBwYXJhbXM7XHJcblx0cmV0dXJuIGhhc2g7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFuZGFyZCBldmVudCBiaW5kaW5nc1xyXG4gKi9cclxuZnVuY3Rpb24gYmluZEhhbmRsZXJzKCkge1xyXG5cdGlmIChsb2NhdGlvbi5oYXNoID09ICcjY29tbWVudHMnIHx8IGxvY2F0aW9uLmhhc2gubWF0Y2goLyNjXFxkKy8pKSB7XHJcblx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0fVxyXG5cdCQoJy5jb21tZW50c19saW5rJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRpZigkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScpIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0aWYobG9jYXRpb24uaHJlZi5tYXRjaCgvI2NvbW1lbnRzLykpIHtcclxuXHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHR9XHJcblxyXG5cdGlmIChhamF4RW5hYmxlZCkge1xyXG5cdFx0Ly8gQUpBWCBhdXRvLWhhbmRsaW5nXHJcblx0XHQkKCdib2R5Jykub24oJ3N1Ym1pdCcsICdmb3JtLmFqYXgnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuYXR0cignbWV0aG9kJykudG9VcHBlckNhc2UoKSA9PSAnUE9TVCcpIHtcclxuXHRcdFx0XHRhamF4Rm9ybUxvYWQoYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAncG9zdCcpLCAkKHRoaXMpLmF0dHIoJ2lkJykpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignYWN0aW9uJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdjbGFzcycpLCAkKHRoaXMpLnNlcmlhbGl6ZSgpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYWpheEVycm9yO1xyXG5cdFx0fSk7XHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EuYWpheCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2hyZWYnKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ3JlbCcpKTtcclxuXHRcdFx0cmV0dXJuIGFqYXhFcnJvcjtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFKQVggYWN0aW9uIGNvbmZpcm1hdGlvbnNcclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYS5jb25maXJtTGluaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdocmVmJykubWF0Y2goL21lc3NhZ2UuKzkyMC9pKSkge1xyXG5cdFx0XHRcdGlmICgkKCcjY29uZmlybUJveCcpKSB7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKCdib2R5JykucHJlcGVuZCgnPGRpdiBpZD1cImNvbmZpcm1Cb3hcIiBjbGFzcz1cImpxbVdpbmRvd1wiPjwvZGl2PicpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtKHthamF4OiQodGhpcykuYXR0cignaHJlZicpLG1vZGFsOnRydWUsb25Mb2FkOmZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmNzcygnbWFyZ2luLWxlZnQnLCAnLScrKCQoJyNjb25maXJtQm94Jykud2lkdGgoKS8yKSsncHgnKTtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykuY3NzKCdtYXJnaW4tdG9wJywgJy0nKygkKCcjY29uZmlybUJveCcpLmhlaWdodCgpLzIpKydweCcpO1xyXG5cdFx0XHRcdH19KTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbVNob3coKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIExpc3RlbiB0byBoYXNoIGNoYW5nZSBldmVudHNcclxuXHRcdCQod2luZG93KS5vbignaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhI2NvbmZpcm1ObycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJChcIiNjb25maXJtQm94XCIpLmlzKFwiLmpxbVdpbmRvd1wiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtSGlkZSgpO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykucmVtb3ZlKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgalF1ZXJ5ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBJZiBwYWdlIHdhcyBsb2FkZWQgd2l0aCBoYXNoXHJcbiAgICAgICAgaWYgKGFqYXhFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBhamF4UGFnZUxvYWQod2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBiaW5kSGFuZGxlcnMoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG53aW5kb3cubmFtZSA9ICdtYWluJzsiLCIvKipcclxuICogQmFzZSBzZXJ2ZXIgZXZlbnRzIGNsaWVudFxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJhc2VTZXJ2ZXJFdmVudHNDbGllbnQgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cclxuICAgICAqL1xyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGRyaXZlclR5cGUgPSAnJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkcml2ZXJUeXBlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBtb2RlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRyaXZlclR5cGUsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kcml2ZXJUeXBlID0gZHJpdmVyVHlwZTtcclxuXHJcbiAgICAgICAgaWYgKG1vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJFdmVudHNDbGllbnQ6IFNlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2V2ZW50Jywge2RldGFpbDogZXZlbnREYXRhfSk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBCYXNlIHNlcnZlciBldmVudHMgZHJpdmVyXHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZVNlcnZlckV2ZW50c0RyaXZlciBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIG1vZGUgPSAncHJvZHVjdGlvbic7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIGV2ZW50c1VybCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXZlbnRzVXJsLCBtb2RlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmIChtb2RlICE9PSBudWxsICYmIG1vZGUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXZlbnRzVXJsID0gZXZlbnRzVXJsO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7IH1cclxuXHJcbiAgICBvbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzRHJpdmVyOiBTZXJ2ZXIgdHJpZ2dlcmVkIGV2ZW50JywgZXZlbnREYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdldmVudCcsIHtkZXRhaWw6IGV2ZW50RGF0YX0pO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Jhc2VTZXJ2ZXJFdmVudHNEcml2ZXJ9IGZyb20gXCIuL0Jhc2VTZXJ2ZXJFdmVudHNEcml2ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXIgLSBTZW50IGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICogQGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNTU0VEcml2ZXIgZXh0ZW5kcyBCYXNlU2VydmVyRXZlbnRzRHJpdmVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge0V2ZW50U291cmNlfG51bGx9XHJcbiAgICAgKi9cclxuICAgICNldmVudFNvdXJjZSA9IG51bGw7XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jZXZlbnRTb3VyY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c1NTRURyaXZlci4gJywgdGhpcy5ldmVudHNVcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UodGhpcy5ldmVudHNVcmwpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2Uub25vcGVuID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzU1NFRHJpdmVyIGNvbm5lY3Rpb24gaXMgb3BlbicpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2Uub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChldmVudERhdGEuZGF0YSAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZXZlbnREYXRhLmRhdGEgPT09ICdzdHJpbmcnKSAmJiBldmVudERhdGEuZGF0YSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5kYXRhID0gSlNPTi5wYXJzZShldmVudERhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnREYXRhLmV2ZW50SWQgPSBldmVudC5sYXN0RXZlbnRJZDtcclxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJFdmVudHNTU0VEcml2ZXIgY29ubmVjdGlvbiBlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCYXNlU2VydmVyRXZlbnRzRHJpdmVyfSBmcm9tIFwiLi9CYXNlU2VydmVyRXZlbnRzRHJpdmVyXCI7XHJcblxyXG4vKipcclxuICogU2VydmVyIGV2ZW50cyBhamF4IGRyaXZlclxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50c0FqYXhEcml2ZXIgZXh0ZW5kcyBCYXNlU2VydmVyRXZlbnRzRHJpdmVyIHtcclxuICAgICN0aW1lT3V0UGVyaW9kID0gMzAwMDsgLy8gMyBzZWMuXHJcblxyXG4gICAgI3RpbWVySWQgPSBudWxsO1xyXG5cclxuICAgICNpbml0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNpbml0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jaW5pdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c0FqYXhEcml2ZXIgJywgdGhpcy5ldmVudHNVcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jdGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy4jZ2V0RXZlbnRzKCksIDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgI2dldEV2ZW50cygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuZXZlbnRzVXJsKTtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXNwb25zZSBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5ldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5ldmVudElkID0gZXZlbnQuaWQgIT09IHVuZGVmaW5lZCA/IGV2ZW50LmlkIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnRUcmlnZ2VyZWQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuI3RpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuI2dldEV2ZW50cygpLCB0aGlzLiN0aW1lT3V0UGVyaW9kKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzQWpheERyaXZlciBnZXQgZXZlbnRzIGVycm9yOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMuI3RpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuI2dldEV2ZW50cygpLCB0aGlzLiN0aW1lT3V0UGVyaW9kKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c1NTRURyaXZlcn0gZnJvbSBcIi4vU2VydmVyRXZlbnRzU1NFRHJpdmVyXCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzQWpheERyaXZlcn0gZnJvbSBcIi4vU2VydmVyRXZlbnRzQWpheERyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIEJhc2Ugc2VydmVyIGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5IHtcclxuICAgICNiYXNlVXJsID0gJy8nO1xyXG5cclxuICAgICNtb2RlID0gJ3Byb2R1Y3Rpb24nXHJcblxyXG4gICAgY29uc3RydWN0b3IoYmFzZVVybCA9IG51bGwsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKGJhc2VVcmwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy4jYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI21vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkcml2ZXJUeXBlXHJcbiAgICAgKiBAcmV0dXJucyB7U2VydmVyRXZlbnRzU1NFRHJpdmVyfFNlcnZlckV2ZW50c0FqYXhEcml2ZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldEJ5VHlwZShkcml2ZXJUeXBlKSB7XHJcbiAgICAgICAgbGV0IGRyaXZlciA9IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlcnZlclNlbnRFdmVudHNVcmwgPSB0aGlzLiNiYXNlVXJsICsgJz9uPXNlcnZlci1ldmVudHMmYT1zc2UnO1xyXG4gICAgICAgIGNvbnN0IGFqYXhFdmVudHNVcmwgPSB0aGlzLiNiYXNlVXJsICsgJz9uPXNlcnZlci1ldmVudHMmYT1hamF4Jl9hamF4PTEnO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGRyaXZlclR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc3NlJzpcclxuICAgICAgICAgICAgICAgIC8vIFNlcnZlci1TZW50IGV2ZW50cyBkcml2ZXJcclxuICAgICAgICAgICAgICAgIGRyaXZlciA9IG5ldyBTZXJ2ZXJFdmVudHNTU0VEcml2ZXIoc2VydmVyU2VudEV2ZW50c1VybCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jbW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzaW5nIFNlcnZlckV2ZW50c1NTRURyaXZlcicsIHNlcnZlclNlbnRFdmVudHNVcmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZHJpdmVyID0gbmV3IFNlcnZlckV2ZW50c0FqYXhEcml2ZXIoYWpheEV2ZW50c1VybCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jbW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzaW5nIFNlcnZlckV2ZW50c0FqYXhEcml2ZXInLCBhamF4RXZlbnRzVXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkcml2ZXI7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Jhc2VTZXJ2ZXJFdmVudHNDbGllbnR9IGZyb20gXCIuL0Jhc2VTZXJ2ZXJFdmVudHNDbGllbnRcIjtcclxuaW1wb3J0IHtTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5fSBmcm9tIFwiLi4vZHJpdmVyL1NlcnZlckV2ZW50c0RyaXZlckZhY3RvcnlcIjtcclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXIgZXZlbnRzIGNsaWVudFxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50c0NsaWVudCBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNDbGllbnQge1xyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyRXZlbnRzQ2xpZW50Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmYWN0b3J5ID0gbmV3IFNlcnZlckV2ZW50c0RyaXZlckZhY3RvcnkoZ2V0QmFzZUhyZWYoKSwgdGhpcy5tb2RlKTtcclxuXHJcbiAgICAgICAgY29uc3QgZHJpdmVyID0gZmFjdG9yeS5nZXRCeVR5cGUodGhpcy5kcml2ZXJUeXBlLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIGRyaXZlci5hZGRFdmVudExpc3RlbmVyKCdldmVudCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uRXZlbnRUcmlnZ2VyZWQoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkcml2ZXIuaW5pdCgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCYXNlU2VydmVyRXZlbnRzQ2xpZW50fSBmcm9tIFwiLi9CYXNlU2VydmVyRXZlbnRzQ2xpZW50XCI7XHJcblxyXG4vKipcclxuICogU2hhcmVkIHdvcmtlciBzZXJ2ZXIgZXZlbnRzIGNsaWVudFxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2hhcmVkV29ya2VyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50IGV4dGVuZHMgQmFzZVNlcnZlckV2ZW50c0NsaWVudCB7XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGxldCB3b3JrZXJVcmwgPSAnL2pzL3NoYXJlZFdvcmtlclNlcnZlckV2ZW50cy5taW4uanMnO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50OiAnICsgd29ya2VyVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmtlciA9IG5ldyBTaGFyZWRXb3JrZXIod29ya2VyVXJsKTtcclxuICAgICAgICAgICAgY29uc3QgcG9ydCA9IHdvcmtlci5wb3J0O1xyXG5cclxuICAgICAgICAgICAgcG9ydC5wb3N0TWVzc2FnZSh7Y29uZmlnOiB7bW9kZTogdGhpcy5tb2RlLCBkcml2ZXI6IHRoaXMuZHJpdmVyVHlwZSwgYmFzZVVybDogZ2V0QmFzZUhyZWYoKX19KTtcclxuXHJcbiAgICAgICAgICAgIHBvcnQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlciBldmVudCcsIGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7U2VydmVyRXZlbnRzQ2xpZW50fSBmcm9tIFwiLi9jbGllbnQvU2VydmVyRXZlbnRzQ2xpZW50XCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50fSBmcm9tIFwiLi9jbGllbnQvU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50XCI7XHJcblxyXG4vKipcclxuICogU2VydmVyIGV2ZW50c1xyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50cyB7XHJcbiAgICBtb2RlID0gJ3Byb2R1Y3Rpb24nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge251bGx8U2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50fFNlcnZlckV2ZW50c0NsaWVudH1cclxuICAgICAqL1xyXG4gICAgI2NsaWVudCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICAjY2xpZW50VHlwZSA9ICdzaGFyZWRXb3JrZXInO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ30gJ3NzZScgKGZvciBTZXJ2ZXItU2VudCBldmVudHMpICwgJ2FqYXgnIG9yICd3ZWJzb2NrZXQnIChub3QgaW1wbGVtZW50ZWQgeWV0KVxyXG4gICAgICovXHJcbiAgICAjZHJpdmVyVHlwZSA9ICdzc2UnO1xyXG5cclxuICAgICNvYnNlcnZlcnNSZWdpc3RyeSA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy4jZHJpdmVyVHlwZSA9IGNvdC5jZmcuc2VydmVyRXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgYWRkT2JzZXJ2ZXIobmFtZSwgZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKGNvdC5jZmcuc2VydmVyRXZlbnRzID09PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkuc2V0KG5hbWUsIHtcclxuICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxyXG4gICAgICAgICAgICBvbkV2ZW50OiBjYWxsYmFja1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy4jY2xpZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2luaXRDbGllbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgI2luaXRDbGllbnQoKSB7XHJcbiAgICAgICAgaWYgKGNvdC5jZmcuc2VydmVyRXZlbnRzID09PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuI2NsaWVudFR5cGUgPT09ICdzaGFyZWRXb3JrZXInICYmICh0eXBlb2YgU2hhcmVkV29ya2VyICE9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0aW5nIFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuI2NsaWVudCA9IG5ldyBTZXJ2ZXJFdmVudHNTaGFyZWRXb3JrZXJDbGllbnQodGhpcy4jZHJpdmVyVHlwZSwgdGhpcy5tb2RlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBTZXJ2ZXJFdmVudHNDbGllbnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNjbGllbnQgPSBuZXcgU2VydmVyRXZlbnRzQ2xpZW50KHRoaXMuI2RyaXZlclR5cGUsIHRoaXMubW9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNjbGllbnQuYWRkRXZlbnRMaXN0ZW5lcignZXZlbnQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy4jb25FdmVudFRyaWdnZXJlZChldmVudC5kZXRhaWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICNvbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyIHRyaWdnZXJlZCBldmVudCcsIGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNvYnNlcnZlcnNSZWdpc3RyeS5mb3JFYWNoKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5ldmVudCA9PT0gZXZlbnREYXRhLmV2ZW50XHJcbiAgICAgICAgICAgICAgICAmJiB0eXBlb2Ygb2JzZXJ2ZXIub25FdmVudCA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyLm9uRXZlbnQoZXZlbnREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIFRvYXN0XHJcbiAqIFNob3cgVG9hc3RzIHByb2dyYW1tYXRpY2FsbHlcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICpcclxuICogQGxpbmsgaHR0cHM6Ly9nZXRib290c3RyYXAuY29tL2RvY3MvNS4zL2NvbXBvbmVudHMvdG9hc3RzL1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRvYXN0IHtcclxuICAgIHN0YXRpYyBjb250YWluZXJDbGFzcyA9ICd0b2FzdC1jb250YWluZXIgcG9zaXRpb24tZml4ZWQgYm90dG9tLTAgZW5kLTAgcC0zJztcclxuXHJcbiAgICB0aXRsZSA9ICcnO1xyXG4gICAgbWVzc2FnZSA9ICcnO1xyXG4gICAgaGludCA9ICcnO1xyXG4gICAgdHlwZSA9ICcnO1xyXG4gICAgZGVsYXkgPSA1MDAwO1xyXG5cclxuICAgICNjb250YWluZXIgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhpbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHRpdGxlID0gJycsIGhpbnQgPSAnJywgdHlwZSA9ICcnKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5ib290c3RyYXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCb290c3RyYXAgaXMgbm90IGZvdW5kLiBJdCBpcyByZXF1aXJlZCBmb3IgdXNlIFwiVG9hc3RcIiBjb21wb25lbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5oaW50ID0gaGludDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI2NvbnRhaW5lciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvYXN0LWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSB0aGlzLiNjcmVhdGVDb250YWluZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNjb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0b2FzdFRpdGxlID0gYDxzdHJvbmcgY2xhc3M9XCJtZS1hdXRvXCI+JHt0aGlzLnRpdGxlfTwvc3Ryb25nPmA7XHJcbiAgICAgICAgY29uc3QgdG9hc3RIaW50ID0gdGhpcy5oaW50ICE9PSAnJyA/IGA8c21hbGw+JHt0aGlzLmhpbnR9PC9zbWFsbD5gIDogJyc7XHJcbiAgICAgICAgY29uc3QgYmFja0dyb3VuZCA9IHRoaXMudHlwZSAhPT0gJycgPyBgIHRleHQtYmctJHt0aGlzLnR5cGV9YCA6ICcnO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdEhUTUwgPSBgPGRpdiBjbGFzcz1cInRvYXN0JHtiYWNrR3JvdW5kfVwiIHJvbGU9XCJhbGVydFwiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiIGBcclxuICAgICAgICAgICAgICAgICsgYGRhdGEtYnMtZGVsYXk9XCIke3RoaXMuZGVsYXl9XCI+YFxyXG4gICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwidG9hc3QtaGVhZGVyXCI+J1xyXG4gICAgICAgICAgICAgICsgYCR7dG9hc3RUaXRsZX0ke3RvYXN0SGludH1gXHJcbiAgICAgICAgICAgICAgKyAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJ0b2FzdFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPidcclxuICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICArIGA8ZGl2IGNsYXNzPVwidG9hc3QtYm9keVwiPiR7dGhpcy5tZXNzYWdlfTwvZGl2PmBcclxuICAgICAgICAgICsgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvYXN0V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvYXN0V3JhcHBlci5pbm5lckhUTUwgPSB0b2FzdEhUTUw7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvYXN0RWxlbWVudCA9IHRvYXN0V3JhcHBlci5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSB0b2FzdCB0byB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy4jY29udGFpbmVyLmFwcGVuZENoaWxkKHRvYXN0RWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHRvYXN0XHJcbiAgICAgICAgY29uc3QgdG9hc3QgPSBuZXcgd2luZG93LmJvb3RzdHJhcC5Ub2FzdCh0b2FzdEVsZW1lbnQpO1xyXG4gICAgICAgIHRvYXN0LnNob3coKTtcclxuXHJcbiAgICAgICAgLy8gT3B0aW9uYWxseSByZW1vdmUgdGhlIHRvYXN0IGZyb20gdGhlIERPTSBhZnRlciBpdCBoaWRlc1xyXG4gICAgICAgIHRoaXMuI2NvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2hpZGRlbi5icy50b2FzdCcsICgpID0+IHtcclxuICAgICAgICAgICAgdG9hc3RFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy4jY29udGFpbmVyLmlubmVySFRNTCA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAjY3JlYXRlQ29udGFpbmVyKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHJlc3VsdC5pZCA9ICd0b2FzdC1jb250YWluZXInO1xyXG4gICAgICAgIHJlc3VsdC5jbGFzc05hbWUgPSBUb2FzdC5jb250YWluZXJDbGFzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChyZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogTW9kYWxcclxuICogU2hvdyBNb2RhbCBwcm9ncmFtbWF0aWNhbGx5XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzUuMy9jb21wb25lbnRzL21vZGFsL1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vZGFsIHtcclxuICAgIHRpdGxlID0gJyc7XHJcbiAgICBjb250ZW50ID0gJyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7KHtsYWJlbDogU3RyaW5nLCBvbkNsaWNrOiBmdW5jdGlvbiwgY2xvc2VPbkNsaWNrOiBib29sLCB0eXBlOiBzdHJpbmd9fHN0cmluZylbXXxudWxsfVxyXG4gICAgICovXHJcbiAgICBidXR0b25zID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFZlcnRpY2FsbHkgY2VudGVyZWRcclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBjZW50ZXJlZCA9IGZhbHNlO1xyXG5cclxuICAgIGRpYWxvZ0NsYXNzID0gJ21vZGFsLWRpYWxvZyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7RWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgI2VsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHsoe1xyXG4gICAgICogICAgbGFiZWw6IFN0cmluZyxcclxuICAgICAqICAgIG9uQ2xpY2s6IGZ1bmN0aW9ufHVuZGVmaW5lZCxcclxuICAgICAqICAgIGNsb3NlT25DbGljazogYm9vbHx1bmRlZmluZWQsXHJcbiAgICAgKiAgICB0eXBlOiBzdHJpbmd8dW5kZWZpbmVkLFxyXG4gICAgICogICAgYnRuVHlwZTogc3RyaW5nfHVuZGVmaW5lZFxyXG4gICAgICogIH18c3RyaW5nKVtdfG51bGx9IGJ1dHRvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29udGVudCwgdGl0bGUgPSAnJywgYnV0dG9ucyA9IG51bGwpIHtcclxuICAgICAgICBpZiAod2luZG93LmJvb3RzdHJhcCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Jvb3RzdHJhcCBpcyBub3QgZm91bmQuIEl0IGlzIHJlcXVpcmVkIGZvciB1c2UgXCJNb2RhbFwiIGNvbXBvbmVudCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBidXR0b25zO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgbGV0IGRpYWxvZ0NsYXNzID0gdGhpcy5kaWFsb2dDbGFzcztcclxuICAgICAgICBpZiAodGhpcy5jZW50ZXJlZCkge1xyXG4gICAgICAgICAgICBkaWFsb2dDbGFzcyArPSAnIG1vZGFsLWRpYWxvZy1jZW50ZXJlZCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtb2RhbEhUTUwgPSAnPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiBpZD1cIkNvdG9udGlEeW5hbWljTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgJ1xyXG4gICAgICAgICAgICAgICAgKyAnYXJpYS1sYWJlbGxlZGJ5PVwiQ290b250aUR5bmFtaWNNb2RhbExhYmVsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+J1xyXG4gICAgICAgICAgKyBgPGRpdiBjbGFzcz1cIiR7ZGlhbG9nQ2xhc3N9XCI+YFxyXG4gICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPidcclxuICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+J1xyXG4gICAgICAgICAgICAgICAgKyBgPGg1IGNsYXNzPVwibW9kYWwtdGl0bGVcIiBpZD1cIkNvdG9udGlEeW5hbWljTW9kYWxMYWJlbFwiPiR7dGhpcy50aXRsZX08L2g1PmBcclxuICAgICAgICAgICAgICAgICsgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj4nXHJcbiAgICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICAgICsgYDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+JHt0aGlzLmNvbnRlbnR9PC9kaXY+YFxyXG4gICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48L2Rpdj4nXHJcbiAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICArICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbFdyYXBwZXIuaW5uZXJIVE1MID0gbW9kYWxIVE1MO1xyXG4gICAgICAgIHRoaXMuI2VsZW1lbnQgPSBtb2RhbFdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG4gICAgICAgIHRoaXMuI2FkZEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSBtb2RhbCB0byB0aGUgYm9keVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy4jZWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgYW5kIHNob3cgdGhlIG1vZGFsXHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgYm9vdHN0cmFwLk1vZGFsKHRoaXMuI2VsZW1lbnQpO1xyXG4gICAgICAgIG1vZGFsLnNob3coKTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBtb2RhbCBmcm9tIHRoZSBET00gYWZ0ZXIgaXQgaXMgaGlkZGVuXHJcbiAgICAgICAgdGhpcy4jZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuI2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgI2FkZEJ1dHRvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuI2J1aWxkQnV0dG9ucygpO1xyXG5cclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gJycgfHwgYnV0dG9ucyA9PT0gW10pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZm9vdGVyJyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYnV0dG9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGJ1dHRvbnM7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGJ1dHRvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MICs9IGJ1dHRvbjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgI2J1aWxkQnV0dG9ucygpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBsZXQgYnV0dG9ucyA9IHRoaXMuYnV0dG9ucztcclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gW10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChidXR0b25zID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+Q2xvc2U8L2J1dHRvbj4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidXR0b25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYnV0dG9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidXR0b25EYXRhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGJ1dHRvbkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLmxhYmVsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gYnV0dG9uRGF0YS5sYWJlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgYnV0dG9uRGF0YS5idG5UeXBlICE9PSB1bmRlZmluZWQgPyBidXR0b25EYXRhLmJ0blR5cGUgOiAnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkRhdGEudHlwZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi0nICsgYnV0dG9uRGF0YS50eXBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5jbG9zZU9uQ2xpY2sgIT09IHVuZGVmaW5lZCAmJiBidXR0b25EYXRhLmNsb3NlT25DbGljayA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtZGlzbWlzcycsICdtb2RhbCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLm9uQ2xpY2sgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgYnV0dG9uRGF0YS5vbkNsaWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7cmV0dXJuIGJ1dHRvbkRhdGEub25DbGljayhldmVudCl9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChidXR0b24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufSIsImltcG9ydCB7U2VydmVyRXZlbnRzfSBmcm9tICcuL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMnO1xyXG5pbXBvcnQge1RvYXN0fSBmcm9tIFwiLi9Ub2FzdFwiO1xyXG5pbXBvcnQge01vZGFsfSBmcm9tIFwiLi9Nb2RhbFwiO1xyXG5cclxuLyoqXHJcbiAqIEJhc2UgQ290b250aSBjbGFzc1xyXG4gKi9cclxuY2xhc3MgQ290b250aUFwcGxpY2F0aW9uXHJcbntcclxuICAgIGNmZyA9IHt9O1xyXG4gICAgTCA9IHt9O1xyXG5cclxuICAgICNzZXZlckV2ZW50cyA9IG51bGw7XHJcblxyXG4gICAgaW5pdChkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuY29uZmlnICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jZmcgPSBkYXRhLmNvbmZpZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhLmxhbmcgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLkwgPSBkYXRhLmxhbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IFNlcnZlciBFdmVudHMgb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJucyB7U2VydmVyRXZlbnRzfVxyXG4gICAgICovXHJcbiAgICBnZXRTZXJ2ZXJFdmVudHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI3NldmVyRXZlbnRzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldmVyRXZlbnRzID0gbmV3IFNlcnZlckV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy4jc2V2ZXJFdmVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IENvbmZpcm0gZGlhbG9nIG1vZGFsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9rTGFiZWxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjYW5jZWxMYWJlbFxyXG4gICAgICogQHRvZG8gdHJhbnNsYXRlZCBkZWZhdWx0IGxhYmVsc1xyXG4gICAgICovXHJcbiAgICBjb25maXJtKHRpdGxlLCBjb250ZW50LCBjYWxsYmFjaywgb2tMYWJlbCA9ICdPaycsIGNhbmNlbExhYmVsID0gJ0NhbmNlbCcpIHtcclxuICAgICAgICB0aGlzLm1vZGFsKHRpdGxlLCBjb250ZW50LCBbXHJcbiAgICAgICAgICAgIHtsYWJlbDogb2tMYWJlbCwgb25DbGljazogKGV2ZW50KSA9PiB7cmV0dXJuIGNhbGxiYWNrKGV2ZW50KX0sIHR5cGU6ICdwcmltYXJ5JywgY2xvc2VPbkNsaWNrOiB0cnVlfSxcclxuICAgICAgICAgICAge2xhYmVsOiBjYW5jZWxMYWJlbCwgY2xvc2VPbkNsaWNrOiB0cnVlLCB0eXBlOiAnc2Vjb25kYXJ5J31cclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgTW9kYWwgaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7KHtcclxuICAgICAqICAgIGxhYmVsOiBTdHJpbmcsXHJcbiAgICAgKiAgICBvbkNsaWNrOiBmdW5jdGlvbnx1bmRlZmluZWQsXHJcbiAgICAgKiAgICBjbG9zZU9uQ2xpY2s6IGJvb2x8dW5kZWZpbmVkLFxyXG4gICAgICogICAgdHlwZTogc3RyaW5nfHVuZGVmaW5lZCxcclxuICAgICAqICAgIGJ0blR5cGU6IHN0cmluZ3x1bmRlZmluZWRcclxuICAgICAqICB9fHN0cmluZylbXXxudWxsfSBidXR0b25zXHJcbiAgICAgKiAgQHJldHVybnMgTW9kYWxcclxuICAgICAqL1xyXG4gICAgZ2V0TW9kYWwoY29udGVudCwgdGl0bGUgPSAnJywgYnV0dG9ucz0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTW9kYWwoY29udGVudCwgdGl0bGUsIGJ1dHRvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBNb2RhbCBwcm9ncmFtbWF0aWNhbGx5XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0geyh7XHJcbiAgICAgKiAgICBsYWJlbDogU3RyaW5nLFxyXG4gICAgICogICAgb25DbGljazogZnVuY3Rpb258dW5kZWZpbmVkLFxyXG4gICAgICogICAgY2xvc2VPbkNsaWNrOiBib29sfHVuZGVmaW5lZCxcclxuICAgICAqICAgIHR5cGU6IHN0cmluZ3x1bmRlZmluZWQsXHJcbiAgICAgKiAgICBidG5UeXBlOiBzdHJpbmd8dW5kZWZpbmVkXHJcbiAgICAgKiAgfXxzdHJpbmcpW118bnVsbH0gYnV0dG9uc1xyXG4gICAgICogIEByZXR1cm5zIE1vZGFsXHJcbiAgICAgKi9cclxuICAgIG1vZGFsKGNvbnRlbnQsIHRpdGxlID0gJycsIGJ1dHRvbnM9IG51bGwpIHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXMuZ2V0TW9kYWwoY29udGVudCwgdGl0bGUsIGJ1dHRvbnMpO1xyXG4gICAgICAgIG1vZGFsLnNob3coKTtcclxuICAgICAgICByZXR1cm4gbW9kYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaGludFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcclxuICAgICAqIEByZXR1cm5zIFRvYXN0XHJcbiAgICAgKi9cclxuICAgIGdldFRvYXN0KG1lc3NhZ2UsIHRpdGxlID0gJycsIGhpbnQgPSAnJywgdHlwZSA9ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUb2FzdChtZXNzYWdlLCB0aXRsZSwgaGludCwgdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaGludFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheVxyXG4gICAgICovXHJcbiAgICB0b2FzdChtZXNzYWdlLCB0aXRsZSA9ICcnLCBoaW50ID0gJycsIHR5cGUgPSAnJywgZGVsYXkgPSA1MDAwKSB7XHJcbiAgICAgICAgY29uc3QgdG9hc3QgPSB0aGlzLmdldFRvYXN0KG1lc3NhZ2UsIHRpdGxlLCBoaW50LCB0eXBlKTtcclxuXHJcbiAgICAgICAgaWYgKGRlbGF5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRvYXN0LmRlbGF5ID0gZGVsYXlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvYXN0LnNob3coKTtcclxuICAgICAgICByZXR1cm4gdG9hc3Q7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBkYXRhIGZyb20gL2luZGV4LnBocD9uPW1haW4mYT1nZXRcclxuICAgICAqIENhbiBiZSB1c2VmdWwsIGZvciBleGFtcGxlIHdoZW4gaXQgaXMgbmVlZGVkIHRvIGxvYWQgc29tZSBkeW5hbWljIGNvbnRlbnQgdG8gY2FjaGVkIHBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBFeGFtcGxlOlxyXG4gICAgICogY290LmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAqICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgKiB9KTtcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2hhdCBBcnJheSBvciBzdHJpbmcuIERhdGEgdG8gbG9hZC4gRm9yIGV4YW1wbGUsIFsnY2FwdGNoYScsICd4J10gKHggLSBhbnRpIFhTUyBwYXJhbWV0ZXIgdmFsdWUpXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7fT59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWREYXRhKHdoYXQpIHtcclxuICAgICAgICBpZiAoIXdoYXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkRGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhdGFUb0xvYWQgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aGF0ID09PSAnc3RyaW5nJyB8fCB3aGF0IGluc3RhbmNlb2YgU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHdoYXQgPSBbd2hhdF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHdoYXQpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhVG9Mb2FkLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhVG9Mb2FkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gQHRvZG8gY2hhbmdlIHRvIHN5c3RlbSBjb250cm9sbGVyIHdoZW4gaXQgd2lsbCBiZSBpbXBsZW1lbnRlZFxyXG4gICAgICAgICAgICBsZXQgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7bjogJ21haW4nLCBhOiAnZ2V0J30pO1xyXG5cclxuICAgICAgICAgICAgZGF0YVRvTG9hZC5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2RhdGFbJyArIGluZGV4ICsgJ10nLCBpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ19hamF4JywgMSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaW5kZXgucGhwPycgKyBwYXJhbXMudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhW2tleV0gPSByZXNwb25zZURhdGEuZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSFRUUCBlcnJvclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBlcnJvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICgoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaXRlbV0gPSB0aGlzLmxvYWRlZERhdGFbaXRlbV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGNhcHRjaGEgdmlhIGFqYXguIFVzZWQgb24gY2FjaGVkIHBhZ2VzLlxyXG4gICAgICovXHJcbiAgICBsb2FkQ2FwdGNoYSgpIHtcclxuICAgICAgICB0aGlzLmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgbGV0IGNhcHRjaGFFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXB0Y2hhLXBsYWNlLWhvbGRlcicpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIGNhcHRjaGFFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSByZXN1bHQuY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYXB0Y2hhLXBsYWNlLWhvbGRlcicsICdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NhcHRjaGEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gZWxlbWVudC5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFggPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZT1cInhcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRYICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0WC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmVzdWx0LngpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgeW91IGFwcGVuZCA8c2NyaXB0PiB0YWdzIHRvIHRoZSBlbGVtZW50cyBvZiB0aGUgZmluaXNoZWQgRE9NIGRvY3VtZW50LCB0aGV5IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKiBUaGUgbWV0aG9kIGV4ZWN1dGVzIDxzY3JpcHQ+IHNjcmlwdHMgbmVzdGVkIGluIHRoZSBzcGVjaWZpZWQgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsZW1lbnQgTm9kZVxyXG4gICAgICovXHJcbiAgICBleGVjdXRlU2NyaXB0RWxlbWVudHMoY29udGFpbmVyRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnRzID0gY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKTtcclxuXHJcbiAgICAgICAgQXJyYXkuZnJvbShzY3JpcHRFbGVtZW50cykuZm9yRWFjaCgoc2NyaXB0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjbG9uZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudC5hdHRyaWJ1dGVzKS5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsb25lZEVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC50ZXh0ID0gc2NyaXB0RWxlbWVudC50ZXh0O1xyXG4gICAgICAgICAgICBzY3JpcHRFbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lZEVsZW1lbnQsIHNjcmlwdEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuY290ID0gbmV3IENvdG9udGlBcHBsaWNhdGlvbigpO1xyXG4iXX0=
