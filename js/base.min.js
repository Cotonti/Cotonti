/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
function encodeURIfix(e){return encodeURI(decodeURI(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")}function getBaseHref(){var e=document.getElementsByTagName("base")[0].href;return null==e?"/":e}function popup(e,t,n){window.open(getBaseHref()+"index.php?o="+e,"","toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width="+t+",height="+n+",left=32,top=16")}function pfs(e,t,n,o){window.open(getBaseHref()+"index.php?e=pfs&userid="+e+"&c1="+t+"&c2="+n+"&parser="+o,"PFS","status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16")}function redirect(e){location.href=e.options[e.selectedIndex].value}function toggleblock(e){var t=document.getElementById(e);return"none"==t.style.display?t.style.display="":t.style.display="none",!1}function toggleAll(e){var t=document.querySelectorAll('[id^="blk_"]');for(i=0;i<t.length;i++)"hide"==e?t[i].style.display="none":"show"==e&&(t[i].style.display="table-row-group");return!1}function insertText(e,t,n){var o=null;e||(e=document);e:for(var s=0;s<e.forms.length;s++)for(var a=0;a<e.forms[s].elements.length;a++)if(e.forms[s].elements[a].name==t){o=e.forms[s].elements[a];break e}if(!o)return!1;if(e.selection)o.focus(),e.selection.createRange().text=n;else if(o.selectionStart||0==o.selectionStart){var i=o.selectionStart,r=o.selectionEnd;o.value=o.value.substring(0,i)+n+o.value.substring(r,o.value.length)}else o.value+=n;return!0}(()=>{"use strict";class e extends EventTarget{mode="production";driverType="";constructor(e,t=null){super(),this.driverType=e,null!==t&&(this.mode=t),this.init()}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsClient: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class t extends EventTarget{mode="production";eventsUrl=null;constructor(e,t=null){super(),null!==t&&""!==t&&(this.mode=t),this.eventsUrl=e}init(){}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsDriver: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class n extends t{#e=null;init(){if(null!==this.#e)return;"production"!==this.mode&&console.log("init ServerEventsSSEDriver. ",this.eventsUrl);const e=this.eventsUrl+"&ts="+Date.now();this.#e=new EventSource(e),"production"!==this.mode&&(this.#e.onopen=function(e){console.log("ServerEventsSSEDriver connection is open")}),this.#e.onmessage=e=>{const t=JSON.parse(e.data);void 0!==t.data&&"string"==typeof t.data&&""!==t.data&&(t.data=JSON.parse(t.data)),t.eventId=e.lastEventId,this.onEventTriggered(t)},"production"!==this.mode&&(this.#e.onerror=function(e){console.log("ServerEventsSSEDriver connection error")})}}class o extends t{#t=6e3;#n=null;#o=!1;init(){this.#o||(this.#o=!0,"production"!==this.mode&&console.log("init ServerEventsAjaxDriver ",this.eventsUrl),this.#n=setTimeout((()=>this.#s()),500))}async#s(){try{const e=this.eventsUrl+"&ts="+Date.now(),t=await fetch(e);if(!t.ok)throw new Error(`Response status: ${t.status}`);const n=await t.json();void 0!==n.events&&n.events.forEach((e=>{e.eventId=void 0!==e.id?e.id:null,this.onEventTriggered(e)})),this.#n=setTimeout((()=>this.#s()),this.#t)}catch(e){console.log("ServerEventsAjaxDriver get events error: "+e.message),this.#n=setTimeout((()=>this.#s()),this.#t)}}}class s{#a="/";#i="production";constructor(e=null,t=null){null!==e&&(this.#a=e),null!==t&&(this.#i=t)}getByType(e){let t=null;const s=this.#a+"?n=server-events&a=sse",a=this.#a+"?n=server-events&a=ajax&_ajax=1";return"sse"===e?(t=new n(s),"production"!==this.#i&&console.log("using ServerEventsSSEDriver",s)):(t=new o(a),"production"!==this.#i&&console.log("using ServerEventsAjaxDriver",a)),t}}class a extends e{init(){"production"!==this.mode&&console.log("init ServerEventsClient");const e=new s(getBaseHref(),this.mode).getByType(this.driverType,this.mode);e.addEventListener("event",(e=>{this.onEventTriggered(e.detail)})),e.init()}}class i extends e{init(){let e="/js/sharedWorkerServerEvents.min.js";"production"!==this.mode&&console.log("init ServerEventsSharedWorkerClient: "+e);try{const t=new SharedWorker(e).port;t.postMessage({config:{mode:this.mode,driver:this.driverType,baseUrl:getBaseHref()}}),t.onmessage=e=>{"production"!==this.mode&&console.log("ServerSentEventsSharedWorker event",e.data),this.onEventTriggered(e.data)}}catch(e){console.error(e)}}}class r{mode="production";#r=null;#l="sharedWorker";#d="sse";#c=null;constructor(){this.#c=new Map,this.#d=cot.cfg.serverEvents}addObserver(e,t,n){"none"!==cot.cfg.serverEvents&&(this.#c.set(e,{name:e,event:t,onEvent:n}),null===this.#r&&this.#h())}#h(){"none"!==cot.cfg.serverEvents&&("sharedWorker"===this.#l&&void 0!==typeof SharedWorker?("production"!==this.mode&&console.log("creating ServerEventsSharedWorkerClient"),this.#r=new i(this.#d,this.mode)):("production"!==this.mode&&console.log("creating ServerEventsClient"),this.#r=new a(this.#d,this.mode)),this.#r.addEventListener("event",(e=>{this.#u(e.detail)})))}#u(e){"production"!==this.mode&&console.log("Server triggered event",e),this.#c.forEach((t=>{t.event===e.event&&"function"==typeof t.onEvent&&t.onEvent(e)}))}}class l{static containerClass="toast-container position-fixed bottom-0 end-0 p-3";title="";message="";hint="";type="";delay=5e3;#m=null;constructor(e,t="",n="",o=""){void 0!==window.bootstrap?(this.title=t,this.message=e,this.hint=n,this.type=o):console.error('Bootstrap is not found. It is required for use "Toast" component')}show(){if(null===this.#m){let e=document.getElementById("toast-container");null===e&&(e=this.#v()),this.#m=e}const e=`<strong class="me-auto">${this.title}</strong>`,t=""!==this.hint?`<small>${this.hint}</small>`:"",n=`<div class="toast${""!==this.type?` text-bg-${this.type}`:""}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="${this.delay}"><div class="toast-header">${e}${t}<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div><div class="toast-body">${this.message}</div></div>`,o=document.createElement("div");o.innerHTML=n;const s=o.firstElementChild;this.#m.appendChild(s),new window.bootstrap.Toast(s).show(),this.#m.lastElementChild.addEventListener("hidden.bs.toast",(()=>{s.remove(),""===this.#m.innerHTML&&(this.#m.remove(),this.#m=null)}))}#v(){const e=document.createElement("div");return e.id="toast-container",e.className=l.containerClass,document.body.append(e),e}}class d{title="";content="";buttons=null;centered=!1;dialogClass="modal-dialog";#p=null;constructor(e,t="",n=null){void 0!==window.bootstrap?(this.title=t,this.content=e,this.buttons=n):console.error('Bootstrap is not found. It is required for use "Modal" component')}show(){let e=this.dialogClass;this.centered&&(e+=" modal-dialog-centered");const t=`<div class="modal fade" id="CotontiDynamicModal" tabindex="-1" aria-labelledby="CotontiDynamicModalLabel" aria-hidden="true"><div class="${e}"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="CotontiDynamicModalLabel">${this.title}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">${this.content}</div><div class="modal-footer"></div></div></div></div>`,n=document.createElement("div");n.innerHTML=t,this.#p=n.firstElementChild,this.#f(),document.body.appendChild(this.#p),new bootstrap.Modal(this.#p).show(),this.#p.addEventListener("hidden.bs.modal",(()=>{this.#p.remove()}))}#f(){const e=this.#g();if(""===e||e===[])return;const t=this.#p.querySelector(".modal-footer");"string"!=typeof e?Array.isArray(e)&&e.forEach((e=>{"string"!=typeof e?t.appendChild(e):t.innerHTML+=e})):t.innerHTML=e}#g(){const e=[];let t=this.buttons;return t===[]?e:null===t?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':"string"==typeof t?t:(Array.isArray(t)&&t.forEach((t=>{if("string"==typeof t)return void e.push(t);const n=document.createElement("button");void 0!==t.label&&(n.innerHTML=t.label),n.setAttribute("type",void 0!==t.btnType?t.btnType:"button"),n.classList.add("btn"),void 0!==t.type&&n.classList.add("btn-"+t.type),void 0!==t.closeOnClick&&!0===t.closeOnClick&&n.setAttribute("data-bs-dismiss","modal"),void 0!==t.onClick&&"function"==typeof t.onClick&&n.addEventListener("click",(e=>t.onClick(e))),e.push(n)})),e)}}window.cot=new class{cfg={};L={};#y=null;init(e){void 0!==e.config&&(this.cfg=e.config),void 0!==e.lang&&(this.L=e.lang)}getServerEvents(){return null===this.#y&&(this.#y=new r),this.#y}confirm(e,t,n,o="Ok",s="Cancel"){this.modal(e,t,[{label:o,onClick:e=>n(e),type:"primary",closeOnClick:!0},{label:s,closeOnClick:!0,type:"secondary"}])}getModal(e,t="",n=null){return new d(e,t,n)}modal(e,t="",n=null){const o=this.getModal(e,t,n);return o.show(),o}getToast(e,t="",n="",o=""){return new l(e,t,n,o)}toast(e,t="",n="",o="",s=5e3){const a=this.getToast(e,t,n,o);return null!==s&&(a.delay=s),a.show(),a}async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let t=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let n of e)n in this.loadedData||t.push(n);if(t.length>0){let n=new URLSearchParams({n:"main",a:"get"});t.forEach(((e,t,o)=>{n.append("data["+t+"]",e)})),n.append("_ajax",1);try{let e=await fetch("index.php?"+n.toString());if(e.ok){const t=await e.json();if(t.success)for(const e in t.data)this.loadedData[e]=t.data[e]}}catch(e){}}let n={};for(let t of e)t in this.loadedData&&(n[t]=this.loadedData[t]);return n}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let t=document.querySelectorAll(".captcha-place-holder");for(let n of t){n.innerHTML=e.captcha,this.executeScriptElements(n),n.classList.remove("captcha-place-holder","loading"),n.classList.add("captcha");const t=n.closest("form");if(null!==t){let n=t.querySelector('input[type="hidden"][name="x"]');null!==n&&n.setAttribute("value",e.x)}}}))}executeScriptElements(e){const t=e.querySelectorAll("script");Array.from(t).forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.text=e.text,e.parentNode.replaceChild(t,e)}))}}})();var ajaxErrorHandlers=new Array,ajaxSuccessHandlers=new Array,ajaxEnabled=!1;if("undefined"!=typeof jQuery)var ajaxCurrentBase=location.href.replace($("base").eq(0).attr("href"),"").replace(/\?.*$/,"").replace(/#.*$/,"");var ajaxUsed=!1,ajaxError=!1;function ajaxSend(e){var t=e.method?e.method.toUpperCase():"GET",n=e.data||"",o=e.url||$("#"+e.formId).attr("action");if("POST"===t)n+="&"+$("#"+e.formId).serialize();else if(e.formId){var s=o.indexOf("?")>0?"&":"?";o+=s+$("#"+e.formId).serialize()}return $.ajax({type:t,url:encodeURIfix(o),data:n,beforeSend:function(){e.nonshowloading||$("#"+e.divId).append('<span style="position:absolute; left:'+($("#"+e.divId).width()/2-110)+"px;top:"+($("#"+e.divId).height()/2-9)+'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css("position","relative")},success:function(t){e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500);for(var n=0;n<ajaxSuccessHandlers.length;n++)ajaxSuccessHandlers[n].func?ajaxSuccessHandlers[n].func(t):ajaxSuccessHandlers[n](t)},error:function(t){if(e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500),ajaxErrorHandlers.length>0)for(var n=0;n<ajaxErrorHandlers.length;n++)ajaxErrorHandlers[n].func?ajaxErrorHandlers[n].func(t):ajaxErrorHandlers[n](t);else alert("AJAX error: "+t),ajaxError=!0}}),!1}function ajaxPageLoad(e){""!==e&&e.replace(/^#/,"");var t=e.match(/^get(-.*?)?;(.*)$/);if(t){var n=t[2].indexOf(";")>0?t[2].replace(";","?"):ajaxCurrentBase+"?"+decodeURIComponent(t[2]);return ajaxUsed=!0,ajaxSend({method:"GET",url:n,divId:t[1]?t[1].substr(1):"ajaxBlock"})}return""!==e||!ajaxUsed||ajaxSend({url:location.href.replace(/#.*$/,""),divId:"ajaxBlock"})}function ajaxFormLoad(e,t){var n=e.match(/^(get|post)(-.*?)?;(.*)$/);if(n){var o=n[3].indexOf(";")>0?n[3].replace(";","?"):ajaxCurrentBase+"?"+n[3];return ajaxUsed=!0,ajaxSend({method:n[1].toUpperCase(),url:o,divId:n[2]?n[2].substr(1):"ajaxBlock",formId:t})}return!0}function ajaxMakeHash(e,t,n){var o,s,a="post"==n?"post":"get",i="?",r=!!t&&t.match(/(get|post)(-[^ ;]+)?(;\S*)?/);return r&&(a=r[1],r[2]&&(a+=r[2]),r[3]&&(e=r[3].substr(1),i=";")),a+=";",e.indexOf(i)>0?(o=e.substr(0,e.indexOf(i)),s=e.substr(e.indexOf(i)+1),n&&"post"!=n&&(s+="&"+n)):(o=e,s="",n&&"post"!=n&&(s+=i+n)),a+=o==ajaxCurrentBase?s:o+";"+s}function bindHandlers(){("#comments"==location.hash||location.hash.match(/#c\d+/))&&$(".comments").css("display",""),$(".comments_link").click((function(){"none"==$(".comments").css("display")?$(".comments").css("display",""):$(".comments").css("display","none")})),location.href.match(/#comments/)&&$(".comments").css("display",""),ajaxEnabled&&($("body").on("submit","form.ajax",(function(){return"POST"==$(this).attr("method").toUpperCase()?ajaxFormLoad(ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),"post"),$(this).attr("id")):window.location.hash=ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),$(this).serialize()),ajaxError})),$("body").on("click","a.ajax",(function(){return window.location.hash=ajaxMakeHash($(this).attr("href").replace(/#.*$/,""),$(this).attr("rel")),ajaxError})),$("body").on("click","a.confirmLink",(function(){return!$(this).attr("href").match(/message.+920/i)||($("#confirmBox")&&$("#confirmBox").remove(),$("body").prepend('<div id="confirmBox" class="jqmWindow"></div>'),$("#confirmBox").jqm({ajax:$(this).attr("href"),modal:!0,onLoad:function(){$("#confirmBox").css("margin-left","-"+$("#confirmBox").width()/2+"px"),$("#confirmBox").css("margin-top","-"+$("#confirmBox").height()/2+"px")}}),$("#confirmBox").jqmShow(),!1)})),$(window).on("hashchange",(function(){ajaxPageLoad(window.location.hash.replace(/^#/,""))})),$("body").on("click","a#confirmNo",(function(){return!$("#confirmBox").is(".jqmWindow")||($("#confirmBox").jqmHide(),$("#confirmBox").remove(),!1)})))}"undefined"!=typeof jQuery&&$(document).ready((function(){ajaxEnabled&&""!=window.location.hash&&ajaxPageLoad(window.location.hash.replace(/^#/,"")),bindHandlers()})),window.name="main";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2NsaWVudC9CYXNlU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9kcml2ZXIvQmFzZVNlcnZlckV2ZW50c0RyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c1NTRURyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c0FqYXhEcml2ZXIuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9TZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvVG9hc3QuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvQ290b250aUFwcGxpY2F0aW9uLmpzIl0sIm5hbWVzIjpbImVuY29kZVVSSWZpeCIsInN0ciIsImVuY29kZVVSSSIsImRlY29kZVVSSSIsInJlcGxhY2UiLCJnZXRCYXNlSHJlZiIsImhyZWYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicG9wdXAiLCJjb2RlIiwidyIsImgiLCJ3aW5kb3ciLCJvcGVuIiwicGZzIiwiaWQiLCJjMSIsImMyIiwicGFyc2VyIiwicmVkaXJlY3QiLCJ1cmwiLCJsb2NhdGlvbiIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwidmFsdWUiLCJ0b2dnbGVibG9jayIsImJsIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJ0b2dnbGVBbGwiLCJhY3Rpb24iLCJibGtzIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJpbnNlcnRUZXh0IiwiZG9jT2JqIiwiZmllbGROYW1lIiwiZmllbGQiLCJmaW5kRmllbGQiLCJmb3JtcyIsImoiLCJlbGVtZW50cyIsIm5hbWUiLCJzZWxlY3Rpb24iLCJmb2N1cyIsImNyZWF0ZVJhbmdlIiwidGV4dCIsInNlbGVjdGlvblN0YXJ0Iiwic3RhcnRQb3MiLCJlbmRQb3MiLCJzZWxlY3Rpb25FbmQiLCJzdWJzdHJpbmciLCJCYXNlU2VydmVyRXZlbnRzQ2xpZW50IiwiRXZlbnRUYXJnZXQiLCJtb2RlIiwiZHJpdmVyVHlwZSIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJ0aGlzIiwiaW5pdCIsIm9uRXZlbnRUcmlnZ2VyZWQiLCJldmVudERhdGEiLCJjb25zb2xlIiwibG9nIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRpc3BhdGNoRXZlbnQiLCJCYXNlU2VydmVyRXZlbnRzRHJpdmVyIiwiZXZlbnRzVXJsIiwiU2VydmVyRXZlbnRzU1NFRHJpdmVyIiwiZSIsIkRhdGUiLCJub3ciLCJFdmVudFNvdXJjZSIsIm9ub3BlbiIsIm9ubWVzc2FnZSIsIkpTT04iLCJwYXJzZSIsImRhdGEiLCJldmVudElkIiwibGFzdEV2ZW50SWQiLCJvbmVycm9yIiwiU2VydmVyRXZlbnRzQWpheERyaXZlciIsInQiLCJuIiwicyIsInNldFRpbWVvdXQiLCJvIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwiZXZlbnRzIiwiZm9yRWFjaCIsImVycm9yIiwibWVzc2FnZSIsIlNlcnZlckV2ZW50c0RyaXZlckZhY3RvcnkiLCJyIiwiYmFzZVVybCIsImdldEJ5VHlwZSIsImRyaXZlciIsInNlcnZlclNlbnRFdmVudHNVcmwiLCJhamF4RXZlbnRzVXJsIiwiU2VydmVyRXZlbnRzQ2xpZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudCIsIndvcmtlclVybCIsInBvcnQiLCJTaGFyZWRXb3JrZXIiLCJwb3N0TWVzc2FnZSIsImNvbmZpZyIsIlNlcnZlckV2ZW50cyIsImEiLCJsIiwiZCIsImMiLCJNYXAiLCJjb3QiLCJjZmciLCJzZXJ2ZXJFdmVudHMiLCJhZGRPYnNlcnZlciIsImNhbGxiYWNrIiwic2V0Iiwib25FdmVudCIsInYiLCJvYnNlcnZlciIsIlRvYXN0Iiwic3RhdGljIiwidGl0bGUiLCJoaW50IiwidHlwZSIsImRlbGF5IiwidSIsImJvb3RzdHJhcCIsInNob3ciLCJjb250YWluZXIiLCJ0b2FzdFRpdGxlIiwidG9hc3RIaW50IiwidG9hc3RIVE1MIiwidG9hc3RXcmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInRvYXN0RWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiYXBwZW5kQ2hpbGQiLCJsYXN0RWxlbWVudENoaWxkIiwicmVtb3ZlIiwibSIsImNsYXNzTmFtZSIsImNvbnRhaW5lckNsYXNzIiwiYm9keSIsImFwcGVuZCIsIk1vZGFsIiwiY29udGVudCIsImJ1dHRvbnMiLCJjZW50ZXJlZCIsImRpYWxvZ0NsYXNzIiwicCIsIm1vZGFsSFRNTCIsIm1vZGFsV3JhcHBlciIsImciLCJxdWVyeVNlbGVjdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwiYnV0dG9uIiwiRSIsImJ1dHRvbkRhdGEiLCJwdXNoIiwibGFiZWwiLCJzZXRBdHRyaWJ1dGUiLCJidG5UeXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2VPbkNsaWNrIiwib25DbGljayIsIkwiLCJ5IiwibGFuZyIsImdldFNlcnZlckV2ZW50cyIsImNvbmZpcm0iLCJva0xhYmVsIiwiY2FuY2VsTGFiZWwiLCJtb2RhbCIsImdldE1vZGFsIiwiZ2V0VG9hc3QiLCJ0b2FzdCIsImxvYWREYXRhIiwid2hhdCIsImxvYWRlZERhdGEiLCJkYXRhVG9Mb2FkIiwiU3RyaW5nIiwiaXRlbSIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImluZGV4IiwiYXJyYXkiLCJ0b1N0cmluZyIsInJlc3BvbnNlRGF0YSIsInN1Y2Nlc3MiLCJrZXkiLCJsb2FkQ2FwdGNoYSIsInRoZW4iLCJjYXB0Y2hhRWxlbWVudHMiLCJlbGVtZW50IiwiY2FwdGNoYSIsImV4ZWN1dGVTY3JpcHRFbGVtZW50cyIsImZvcm0iLCJjbG9zZXN0IiwiaW5wdXRYIiwieCIsImNvbnRhaW5lckVsZW1lbnQiLCJzY3JpcHRFbGVtZW50cyIsImZyb20iLCJzY3JpcHRFbGVtZW50IiwiY2xvbmVkRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGUiLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwiYWpheEVycm9ySGFuZGxlcnMiLCJhamF4U3VjY2Vzc0hhbmRsZXJzIiwiYWpheEVuYWJsZWQiLCJqUXVlcnkiLCJhamF4Q3VycmVudEJhc2UiLCIkIiwiZXEiLCJhdHRyIiwiYWpheFVzZWQiLCJhamF4RXJyb3IiLCJhamF4U2VuZCIsInNldHRpbmdzIiwibWV0aG9kIiwidG9VcHBlckNhc2UiLCJmb3JtSWQiLCJzZXJpYWxpemUiLCJzZXAiLCJpbmRleE9mIiwiYWpheCIsImJlZm9yZVNlbmQiLCJub25zaG93bG9hZGluZyIsImRpdklkIiwid2lkdGgiLCJoZWlnaHQiLCJjc3MiLCJtc2ciLCJub25zaG93ZmFkZWluIiwiaHRtbCIsImhpZGUiLCJmYWRlSW4iLCJmdW5jIiwiYWxlcnQiLCJhamF4UGFnZUxvYWQiLCJoYXNoIiwibWF0Y2giLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdWJzdHIiLCJhamF4Rm9ybUxvYWQiLCJhamF4TWFrZUhhc2giLCJyZWwiLCJmb3JtRGF0YSIsImhyZWZCYXNlIiwiYmluZEhhbmRsZXJzIiwiY2xpY2siLCJvbiIsInByZXBl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LE9BQUEsRUFBQW9GLE9BQUEsV0FDQTFDLEVBQUEsZUFBQW1CLElBQUEsa0JBQUFuQixFQUFBLGVBQUFpQixRQUFBLFFBQ0FqQixFQUFBLGVBQUFtQixJQUFBLGlCQUFBbkIsRUFBQSxlQUFBa0IsU0FBQSxPQUNBLElBQ0FsQixFQUFBLGVBQUEyQyxXQUNBLEVBSUEsSUFHQTNDLEVBQUExTixRQUFBaVEsR0FBQSx5QkFDQVosYUFBQXJQLE9BQUFTLFNBQUE2TyxLQUFBL1AsUUFBQSxTQUNBLElBRUFtTyxFQUFBLFFBQUF1QyxHQUFBLGtDQUNBLE9BQUF2QyxFQUFBLGVBQUE0QyxHQUFBLGdCQUVBNUMsRUFBQSxlQUFBNkMsVUFDQTdDLEVBQUEsZUFBQTlFLFVBQ0EsRUFNQSxJQUVBLENBRUEsb0JBQUE0RSxRQUNBRSxFQUFBaE8sVUFBQThRLE9BQUEsV0FFQWpELGFBQ0EsSUFBQXZOLE9BQUFTLFNBQUE2TyxNQUNBRCxhQUFBclAsT0FBQVMsU0FBQTZPLEtBQUEvUCxRQUFBLFVBSUF3USxjQUNBLElBR0EvUCxPQUFBZ0MsS0FBQSIsImZpbGUiOiJiYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGVuY29kZVVSSWZpeChzdHIpIHtcclxuXHQvLyB0byBwcmV2ZW50IHR3aWNlIGVuY29kaW5nXHJcblx0Ly8gYW5kIGZpeCAnWycsJ10nIHNpZ25zIHRvIGZvbGxvdyBSRkMzOTg2IChzZWN0aW9uLTMuMi4yKVxyXG5cdHJldHVybiBlbmNvZGVVUkkoZGVjb2RlVVJJKHN0cikpLnJlcGxhY2UoLyU1Qi9nLCAnWycpLnJlcGxhY2UoLyU1RC9nLCAnXScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCYXNlSHJlZigpIHtcclxuXHR2YXIgaHJlZiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdiYXNlJylbMF0uaHJlZjtcclxuXHRpZiAoaHJlZiA9PSBudWxsKSB7XHJcblx0XHRyZXR1cm4gJy8nO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm4gaHJlZjtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvcHVwKGNvZGUsIHcsIGgpe1xyXG4gICAgd2luZG93Lm9wZW4oZ2V0QmFzZUhyZWYoKSArICdpbmRleC5waHA/bz0nICsgY29kZSwgJycsICd0b29sYmFyPTAsbG9jYXRpb249MCxkaXJlY3Rvcmllcz0wLG1lbnVCYXI9MCxyZXNpemFibGU9MCxzY3JvbGxiYXJzPXllcyx3aWR0aD0nICsgdyArICcsaGVpZ2h0PScgKyBoICsgJyxsZWZ0PTMyLHRvcD0xNicpO1xyXG59XHJcblxyXG4vKipcclxuICogQHRvZG8gbW92ZSB0byBwZnMgbW9kdWxlXHJcbiAqL1xyXG5mdW5jdGlvbiBwZnMoaWQsIGMxLCBjMiwgcGFyc2VyKXtcclxuICAgIHdpbmRvdy5vcGVuKFxyXG5cdFx0Z2V0QmFzZUhyZWYoKSArICdpbmRleC5waHA/ZT1wZnMmdXNlcmlkPScgKyBpZCArICcmYzE9JyArIGMxICsgJyZjMj0nICsgYzIgKyAnJnBhcnNlcj0nICsgcGFyc2VyLFxyXG5cdFx0J1BGUycsXHJcblx0XHQnc3RhdHVzPTEsIHRvb2xiYXI9MCxsb2NhdGlvbj0wLGRpcmVjdG9yaWVzPTAsbWVudUJhcj0wLHJlc2l6YWJsZT0xLHNjcm9sbGJhcnM9eWVzLHdpZHRoPTc1NCxoZWlnaHQ9NTEyLGxlZnQ9MzIsdG9wPTE2J1xyXG5cdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZGlyZWN0KHVybCl7XHJcbiAgICBsb2NhdGlvbi5ocmVmID0gdXJsLm9wdGlvbnNbdXJsLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVibG9jayhpZCl7XHJcbiAgICB2YXIgYmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICBpZiAoYmwuc3R5bGUuZGlzcGxheSA9PSAnbm9uZScpIHtcclxuICAgICAgICBibC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBibC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQWxsKGFjdGlvbikge1xyXG5cdHZhciBibGtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2lkXj1cImJsa19cIl0nKTtcclxuXHRmb3IgKGkgPSAwOyBpIDwgYmxrcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKGFjdGlvbiA9PSAnaGlkZScpIHtcclxuXHRcdFx0Ymxrc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0fSBlbHNlIGlmIChhY3Rpb24gPT0gJ3Nob3cnKSB7XHJcblx0XHRcdGJsa3NbaV0uc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3ctZ3JvdXAnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8vIEluc2VydHMgdGV4dCBpbnRvIHRleHRhcmVhIGF0IGN1cnNvciBwb3NpdGlvblxyXG5mdW5jdGlvbiBpbnNlcnRUZXh0KGRvY09iaiwgZmllbGROYW1lLCB2YWx1ZSkge1xyXG5cdHZhciBmaWVsZCA9IG51bGw7XHJcblx0aWYgKCFkb2NPYmopIHtcclxuXHRcdGRvY09iaiA9IGRvY3VtZW50O1xyXG5cdH1cclxuXHQvLyBGaW5kIHRoZSBmaWVsZCBpbiB0aGUgZG9jT2JqXHJcblx0ZmluZEZpZWxkOlxyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZG9jT2JqLmZvcm1zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvY09iai5mb3Jtc1tpXS5lbGVtZW50cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRpZiAoZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzW2pdLm5hbWUgPT0gZmllbGROYW1lKSB7XHJcblx0XHRcdFx0ZmllbGQgPSBkb2NPYmouZm9ybXNbaV0uZWxlbWVudHNbal07XHJcblx0XHRcdFx0YnJlYWsgZmluZEZpZWxkO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmICghZmllbGQpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIEluc2VydCB0aGUgdGV4dFxyXG5cdGlmIChkb2NPYmouc2VsZWN0aW9uKSB7XHJcblx0XHQvLyBNU0lFIGFuZCBPcGVyYVxyXG5cdFx0ZmllbGQuZm9jdXMoKTtcclxuXHRcdHZhciBzZWwgPSBkb2NPYmouc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XHJcblx0XHRzZWwudGV4dCA9IHZhbHVlO1xyXG5cdH0gZWxzZSBpZiAoZmllbGQuc2VsZWN0aW9uU3RhcnQgfHwgZmllbGQuc2VsZWN0aW9uU3RhcnQgPT0gMCkge1xyXG5cdFx0Ly8gTW96aWxsYVxyXG5cdFx0dmFyIHN0YXJ0UG9zID0gZmllbGQuc2VsZWN0aW9uU3RhcnQ7XHJcblx0XHR2YXIgZW5kUG9zID0gZmllbGQuc2VsZWN0aW9uRW5kO1xyXG5cdFx0ZmllbGQudmFsdWUgPSBmaWVsZC52YWx1ZS5zdWJzdHJpbmcoMCwgc3RhcnRQb3MpICsgdmFsdWUgKyBmaWVsZC52YWx1ZS5zdWJzdHJpbmcoZW5kUG9zLCBmaWVsZC52YWx1ZS5sZW5ndGgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRmaWVsZC52YWx1ZSArPSB2YWx1ZTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8vIEFycmF5IG9mIGFqYXggZXJyb3IgaGFuZGxlcnNcclxuLy8gRXhhbXBsZSBvZiB1c2U6XHJcbi8vIGFqYXhFcnJvckhhbmRsZXJzLnB1c2goe2Z1bmM6IG15RXJyb3JIYW5kbGVyfSk7XHJcbi8vIGFqYXhTdWNjZXNzSGFuZGxlcnMucHVzaCh7ZnVuYzogbXlTdWNjZXNzSGFuZGxlcn0pO1xyXG52YXIgYWpheEVycm9ySGFuZGxlcnMgPSBuZXcgQXJyYXkoKTtcclxudmFyIGFqYXhTdWNjZXNzSGFuZGxlcnMgPSBuZXcgQXJyYXkoKTtcclxuLy8gQUpBWCBlbmFibGVtZW50IGRlZmF1bHRzIHRvIGZhbHNlXHJcbnZhciBhamF4RW5hYmxlZCA9IGZhbHNlO1xyXG4vLyBSZXF1aXJlZCB0byBjYWxjdWxhdGUgcGF0aHNcclxuaWYgKHR5cGVvZiBqUXVlcnkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuXHR2YXIgYWpheEN1cnJlbnRCYXNlID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCQoJ2Jhc2UnKS5lcSgwKS5hdHRyKCdocmVmJyksICcnKS5yZXBsYWNlKC9cXD8uKiQvLCAnJykucmVwbGFjZSgvIy4qJC8sICcnKTtcclxufVxyXG4vLyBUaGlzIGZsYWcgaW5kaWNhdGVzIHRoYXQgQUpBWCtoaXN0b3J5IGhhcyBiZWVuIHVzZWQgb24gdGhpcyBwYWdlXHJcbi8vIEl0IG1lYW5zIHRoYXQgXCIjXCIgb3IgaG9tZSBsaW5rIHNob3VsZCBiZSBsb2FkZWQgdmlhIGFqYXggdG9vXHJcbnZhciBhamF4VXNlZCA9IGZhbHNlO1xyXG4vLyBHbG9iYWwgZmxhZyB0byBsZXQgZXZlcnlib2R5IGtub3cgdGhhdCBBSkFYIGhhcyBmYWlsZWRcclxudmFyIGFqYXhFcnJvciA9IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIEFKQVggaGVscGVyIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7aGFzaH0gc2V0dGluZ3MgQSBoYXNodGFibGUgd2l0aCBzZXR0aW5nc1xyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheFNlbmQoc2V0dGluZ3MpIHtcclxuXHR2YXIgbWV0aG9kID0gc2V0dGluZ3MubWV0aG9kID8gc2V0dGluZ3MubWV0aG9kLnRvVXBwZXJDYXNlKCkgOiAnR0VUJztcclxuXHR2YXIgZGF0YSA9IHNldHRpbmdzLmRhdGEgfHwgJyc7XHJcblx0dmFyIHVybCA9IHNldHRpbmdzLnVybCB8fCAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuYXR0cignYWN0aW9uJyk7XHJcblx0aWYgKG1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcblx0XHRkYXRhICs9ICcmJyArICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5zZXJpYWxpemUoKTtcclxuXHR9IGVsc2UgaWYgKHNldHRpbmdzLmZvcm1JZCkge1xyXG5cdFx0dmFyIHNlcCA9IHVybC5pbmRleE9mKCc/JykgPiAwID8gJyYnIDogJz8nO1xyXG5cdFx0dXJsICs9IHNlcCArICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5zZXJpYWxpemUoKTtcclxuXHR9XHJcblx0JC5hamF4KHtcclxuXHRcdHR5cGU6IG1ldGhvZCxcclxuXHRcdHVybDogZW5jb2RlVVJJZml4KHVybCksXHJcblx0XHRkYXRhOiBkYXRhLFxyXG5cdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKVxyXG5cdFx0XHRcdFx0LmFwcGVuZCgnPHNwYW4gc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDonICsgKCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLndpZHRoKCkvMiAtIDExMCkgKyAncHg7dG9wOicgKyAoJCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGVpZ2h0KCkvMiAtIDkpICsgJ3B4O1wiIGNsYXNzPVwibG9hZGluZ1wiIGlkPVwibG9hZGluZ1wiPjxpbWcgc3JjPVwiLi9pbWFnZXMvc3Bpbm5lci5naWZcIiBhbHQ9XCJsb2FkaW5nXCIvPjwvc3Bhbj4nKS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRzdWNjZXNzOiBmdW5jdGlvbihtc2cpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyNsb2FkaW5nJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93ZmFkZWluKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGlkZSgpLmh0bWwobXNnKS5mYWRlSW4oNTAwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5odG1sKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhamF4U3VjY2Vzc0hhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYoYWpheFN1Y2Nlc3NIYW5kbGVyc1tpXS5mdW5jKVxyXG5cdFx0XHRcdFx0YWpheFN1Y2Nlc3NIYW5kbGVyc1tpXS5mdW5jKG1zZyk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0YWpheFN1Y2Nlc3NIYW5kbGVyc1tpXShtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0ZXJyb3I6IGZ1bmN0aW9uKG1zZykge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnI2xvYWRpbmcnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dmYWRlaW4pIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oaWRlKCkuaHRtbChtc2cpLmZhZGVJbig1MDApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmh0bWwobXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoYWpheEVycm9ySGFuZGxlcnMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWpheEVycm9ySGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChhamF4RXJyb3JIYW5kbGVyc1tpXS5mdW5jKSB7XHJcblx0XHRcdFx0XHRcdGFqYXhFcnJvckhhbmRsZXJzW2ldLmZ1bmMobXNnKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGFqYXhFcnJvckhhbmRsZXJzW2ldKG1zZyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFsZXJ0KCdBSkFYIGVycm9yOiAnICsgbXNnKTtcclxuXHRcdFx0XHRhamF4RXJyb3IgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogQUpBWCBzdWJwYWdlIGxvYWRlciB3aXRoIGhpc3Rvcnkgc3VwcG9ydFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBBIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhQYWdlTG9hZChoYXNoKSB7XHJcbiAgICBpZiAoaGFzaCAhPT0gJycpIHtcclxuXHRcdGhhc2gucmVwbGFjZSgvXiMvLCAnJyk7XHJcblx0fVxyXG5cdHZhciBtID0gaGFzaC5tYXRjaCgvXmdldCgtLio/KT87KC4qKSQvKTtcclxuXHRpZiAobSkge1xyXG5cdFx0Ly8gYWpheCBib29rbWFya1xyXG4gICAgICAgIHZhciB1cmwgPSBtWzJdLmluZGV4T2YoJzsnKSA+IDAgPyBtWzJdLnJlcGxhY2UoJzsnLCAnPycpIDogYWpheEN1cnJlbnRCYXNlICsgJz8nICsgZGVjb2RlVVJJQ29tcG9uZW50KG1bMl0pO1xyXG5cdFx0YWpheFVzZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIGFqYXhTZW5kKHtcclxuXHRcdFx0bWV0aG9kOiAnR0VUJyxcclxuXHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdGRpdklkOiBtWzFdID8gbVsxXS5zdWJzdHIoMSkgOiAnYWpheEJsb2NrJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIGlmIChoYXNoID09PSAnJyAmJiBhamF4VXNlZCkge1xyXG5cdFx0Ly8gYWpheCBob21lXHJcblx0XHRyZXR1cm4gYWpheFNlbmQgKHtcclxuXHRcdFx0dXJsOiBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKiQvLCAnJyksXHJcblx0XHRcdGRpdklkOiAnYWpheEJsb2NrJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQUpBWCBzdWJmb3JtIGxvYWRlciB3aXRob3V0IGhpc3RvcnkgdHJhY2tpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggQSBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtSWQgVGFyZ2V0IGZvcm0gaWQgYXR0cmlidXRlXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4Rm9ybUxvYWQoaGFzaCwgZm9ybUlkKSB7XHJcblx0dmFyIG0gPSBoYXNoLm1hdGNoKC9eKGdldHxwb3N0KSgtLio/KT87KC4qKSQvKTtcclxuXHRpZiAobSkge1xyXG5cdFx0Ly8gYWpheCBib29rbWFya1xyXG5cdFx0dmFyIHVybCA9IG1bM10uaW5kZXhPZignOycpID4gMCA/IG1bM10ucmVwbGFjZSgnOycsICc/JykgOiBhamF4Q3VycmVudEJhc2UgKyAnPycgKyBtWzNdO1xyXG5cdFx0YWpheFVzZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIGFqYXhTZW5kKHtcclxuXHRcdFx0bWV0aG9kOiBtWzFdLnRvVXBwZXJDYXNlKCksXHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRkaXZJZDogbVsyXSA/IG1bMl0uc3Vic3RyKDEpIDogJ2FqYXhCbG9jaycsXHJcblx0XHRcdGZvcm1JZDogZm9ybUlkXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGFqYXhhYmxlIGhhc2ggc3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBocmVmIExpbmsgaHJlZiBvciBmb3JtIGFjdGlvbiBhdHRyaWJ1dGVcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlbCBBbiBhdHRyaWJ1dGUgdmFsdWUgcG9zc2libHkgY29udGFpbmluZyBhIGhhc2ggYWRkcmVzc1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybURhdGEgSXMgcGFzc2VkIGZvciBmb3JtcyBvbmx5LCBpcyAncG9zdCcgZm9yIFBPU1QgZm9ybXNcclxuICogb3Igc2VyaWFsaXplZCBmb3JtIGRhdGEgZm9yIEdFVCBmb3Jtc1xyXG4gKiBAcmV0dXJuIEEgdmFsaWQgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAdHlwZSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhNYWtlSGFzaChocmVmLCByZWwsIGZvcm1EYXRhKSB7XHJcblx0dmFyIGhhc2ggPSAoZm9ybURhdGEgPT0gJ3Bvc3QnKSA/ICdwb3N0JyA6ICdnZXQnO1xyXG5cdHZhciBocmVmQmFzZSwgcGFyYW1zO1xyXG5cdHZhciBzZXAgPSAnPyc7XHJcblx0dmFyIG0gPSByZWwgPyByZWwubWF0Y2goLyhnZXR8cG9zdCkoLVteIDtdKyk/KDtcXFMqKT8vKSA6IGZhbHNlO1xyXG5cdGlmIChtKSB7XHJcblx0XHRoYXNoID0gbVsxXTtcclxuXHRcdGlmIChtWzJdKSB7XHJcblx0XHRcdGhhc2ggKz0gbVsyXTtcclxuXHRcdH1cclxuXHRcdGlmIChtWzNdKSB7XHJcblx0XHRcdGhyZWYgPSBtWzNdLnN1YnN0cigxKTtcclxuXHRcdFx0c2VwICA9ICc7JztcclxuXHRcdH1cclxuXHR9XHJcblx0aGFzaCArPSAnOydcclxuXHRpZiAoaHJlZi5pbmRleE9mKHNlcCkgPiAwKSB7XHJcblx0XHRocmVmQmFzZSA9IGhyZWYuc3Vic3RyKDAsIGhyZWYuaW5kZXhPZihzZXApKTtcclxuXHRcdHBhcmFtcyA9IGhyZWYuc3Vic3RyKGhyZWYuaW5kZXhPZihzZXApICsgMSk7XHJcblx0XHRpZiAoZm9ybURhdGEgJiYgZm9ybURhdGEgIT0gJ3Bvc3QnKSB7XHJcblx0XHRcdHBhcmFtcyArPSAnJicgKyBmb3JtRGF0YTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0aHJlZkJhc2UgPSBocmVmO1xyXG5cdFx0cGFyYW1zID0gJyc7XHJcblx0XHRpZiAoZm9ybURhdGEgJiYgZm9ybURhdGEgIT0gJ3Bvc3QnKSB7XHJcblx0XHRcdHBhcmFtcyArPSBzZXAgKyBmb3JtRGF0YTtcclxuXHRcdH1cclxuXHR9XHJcblx0aGFzaCArPSBocmVmQmFzZSA9PSBhamF4Q3VycmVudEJhc2UgPyBwYXJhbXMgOiBocmVmQmFzZSArICc7JyArIHBhcmFtcztcclxuXHRyZXR1cm4gaGFzaDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YW5kYXJkIGV2ZW50IGJpbmRpbmdzXHJcbiAqL1xyXG5mdW5jdGlvbiBiaW5kSGFuZGxlcnMoKSB7XHJcblx0aWYgKGxvY2F0aW9uLmhhc2ggPT0gJyNjb21tZW50cycgfHwgbG9jYXRpb24uaGFzaC5tYXRjaCgvI2NcXGQrLykpIHtcclxuXHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHR9XHJcblx0JCgnLmNvbW1lbnRzX2xpbmsnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdGlmKCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScpID09ICdub25lJykge1xyXG5cdFx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRpZihsb2NhdGlvbi5ocmVmLm1hdGNoKC8jY29tbWVudHMvKSkge1xyXG5cdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdH1cclxuXHJcblx0aWYgKGFqYXhFbmFibGVkKSB7XHJcblx0XHQvLyBBSkFYIGF1dG8taGFuZGxpbmdcclxuXHRcdCQoJ2JvZHknKS5vbignc3VibWl0JywgJ2Zvcm0uYWpheCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdtZXRob2QnKS50b1VwcGVyQ2FzZSgpID09ICdQT1NUJykge1xyXG5cdFx0XHRcdGFqYXhGb3JtTG9hZChhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdhY3Rpb24nKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ2NsYXNzJyksICdwb3N0JyksICQodGhpcykuYXR0cignaWQnKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdhY3Rpb24nKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ2NsYXNzJyksICQodGhpcykuc2VyaWFsaXplKCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBhamF4RXJyb3I7XHJcblx0XHR9KTtcclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYS5hamF4JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignaHJlZicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cigncmVsJykpO1xyXG5cdFx0XHRyZXR1cm4gYWpheEVycm9yO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQUpBWCBhY3Rpb24gY29uZmlybWF0aW9uc1xyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhLmNvbmZpcm1MaW5rJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmF0dHIoJ2hyZWYnKS5tYXRjaCgvbWVzc2FnZS4rOTIwL2kpKSB7XHJcblx0XHRcdFx0aWYgKCQoJyNjb25maXJtQm94JykpIHtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQoJ2JvZHknKS5wcmVwZW5kKCc8ZGl2IGlkPVwiY29uZmlybUJveFwiIGNsYXNzPVwianFtV2luZG93XCI+PC9kaXY+Jyk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW0oe2FqYXg6JCh0aGlzKS5hdHRyKCdocmVmJyksbW9kYWw6dHJ1ZSxvbkxvYWQ6ZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykuY3NzKCdtYXJnaW4tbGVmdCcsICctJysoJCgnI2NvbmZpcm1Cb3gnKS53aWR0aCgpLzIpKydweCcpO1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5jc3MoJ21hcmdpbi10b3AnLCAnLScrKCQoJyNjb25maXJtQm94JykuaGVpZ2h0KCkvMikrJ3B4Jyk7XHJcblx0XHRcdFx0fX0pO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtU2hvdygpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTGlzdGVuIHRvIGhhc2ggY2hhbmdlIGV2ZW50c1xyXG5cdFx0JCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGFqYXhQYWdlTG9hZCh3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIy8sICcnKSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EjY29uZmlybU5vJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKFwiI2NvbmZpcm1Cb3hcIikuaXMoXCIuanFtV2luZG93XCIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW1IaWRlKCk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiBqUXVlcnkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIElmIHBhZ2Ugd2FzIGxvYWRlZCB3aXRoIGhhc2hcclxuICAgICAgICBpZiAoYWpheEVuYWJsZWQpIHtcclxuICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhhc2ggIT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGFqYXhQYWdlTG9hZCh3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIy8sICcnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJpbmRIYW5kbGVycygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbndpbmRvdy5uYW1lID0gJ21haW4nOyIsIi8qKlxyXG4gKiBCYXNlIHNlcnZlciBldmVudHMgY2xpZW50XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZVNlcnZlckV2ZW50c0NsaWVudCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ3xudWxsfVxyXG4gICAgICovXHJcbiAgICBtb2RlID0gJ3Byb2R1Y3Rpb24nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgZHJpdmVyVHlwZSA9ICcnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRyaXZlclR5cGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IG1vZGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZHJpdmVyVHlwZSwgbW9kZSA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmRyaXZlclR5cGUgPSBkcml2ZXJUeXBlO1xyXG5cclxuICAgICAgICBpZiAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c0NsaWVudDogU2VydmVyIHRyaWdnZXJlZCBldmVudCcsIGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnZXZlbnQnLCB7ZGV0YWlsOiBldmVudERhdGF9KTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIEJhc2Ugc2VydmVyIGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCYXNlU2VydmVyRXZlbnRzRHJpdmVyIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cclxuICAgICAqL1xyXG4gICAgZXZlbnRzVXJsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihldmVudHNVcmwsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKG1vZGUgIT09IG51bGwgJiYgbW9kZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ldmVudHNVcmwgPSBldmVudHNVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHsgfVxyXG5cclxuICAgIG9uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJFdmVudHNEcml2ZXI6IFNlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2V2ZW50Jywge2RldGFpbDogZXZlbnREYXRhfSk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0RyaXZlcn0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0RyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciAtIFNlbnQgZXZlbnRzIGRyaXZlclxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50c1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50c1NTRURyaXZlciBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNEcml2ZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7RXZlbnRTb3VyY2V8bnVsbH1cclxuICAgICAqL1xyXG4gICAgI2V2ZW50U291cmNlID0gbnVsbDtcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNldmVudFNvdXJjZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyRXZlbnRzU1NFRHJpdmVyLiAnLCB0aGlzLmV2ZW50c1VybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmV2ZW50c1VybCArICcmdHM9JyArIERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UodXJsKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9ub3BlbiA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c1NTRURyaXZlciBjb25uZWN0aW9uIGlzIG9wZW4nKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudERhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZXZlbnREYXRhLmRhdGEgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGV2ZW50RGF0YS5kYXRhID09PSAnc3RyaW5nJykgJiYgZXZlbnREYXRhLmRhdGEgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZGF0YSA9IEpTT04ucGFyc2UoZXZlbnREYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50RGF0YS5ldmVudElkID0gZXZlbnQubGFzdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25FdmVudFRyaWdnZXJlZChldmVudERhdGEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLiNldmVudFNvdXJjZS5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzU1NFRHJpdmVyIGNvbm5lY3Rpb24gZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0RyaXZlcn0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0RyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBldmVudHMgYWpheCBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyIGV4dGVuZHMgQmFzZVNlcnZlckV2ZW50c0RyaXZlciB7XHJcbiAgICAjdGltZU91dFBlcmlvZCA9IDYwMDA7IC8vIDYgc2VjLlxyXG5cclxuICAgICN0aW1lcklkID0gbnVsbDtcclxuXHJcbiAgICAjaW5pdGVkID0gZmFsc2U7XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jaW5pdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2luaXRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdCBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyICcsIHRoaXMuZXZlbnRzVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI3RpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuI2dldEV2ZW50cygpLCA1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jICNnZXRFdmVudHMoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5ldmVudHNVcmwgKyAnJnRzPScgKyBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVzcG9uc2Ugc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0LmV2ZW50cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZXZlbnRJZCA9IGV2ZW50LmlkICE9PSB1bmRlZmluZWQgPyBldmVudC5pZCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiN0aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLiNnZXRFdmVudHMoKSwgdGhpcy4jdGltZU91dFBlcmlvZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c0FqYXhEcml2ZXIgZ2V0IGV2ZW50cyBlcnJvcjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLiN0aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLiNnZXRFdmVudHMoKSwgdGhpcy4jdGltZU91dFBlcmlvZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtTZXJ2ZXJFdmVudHNTU0VEcml2ZXJ9IGZyb20gXCIuL1NlcnZlckV2ZW50c1NTRURyaXZlclwiO1xyXG5pbXBvcnQge1NlcnZlckV2ZW50c0FqYXhEcml2ZXJ9IGZyb20gXCIuL1NlcnZlckV2ZW50c0FqYXhEcml2ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIHNlcnZlciBldmVudHMgZHJpdmVyXHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeSB7XHJcbiAgICAjYmFzZVVybCA9ICcvJztcclxuXHJcbiAgICAjbW9kZSA9ICdwcm9kdWN0aW9uJ1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJhc2VVcmwgPSBudWxsLCBtb2RlID0gbnVsbCkge1xyXG4gICAgICAgIGlmIChiYXNlVXJsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNtb2RlID0gbW9kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZHJpdmVyVHlwZVxyXG4gICAgICogQHJldHVybnMge1NlcnZlckV2ZW50c1NTRURyaXZlcnxTZXJ2ZXJFdmVudHNBamF4RHJpdmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRCeVR5cGUoZHJpdmVyVHlwZSkge1xyXG4gICAgICAgIGxldCBkcml2ZXIgPSBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBzZXJ2ZXJTZW50RXZlbnRzVXJsID0gdGhpcy4jYmFzZVVybCArICc/bj1zZXJ2ZXItZXZlbnRzJmE9c3NlJztcclxuICAgICAgICBjb25zdCBhamF4RXZlbnRzVXJsID0gdGhpcy4jYmFzZVVybCArICc/bj1zZXJ2ZXItZXZlbnRzJmE9YWpheCZfYWpheD0xJztcclxuXHJcbiAgICAgICAgc3dpdGNoIChkcml2ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NzZSc6XHJcbiAgICAgICAgICAgICAgICAvLyBTZXJ2ZXItU2VudCBldmVudHMgZHJpdmVyXHJcbiAgICAgICAgICAgICAgICBkcml2ZXIgPSBuZXcgU2VydmVyRXZlbnRzU1NFRHJpdmVyKHNlcnZlclNlbnRFdmVudHNVcmwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI21vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2luZyBTZXJ2ZXJFdmVudHNTU0VEcml2ZXInLCBzZXJ2ZXJTZW50RXZlbnRzVXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGRyaXZlciA9IG5ldyBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyKGFqYXhFdmVudHNVcmwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI21vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2luZyBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyJywgYWpheEV2ZW50c1VybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZHJpdmVyO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCYXNlU2VydmVyRXZlbnRzQ2xpZW50fSBmcm9tIFwiLi9CYXNlU2VydmVyRXZlbnRzQ2xpZW50XCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeX0gZnJvbSBcIi4uL2RyaXZlci9TZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5XCI7XHJcblxyXG4vKipcclxuICogU2VydmVyIGV2ZW50cyBjbGllbnRcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNDbGllbnQgZXh0ZW5kcyBCYXNlU2VydmVyRXZlbnRzQ2xpZW50IHtcclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c0NsaWVudCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IG5ldyBTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5KGdldEJhc2VIcmVmKCksIHRoaXMubW9kZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRyaXZlciA9IGZhY3RvcnkuZ2V0QnlUeXBlKHRoaXMuZHJpdmVyVHlwZSwgdGhpcy5tb2RlKTtcclxuICAgICAgICBkcml2ZXIuYWRkRXZlbnRMaXN0ZW5lcignZXZlbnQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZHJpdmVyLmluaXQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0NsaWVudH0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0NsaWVudFwiO1xyXG5cclxuLyoqXHJcbiAqIFNoYXJlZCB3b3JrZXIgc2VydmVyIGV2ZW50cyBjbGllbnRcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICogQGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NoYXJlZFdvcmtlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudCBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNDbGllbnQge1xyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBsZXQgd29ya2VyVXJsID0gJy9qcy9zaGFyZWRXb3JrZXJTZXJ2ZXJFdmVudHMubWluLmpzJztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudDogJyArIHdvcmtlclVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB3b3JrZXIgPSBuZXcgU2hhcmVkV29ya2VyKHdvcmtlclVybCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcnQgPSB3b3JrZXIucG9ydDtcclxuXHJcbiAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2Uoe2NvbmZpZzoge21vZGU6IHRoaXMubW9kZSwgZHJpdmVyOiB0aGlzLmRyaXZlclR5cGUsIGJhc2VVcmw6IGdldEJhc2VIcmVmKCl9fSk7XHJcblxyXG4gICAgICAgICAgICBwb3J0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlclNlbnRFdmVudHNTaGFyZWRXb3JrZXIgZXZlbnQnLCBldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudFRyaWdnZXJlZChldmVudC5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c0NsaWVudH0gZnJvbSBcIi4vY2xpZW50L1NlcnZlckV2ZW50c0NsaWVudFwiO1xyXG5pbXBvcnQge1NlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudH0gZnJvbSBcIi4vY2xpZW50L1NlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudFwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBldmVudHNcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHMge1xyXG4gICAgbW9kZSA9ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtudWxsfFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudHxTZXJ2ZXJFdmVudHNDbGllbnR9XHJcbiAgICAgKi9cclxuICAgICNjbGllbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgI2NsaWVudFR5cGUgPSAnc2hhcmVkV29ya2VyJztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd9ICdzc2UnIChmb3IgU2VydmVyLVNlbnQgZXZlbnRzKSAsICdhamF4JyBvciAnd2Vic29ja2V0JyAobm90IGltcGxlbWVudGVkIHlldClcclxuICAgICAqL1xyXG4gICAgI2RyaXZlclR5cGUgPSAnc3NlJztcclxuXHJcbiAgICAjb2JzZXJ2ZXJzUmVnaXN0cnkgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuI2RyaXZlclR5cGUgPSBjb3QuY2ZnLnNlcnZlckV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIGFkZE9ic2VydmVyKG5hbWUsIGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmIChjb3QuY2ZnLnNlcnZlckV2ZW50cyA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5LnNldChuYW1lLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgb25FdmVudDogY2FsbGJhY2tcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuI2NsaWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNpbml0Q2xpZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICNpbml0Q2xpZW50KCkge1xyXG4gICAgICAgIGlmIChjb3QuY2ZnLnNlcnZlckV2ZW50cyA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLiNjbGllbnRUeXBlID09PSAnc2hhcmVkV29ya2VyJyAmJiAodHlwZW9mIFNoYXJlZFdvcmtlciAhPT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBTZXJ2ZXJFdmVudHNTaGFyZWRXb3JrZXJDbGllbnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNjbGllbnQgPSBuZXcgU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50KHRoaXMuI2RyaXZlclR5cGUsIHRoaXMubW9kZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRpbmcgU2VydmVyRXZlbnRzQ2xpZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jY2xpZW50ID0gbmV3IFNlcnZlckV2ZW50c0NsaWVudCh0aGlzLiNkcml2ZXJUeXBlLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jY2xpZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2V2ZW50JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuI29uRXZlbnRUcmlnZ2VyZWQoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAjb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXZlbnQgPT09IGV2ZW50RGF0YS5ldmVudFxyXG4gICAgICAgICAgICAgICAgJiYgdHlwZW9mIG9ic2VydmVyLm9uRXZlbnQgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vbkV2ZW50KGV2ZW50RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBUb2FzdFxyXG4gKiBTaG93IFRvYXN0cyBwcm9ncmFtbWF0aWNhbGx5XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzUuMy9jb21wb25lbnRzL3RvYXN0cy9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb2FzdCB7XHJcbiAgICBzdGF0aWMgY29udGFpbmVyQ2xhc3MgPSAndG9hc3QtY29udGFpbmVyIHBvc2l0aW9uLWZpeGVkIGJvdHRvbS0wIGVuZC0wIHAtMyc7XHJcblxyXG4gICAgdGl0bGUgPSAnJztcclxuICAgIG1lc3NhZ2UgPSAnJztcclxuICAgIGhpbnQgPSAnJztcclxuICAgIHR5cGUgPSAnJztcclxuICAgIGRlbGF5ID0gNTAwMDtcclxuXHJcbiAgICAjY29udGFpbmVyID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCB0aXRsZSA9ICcnLCBoaW50ID0gJycsIHR5cGUgPSAnJykge1xyXG4gICAgICAgIGlmICh3aW5kb3cuYm9vdHN0cmFwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQm9vdHN0cmFwIGlzIG5vdCBmb3VuZC4gSXQgaXMgcmVxdWlyZWQgZm9yIHVzZSBcIlRvYXN0XCIgY29tcG9uZW50Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuaGludCA9IGhpbnQ7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNjb250YWluZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdC1jb250YWluZXInKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gdGhpcy4jY3JlYXRlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdG9hc3RUaXRsZSA9IGA8c3Ryb25nIGNsYXNzPVwibWUtYXV0b1wiPiR7dGhpcy50aXRsZX08L3N0cm9uZz5gO1xyXG4gICAgICAgIGNvbnN0IHRvYXN0SGludCA9IHRoaXMuaGludCAhPT0gJycgPyBgPHNtYWxsPiR7dGhpcy5oaW50fTwvc21hbGw+YCA6ICcnO1xyXG4gICAgICAgIGNvbnN0IGJhY2tHcm91bmQgPSB0aGlzLnR5cGUgIT09ICcnID8gYCB0ZXh0LWJnLSR7dGhpcy50eXBlfWAgOiAnJztcclxuXHJcbiAgICAgICAgY29uc3QgdG9hc3RIVE1MID0gYDxkaXYgY2xhc3M9XCJ0b2FzdCR7YmFja0dyb3VuZH1cIiByb2xlPVwiYWxlcnRcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiBgXHJcbiAgICAgICAgICAgICAgICArIGBkYXRhLWJzLWRlbGF5PVwiJHt0aGlzLmRlbGF5fVwiPmBcclxuICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInRvYXN0LWhlYWRlclwiPidcclxuICAgICAgICAgICAgICArIGAke3RvYXN0VGl0bGV9JHt0b2FzdEhpbnR9YFxyXG4gICAgICAgICAgICAgICsgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwidG9hc3RcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj4nXHJcbiAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgKyBgPGRpdiBjbGFzcz1cInRvYXN0LWJvZHlcIj4ke3RoaXMubWVzc2FnZX08L2Rpdj5gXHJcbiAgICAgICAgICArICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0b2FzdFdyYXBwZXIuaW5uZXJIVE1MID0gdG9hc3RIVE1MO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdEVsZW1lbnQgPSB0b2FzdFdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgdG9hc3QgdG8gdGhlIGNvbnRhaW5lclxyXG4gICAgICAgIHRoaXMuI2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2FzdEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSB0b2FzdFxyXG4gICAgICAgIGNvbnN0IHRvYXN0ID0gbmV3IHdpbmRvdy5ib290c3RyYXAuVG9hc3QodG9hc3RFbGVtZW50KTtcclxuICAgICAgICB0b2FzdC5zaG93KCk7XHJcblxyXG4gICAgICAgIC8vIE9wdGlvbmFsbHkgcmVtb3ZlIHRoZSB0b2FzdCBmcm9tIHRoZSBET00gYWZ0ZXIgaXQgaGlkZXNcclxuICAgICAgICB0aGlzLiNjb250YWluZXIubGFzdEVsZW1lbnRDaGlsZC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMudG9hc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRvYXN0RWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuI2NvbnRhaW5lci5pbm5lckhUTUwgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250YWluZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgI2NyZWF0ZUNvbnRhaW5lcigpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICByZXN1bHQuaWQgPSAndG9hc3QtY29udGFpbmVyJztcclxuICAgICAgICByZXN1bHQuY2xhc3NOYW1lID0gVG9hc3QuY29udGFpbmVyQ2xhc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQocmVzdWx0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIE1vZGFsXHJcbiAqIFNob3cgTW9kYWwgcHJvZ3JhbW1hdGljYWxseVxyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKlxyXG4gKiBAbGluayBodHRwczovL2dldGJvb3RzdHJhcC5jb20vZG9jcy81LjMvY29tcG9uZW50cy9tb2RhbC9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb2RhbCB7XHJcbiAgICB0aXRsZSA9ICcnO1xyXG4gICAgY29udGVudCA9ICcnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUgeyh7bGFiZWw6IFN0cmluZywgb25DbGljazogZnVuY3Rpb24sIGNsb3NlT25DbGljazogYm9vbCwgdHlwZTogc3RyaW5nfXxzdHJpbmcpW118bnVsbH1cclxuICAgICAqL1xyXG4gICAgYnV0dG9ucyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJ0aWNhbGx5IGNlbnRlcmVkXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgY2VudGVyZWQgPSBmYWxzZTtcclxuXHJcbiAgICBkaWFsb2dDbGFzcyA9ICdtb2RhbC1kaWFsb2cnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge0VsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgICNlbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7KHtcclxuICAgICAqICAgIGxhYmVsOiBTdHJpbmcsXHJcbiAgICAgKiAgICBvbkNsaWNrOiBmdW5jdGlvbnx1bmRlZmluZWQsXHJcbiAgICAgKiAgICBjbG9zZU9uQ2xpY2s6IGJvb2x8dW5kZWZpbmVkLFxyXG4gICAgICogICAgdHlwZTogc3RyaW5nfHVuZGVmaW5lZCxcclxuICAgICAqICAgIGJ0blR5cGU6IHN0cmluZ3x1bmRlZmluZWRcclxuICAgICAqICB9fHN0cmluZylbXXxudWxsfSBidXR0b25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQsIHRpdGxlID0gJycsIGJ1dHRvbnMgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5ib290c3RyYXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCb290c3RyYXAgaXMgbm90IGZvdW5kLiBJdCBpcyByZXF1aXJlZCBmb3IgdXNlIFwiTW9kYWxcIiBjb21wb25lbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5idXR0b25zID0gYnV0dG9ucztcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGxldCBkaWFsb2dDbGFzcyA9IHRoaXMuZGlhbG9nQ2xhc3M7XHJcbiAgICAgICAgaWYgKHRoaXMuY2VudGVyZWQpIHtcclxuICAgICAgICAgICAgZGlhbG9nQ2xhc3MgKz0gJyBtb2RhbC1kaWFsb2ctY2VudGVyZWQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxIVE1MID0gJzxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQ9XCJDb3RvbnRpRHluYW1pY01vZGFsXCIgdGFiaW5kZXg9XCItMVwiICdcclxuICAgICAgICAgICAgICAgICsgJ2FyaWEtbGFiZWxsZWRieT1cIkNvdG9udGlEeW5hbWljTW9kYWxMYWJlbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPidcclxuICAgICAgICAgICsgYDxkaXYgY2xhc3M9XCIke2RpYWxvZ0NsYXNzfVwiPmBcclxuICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj4nXHJcbiAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPidcclxuICAgICAgICAgICAgICAgICsgYDxoNSBjbGFzcz1cIm1vZGFsLXRpdGxlXCIgaWQ9XCJDb3RvbnRpRHluYW1pY01vZGFsTGFiZWxcIj4ke3RoaXMudGl0bGV9PC9oNT5gXHJcbiAgICAgICAgICAgICAgICArICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0bi1jbG9zZVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PC9idXR0b24+J1xyXG4gICAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgICArIGA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPiR7dGhpcy5jb250ZW50fTwvZGl2PmBcclxuICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PC9kaXY+J1xyXG4gICAgICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgKyAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWxXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbW9kYWxXcmFwcGVyLmlubmVySFRNTCA9IG1vZGFsSFRNTDtcclxuICAgICAgICB0aGlzLiNlbGVtZW50ID0gbW9kYWxXcmFwcGVyLmZpcnN0RWxlbWVudENoaWxkO1xyXG5cclxuICAgICAgICB0aGlzLiNhZGRCdXR0b25zKCk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgbW9kYWwgdG8gdGhlIGJvZHlcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuI2VsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGFuZCBzaG93IHRoZSBtb2RhbFxyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IGJvb3RzdHJhcC5Nb2RhbCh0aGlzLiNlbGVtZW50KTtcclxuICAgICAgICBtb2RhbC5zaG93KCk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbW9kYWwgZnJvbSB0aGUgRE9NIGFmdGVyIGl0IGlzIGhpZGRlblxyXG4gICAgICAgIHRoaXMuI2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaGlkZGVuLmJzLm1vZGFsJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLiNlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICNhZGRCdXR0b25zKCkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLiNidWlsZEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgaWYgKGJ1dHRvbnMgPT09ICcnIHx8IGJ1dHRvbnMgPT09IFtdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuI2VsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWZvb3RlcicpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGJ1dHRvbnMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBidXR0b25zO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidXR0b25zKSkge1xyXG4gICAgICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidXR0b24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCArPSBidXR0b247XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICNidWlsZEJ1dHRvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XHJcbiAgICAgICAgbGV0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnM7XHJcbiAgICAgICAgaWYgKGJ1dHRvbnMgPT09IFtdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWJzLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYnV0dG9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShidXR0b25zKSkge1xyXG4gICAgICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbkRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYnV0dG9uRGF0YSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChidXR0b25EYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5sYWJlbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGJ1dHRvbkRhdGEubGFiZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsIGJ1dHRvbkRhdGEuYnRuVHlwZSAhPT0gdW5kZWZpbmVkID8gYnV0dG9uRGF0YS5idG5UeXBlIDogJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLnR5cGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4tJyArIGJ1dHRvbkRhdGEudHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkRhdGEuY2xvc2VPbkNsaWNrICE9PSB1bmRlZmluZWQgJiYgYnV0dG9uRGF0YS5jbG9zZU9uQ2xpY2sgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWJzLWRpc21pc3MnLCAnbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5vbkNsaWNrICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGJ1dHRvbkRhdGEub25DbGljayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge3JldHVybiBidXR0b25EYXRhLm9uQ2xpY2soZXZlbnQpfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYnV0dG9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c30gZnJvbSAnLi9zZXJ2ZXJFdmVudHMvU2VydmVyRXZlbnRzLmpzJztcclxuaW1wb3J0IHtUb2FzdH0gZnJvbSBcIi4vVG9hc3RcIjtcclxuaW1wb3J0IHtNb2RhbH0gZnJvbSBcIi4vTW9kYWxcIjtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIENvdG9udGkgY2xhc3NcclxuICovXHJcbmNsYXNzIENvdG9udGlBcHBsaWNhdGlvblxyXG57XHJcbiAgICBjZmcgPSB7fTtcclxuICAgIEwgPSB7fTtcclxuXHJcbiAgICAjc2V2ZXJFdmVudHMgPSBudWxsO1xyXG5cclxuICAgIGluaXQoZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmNvbmZpZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2ZnID0gZGF0YS5jb25maWc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5sYW5nICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5MID0gZGF0YS5sYW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBTZXJ2ZXIgRXZlbnRzIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge1NlcnZlckV2ZW50c31cclxuICAgICAqL1xyXG4gICAgZ2V0U2VydmVyRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNzZXZlckV2ZW50cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNzZXZlckV2ZW50cyA9IG5ldyBTZXJ2ZXJFdmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NldmVyRXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBDb25maXJtIGRpYWxvZyBtb2RhbFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBva0xhYmVsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2FuY2VsTGFiZWxcclxuICAgICAqIEB0b2RvIHRyYW5zbGF0ZWQgZGVmYXVsdCBsYWJlbHNcclxuICAgICAqL1xyXG4gICAgY29uZmlybSh0aXRsZSwgY29udGVudCwgY2FsbGJhY2ssIG9rTGFiZWwgPSAnT2snLCBjYW5jZWxMYWJlbCA9ICdDYW5jZWwnKSB7XHJcbiAgICAgICAgdGhpcy5tb2RhbCh0aXRsZSwgY29udGVudCwgW1xyXG4gICAgICAgICAgICB7bGFiZWw6IG9rTGFiZWwsIG9uQ2xpY2s6IChldmVudCkgPT4ge3JldHVybiBjYWxsYmFjayhldmVudCl9LCB0eXBlOiAncHJpbWFyeScsIGNsb3NlT25DbGljazogdHJ1ZX0sXHJcbiAgICAgICAgICAgIHtsYWJlbDogY2FuY2VsTGFiZWwsIGNsb3NlT25DbGljazogdHJ1ZSwgdHlwZTogJ3NlY29uZGFyeSd9XHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIE1vZGFsIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXHJcbiAgICAgKiBAcGFyYW0geyh7XHJcbiAgICAgKiAgICBsYWJlbDogU3RyaW5nLFxyXG4gICAgICogICAgb25DbGljazogZnVuY3Rpb258dW5kZWZpbmVkLFxyXG4gICAgICogICAgY2xvc2VPbkNsaWNrOiBib29sfHVuZGVmaW5lZCxcclxuICAgICAqICAgIHR5cGU6IHN0cmluZ3x1bmRlZmluZWQsXHJcbiAgICAgKiAgICBidG5UeXBlOiBzdHJpbmd8dW5kZWZpbmVkXHJcbiAgICAgKiAgfXxzdHJpbmcpW118bnVsbH0gYnV0dG9uc1xyXG4gICAgICogIEByZXR1cm5zIE1vZGFsXHJcbiAgICAgKi9cclxuICAgIGdldE1vZGFsKGNvbnRlbnQsIHRpdGxlID0gJycsIGJ1dHRvbnM9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1vZGFsKGNvbnRlbnQsIHRpdGxlLCBidXR0b25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgTW9kYWwgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHsoe1xyXG4gICAgICogICAgbGFiZWw6IFN0cmluZyxcclxuICAgICAqICAgIG9uQ2xpY2s6IGZ1bmN0aW9ufHVuZGVmaW5lZCxcclxuICAgICAqICAgIGNsb3NlT25DbGljazogYm9vbHx1bmRlZmluZWQsXHJcbiAgICAgKiAgICB0eXBlOiBzdHJpbmd8dW5kZWZpbmVkLFxyXG4gICAgICogICAgYnRuVHlwZTogc3RyaW5nfHVuZGVmaW5lZFxyXG4gICAgICogIH18c3RyaW5nKVtdfG51bGx9IGJ1dHRvbnNcclxuICAgICAqICBAcmV0dXJucyBNb2RhbFxyXG4gICAgICovXHJcbiAgICBtb2RhbChjb250ZW50LCB0aXRsZSA9ICcnLCBidXR0b25zPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSB0aGlzLmdldE1vZGFsKGNvbnRlbnQsIHRpdGxlLCBidXR0b25zKTtcclxuICAgICAgICBtb2RhbC5zaG93KCk7XHJcbiAgICAgICAgcmV0dXJuIG1vZGFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBUb2FzdHMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhpbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXHJcbiAgICAgKiBAcmV0dXJucyBUb2FzdFxyXG4gICAgICovXHJcbiAgICBnZXRUb2FzdChtZXNzYWdlLCB0aXRsZSA9ICcnLCBoaW50ID0gJycsIHR5cGUgPSAnJykge1xyXG4gICAgICAgIHJldHVybiBuZXcgVG9hc3QobWVzc2FnZSwgdGl0bGUsIGhpbnQsIHR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBUb2FzdHMgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhpbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXlcclxuICAgICAqL1xyXG4gICAgdG9hc3QobWVzc2FnZSwgdGl0bGUgPSAnJywgaGludCA9ICcnLCB0eXBlID0gJycsIGRlbGF5ID0gNTAwMCkge1xyXG4gICAgICAgIGNvbnN0IHRvYXN0ID0gdGhpcy5nZXRUb2FzdChtZXNzYWdlLCB0aXRsZSwgaGludCwgdHlwZSk7XHJcblxyXG4gICAgICAgIGlmIChkZWxheSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0b2FzdC5kZWxheSA9IGRlbGF5XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0b2FzdC5zaG93KCk7XHJcbiAgICAgICAgcmV0dXJuIHRvYXN0O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgZGF0YSBmcm9tIC9pbmRleC5waHA/bj1tYWluJmE9Z2V0XHJcbiAgICAgKiBDYW4gYmUgdXNlZnVsLCBmb3IgZXhhbXBsZSB3aGVuIGl0IGlzIG5lZWRlZCB0byBsb2FkIHNvbWUgZHluYW1pYyBjb250ZW50IHRvIGNhY2hlZCBwYWdlXHJcbiAgICAgKlxyXG4gICAgICogRXhhbXBsZTpcclxuICAgICAqIGNvdC5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgKiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICogfSk7XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHdoYXQgQXJyYXkgb3Igc3RyaW5nLiBEYXRhIHRvIGxvYWQuIEZvciBleGFtcGxlLCBbJ2NhcHRjaGEnLCAneCddICh4IC0gYW50aSBYU1MgcGFyYW1ldGVyIHZhbHVlKVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e30+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkRGF0YSh3aGF0KSB7XHJcbiAgICAgICAgaWYgKCF3aGF0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlZERhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZERhdGEgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkYXRhVG9Mb2FkID0gW107XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2hhdCA9PT0gJ3N0cmluZycgfHwgd2hhdCBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICB3aGF0ID0gW3doYXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVRvTG9hZC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YVRvTG9hZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIEB0b2RvIGNoYW5nZSB0byBzeXN0ZW0gY29udHJvbGxlciB3aGVuIGl0IHdpbGwgYmUgaW1wbGVtZW50ZWRcclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe246ICdtYWluJywgYTogJ2dldCd9KTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFUb0xvYWQuZm9yRWFjaCgoaXRlbSwgaW5kZXgsIGFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdkYXRhWycgKyBpbmRleCArICddJywgaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdfYWpheCcsIDEpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2luZGV4LnBocD8nICsgcGFyYW1zLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzcG9uc2VEYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkRGF0YVtrZXldID0gcmVzcG9uc2VEYXRhLmRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhUVFAgZXJyb3JcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZXJyb3JcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2Ygd2hhdCkge1xyXG4gICAgICAgICAgICBpZiAoKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2l0ZW1dID0gdGhpcy5sb2FkZWREYXRhW2l0ZW1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBjYXB0Y2hhIHZpYSBhamF4LiBVc2VkIG9uIGNhY2hlZCBwYWdlcy5cclxuICAgICAqL1xyXG4gICAgbG9hZENhcHRjaGEoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjYXB0Y2hhRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FwdGNoYS1wbGFjZS1ob2xkZXInKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBjYXB0Y2hhRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gcmVzdWx0LmNhcHRjaGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVTY3JpcHRFbGVtZW50cyhlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2FwdGNoYS1wbGFjZS1ob2xkZXInLCAnbG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYXB0Y2hhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9IGVsZW1lbnQuY2xvc2VzdCgnZm9ybScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvcm0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXRYID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdW25hbWU9XCJ4XCJdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0WCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFguc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdC54KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHlvdSBhcHBlbmQgPHNjcmlwdD4gdGFncyB0byB0aGUgZWxlbWVudHMgb2YgdGhlIGZpbmlzaGVkIERPTSBkb2N1bWVudCwgdGhleSB3aWxsIG5vdCBiZSBleGVjdXRlZCBhdXRvbWF0aWNhbGx5LlxyXG4gICAgICogVGhlIG1ldGhvZCBleGVjdXRlcyA8c2NyaXB0PiBzY3JpcHRzIG5lc3RlZCBpbiB0aGUgc3BlY2lmaWVkIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbGVtZW50IE5vZGVcclxuICAgICAqL1xyXG4gICAgZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGNvbnRhaW5lckVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50cyA9IGNvbnRhaW5lckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0Jyk7XHJcblxyXG4gICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudHMpLmZvckVhY2goKHNjcmlwdEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2xvbmVkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBBcnJheS5mcm9tKHNjcmlwdEVsZW1lbnQuYXR0cmlidXRlcykuZm9yRWFjaCgoYXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZWRFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUubmFtZSwgYXR0cmlidXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNsb25lZEVsZW1lbnQudGV4dCA9IHNjcmlwdEVsZW1lbnQudGV4dDtcclxuICAgICAgICAgICAgc2NyaXB0RWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZWRFbGVtZW50LCBzY3JpcHRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmNvdCA9IG5ldyBDb3RvbnRpQXBwbGljYXRpb24oKTtcclxuIl19
