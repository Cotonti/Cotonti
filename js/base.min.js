/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
function encodeURIfix(e){return encodeURI(decodeURI(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")}function getBaseHref(){var e=document.getElementsByTagName("base")[0].href;return null==e?"/":e}function popup(e,t,n){window.open(getBaseHref()+"index.php?o="+e,"","toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width="+t+",height="+n+",left=32,top=16")}function pfs(e,t,n,o){window.open(getBaseHref()+"index.php?e=pfs&userid="+e+"&c1="+t+"&c2="+n+"&parser="+o,"PFS","status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16")}function redirect(e){location.href=e.options[e.selectedIndex].value}function toggleblock(e){var t=document.getElementById(e);return"none"==t.style.display?t.style.display="":t.style.display="none",!1}function toggleAll(e){var t=document.querySelectorAll('[id^="blk_"]');for(i=0;i<t.length;i++)"hide"==e?t[i].style.display="none":"show"==e&&(t[i].style.display="table-row-group");return!1}function insertText(e,t,n){var o=null;e||(e=document);e:for(var r=0;r<e.forms.length;r++)for(var a=0;a<e.forms[r].elements.length;a++)if(e.forms[r].elements[a].name==t){o=e.forms[r].elements[a];break e}if(!o)return!1;if(e.selection)o.focus(),e.selection.createRange().text=n;else if(o.selectionStart||0==o.selectionStart){var s=o.selectionStart,i=o.selectionEnd;o.value=o.value.substring(0,s)+n+o.value.substring(i,o.value.length)}else o.value+=n;return!0}(()=>{"use strict";class e{eventsUrl=null;#e=null;onEvent=null;constructor(e,t=null){this.eventsUrl=e,null!==t&&(this.mode=t),this.init()}init(){null===this.#e&&("production"!==this.mode&&console.log("init ServerSentEventsClient"),this.#e=new EventSource(this.eventsUrl),"production"!==this.mode&&(this.#e.onopen=function(e){console.log("ServerSentEventsClient connection is open")}),this.#e.onmessage=e=>{const t=JSON.parse(e.data);void 0!==t.data&&"string"==typeof t.data&&""!==t.data&&(t.data=JSON.parse(t.data)),t.id=e.lastEventId,this.#t(t)},"production"!==this.mode&&(this.#e.onerror=function(e){console.log("ServerSentEventsClient connection error")}))}#t(e){"production"!==this.mode&&console.log("ServerSentEventsClient: Server triggered event",e),"function"!=typeof this.onEvent&&console.error(this.constructor.name+".onEvent is not defined"),this.onEvent(e)}}class t{eventsUrl=null;#n=null;onEvent=null;mode="production";constructor(e,t=null){this.eventsUrl=e,null!==t&&(this.mode=t),this.init()}init(){null===this.#n&&("production"!==this.mode&&console.log("init ServerSentEvents driver"),this.#n=new e(this.eventsUrl,this.mode),this.#n.onEvent=e=>{this.onEventTriggered(e)})}onEventTriggered(e){"function"!=typeof this.onEvent&&console.error(this.constructor.name+".onEvent is not defined"),this.onEvent(e)}}class n extends t{init(){"production"!==this.mode&&console.log("init ServerSentEventsSharedWorker driver");try{const e=new SharedWorker("/js/sharedWorkerSSE.min.js").port;e.postMessage({config:{url:this.eventsUrl,mode:this.mode}}),e.onmessage=e=>{"production"!==this.mode&&console.log("ServerSentEventsSharedWorker event",e.data),this.onEventTriggered(e.data)}}catch(e){console.error(e)}}}class o{#o=null;#r=null;mode="production";constructor(){this.#r=new Map}addObserver(e,t,n){this.#r.set(e,{name:e,event:t,onEvent:n}),null===this.#o&&this.#a()}#a(){const e=getBaseHref()+"index.php?n=server-events";void 0!==typeof SharedWorker?("production"!==this.mode&&console.log("creating ServerSentEventsSharedWorker driver"),this.#o=new n(e,this.mode)):("production"!==this.mode&&console.log("creating ServerSentEvents driver"),this.#o=new t(e,this.mode)),this.#o.onEvent=e=>{this.#s(e)},this.#o.mode=this.mode}#s(e){"production"!==this.mode&&console.log("Server triggered event",e),this.#r.forEach((t=>{t.event===e.event&&"function"==typeof t.onEvent&&t.onEvent(e.data)}))}}window.cot=new class{#i=null;getServerEvents(){return null===this.#i&&(this.#i=new o),this.#i}async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let t=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let n of e)n in this.loadedData||t.push(n);if(t.length>0){let n=new URLSearchParams({n:"main",a:"get"});t.forEach(((e,t,o)=>{n.append("data["+t+"]",e)})),n.append("_ajax",1);try{let e=await fetch("index.php?"+n.toString());if(e.ok){const t=await e.json();if(t.success)for(const e in t.data)this.loadedData[e]=t.data[e]}}catch(e){}}let n={};for(let t of e)t in this.loadedData&&(n[t]=this.loadedData[t]);return n}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let t=document.querySelectorAll(".captcha-place-holder");for(let n of t){n.innerHTML=e.captcha,this.executeScriptElements(n),n.classList.remove("captcha-place-holder","loading"),n.classList.add("captcha");const t=n.closest("form");if(null!==t){let n=t.querySelector('input[type="hidden"][name="x"]');null!==n&&n.setAttribute("value",e.x)}}}))}executeScriptElements(e){const t=e.querySelectorAll("script");Array.from(t).forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.text=e.text,e.parentNode.replaceChild(t,e)}))}}})();var ajaxErrorHandlers=new Array,ajaxSuccessHandlers=new Array,ajaxEnabled=!1;if("undefined"!=typeof jQuery)var ajaxCurrentBase=location.href.replace($("base").eq(0).attr("href"),"").replace(/\?.*$/,"").replace(/#.*$/,"");var ajaxUsed=!1,ajaxError=!1;function ajaxSend(e){var t=e.method?e.method.toUpperCase():"GET",n=e.data||"",o=e.url||$("#"+e.formId).attr("action");if("POST"===t)n+="&"+$("#"+e.formId).serialize();else if(e.formId){var r=o.indexOf("?")>0?"&":"?";o+=r+$("#"+e.formId).serialize()}return $.ajax({type:t,url:encodeURIfix(o),data:n,beforeSend:function(){e.nonshowloading||$("#"+e.divId).append('<span style="position:absolute; left:'+($("#"+e.divId).width()/2-110)+"px;top:"+($("#"+e.divId).height()/2-9)+'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css("position","relative")},success:function(t){e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500);for(var n=0;n<ajaxSuccessHandlers.length;n++)ajaxSuccessHandlers[n].func?ajaxSuccessHandlers[n].func(t):ajaxSuccessHandlers[n](t)},error:function(t){if(e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500),ajaxErrorHandlers.length>0)for(var n=0;n<ajaxErrorHandlers.length;n++)ajaxErrorHandlers[n].func?ajaxErrorHandlers[n].func(t):ajaxErrorHandlers[n](t);else alert("AJAX error: "+t),ajaxError=!0}}),!1}function ajaxPageLoad(e){""!==e&&e.replace(/^#/,"");var t=e.match(/^get(-.*?)?;(.*)$/);if(t){var n=t[2].indexOf(";")>0?t[2].replace(";","?"):ajaxCurrentBase+"?"+decodeURIComponent(t[2]);return ajaxUsed=!0,ajaxSend({method:"GET",url:n,divId:t[1]?t[1].substr(1):"ajaxBlock"})}return""!==e||!ajaxUsed||ajaxSend({url:location.href.replace(/#.*$/,""),divId:"ajaxBlock"})}function ajaxFormLoad(e,t){var n=e.match(/^(get|post)(-.*?)?;(.*)$/);if(n){var o=n[3].indexOf(";")>0?n[3].replace(";","?"):ajaxCurrentBase+"?"+n[3];return ajaxUsed=!0,ajaxSend({method:n[1].toUpperCase(),url:o,divId:n[2]?n[2].substr(1):"ajaxBlock",formId:t})}return!0}function ajaxMakeHash(e,t,n){var o,r,a="post"==n?"post":"get",s="?",i=!!t&&t.match(/(get|post)(-[^ ;]+)?(;\S*)?/);return i&&(a=i[1],i[2]&&(a+=i[2]),i[3]&&(e=i[3].substr(1),s=";")),a+=";",e.indexOf(s)>0?(o=e.substr(0,e.indexOf(s)),r=e.substr(e.indexOf(s)+1),n&&"post"!=n&&(r+="&"+n)):(o=e,r="",n&&"post"!=n&&(r+=s+n)),a+=o==ajaxCurrentBase?r:o+";"+r}function bindHandlers(){("#comments"==location.hash||location.hash.match(/#c\d+/))&&$(".comments").css("display",""),$(".comments_link").click((function(){"none"==$(".comments").css("display")?$(".comments").css("display",""):$(".comments").css("display","none")})),location.href.match(/#comments/)&&$(".comments").css("display",""),ajaxEnabled&&($("body").on("submit","form.ajax",(function(){return"POST"==$(this).attr("method").toUpperCase()?ajaxFormLoad(ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),"post"),$(this).attr("id")):window.location.hash=ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),$(this).serialize()),ajaxError})),$("body").on("click","a.ajax",(function(){return window.location.hash=ajaxMakeHash($(this).attr("href").replace(/#.*$/,""),$(this).attr("rel")),ajaxError})),$("body").on("click","a.confirmLink",(function(){return!$(this).attr("href").match(/message.+920/i)||($("#confirmBox")&&$("#confirmBox").remove(),$("body").prepend('<div id="confirmBox" class="jqmWindow"></div>'),$("#confirmBox").jqm({ajax:$(this).attr("href"),modal:!0,onLoad:function(){$("#confirmBox").css("margin-left","-"+$("#confirmBox").width()/2+"px"),$("#confirmBox").css("margin-top","-"+$("#confirmBox").height()/2+"px")}}),$("#confirmBox").jqmShow(),!1)})),$(window).on("hashchange",(function(){ajaxPageLoad(window.location.hash.replace(/^#/,""))})),$("body").on("click","a#confirmNo",(function(){return!$("#confirmBox").is(".jqmWindow")||($("#confirmBox").jqmHide(),$("#confirmBox").remove(),!1)})))}"undefined"!=typeof jQuery&&$(document).ready((function(){ajaxEnabled&&""!=window.location.hash&&ajaxPageLoad(window.location.hash.replace(/^#/,"")),bindHandlers()})),window.name="main";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL1NlcnZlclNlbnRFdmVudHNDbGllbnQuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9TZXJ2ZXJTZW50RXZlbnRzLmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9kcml2ZXIvU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvU2VydmVyRXZlbnRzLmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL0NvdG9udGlBcHBsaWNhdGlvbi5qcyJdLCJuYW1lcyI6WyJlbmNvZGVVUklmaXgiLCJzdHIiLCJlbmNvZGVVUkkiLCJkZWNvZGVVUkkiLCJyZXBsYWNlIiwiZ2V0QmFzZUhyZWYiLCJocmVmIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBvcHVwIiwiY29kZSIsInciLCJoIiwid2luZG93Iiwib3BlbiIsInBmcyIsImlkIiwiYzEiLCJjMiIsInBhcnNlciIsInJlZGlyZWN0IiwidXJsIiwibG9jYXRpb24iLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsInZhbHVlIiwidG9nZ2xlYmxvY2siLCJibCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwidG9nZ2xlQWxsIiwiYWN0aW9uIiwiYmxrcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIiwiaW5zZXJ0VGV4dCIsImRvY09iaiIsImZpZWxkTmFtZSIsImZpZWxkIiwiZmluZEZpZWxkIiwiZm9ybXMiLCJqIiwiZWxlbWVudHMiLCJuYW1lIiwic2VsZWN0aW9uIiwiZm9jdXMiLCJjcmVhdGVSYW5nZSIsInRleHQiLCJzZWxlY3Rpb25TdGFydCIsInN0YXJ0UG9zIiwiZW5kUG9zIiwic2VsZWN0aW9uRW5kIiwic3Vic3RyaW5nIiwiU2VydmVyU2VudEV2ZW50c0NsaWVudCIsImV2ZW50c1VybCIsImUiLCJvbkV2ZW50IiwiY29uc3RydWN0b3IiLCJtb2RlIiwidGhpcyIsImluaXQiLCJjb25zb2xlIiwibG9nIiwiRXZlbnRTb3VyY2UiLCJvbm9wZW4iLCJldmVudCIsIm9ubWVzc2FnZSIsImV2ZW50RGF0YSIsIkpTT04iLCJwYXJzZSIsImRhdGEiLCJsYXN0RXZlbnRJZCIsIm9uZXJyb3IiLCJ0IiwiZXJyb3IiLCJTZXJ2ZXJTZW50RXZlbnRzIiwibiIsIm9uRXZlbnRUcmlnZ2VyZWQiLCJTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyIiwicG9ydCIsIlNoYXJlZFdvcmtlciIsInBvc3RNZXNzYWdlIiwiY29uZmlnIiwiU2VydmVyRXZlbnRzIiwiciIsIm8iLCJNYXAiLCJhZGRPYnNlcnZlciIsImNhbGxiYWNrIiwic2V0IiwicyIsImZvckVhY2giLCJvYnNlcnZlciIsImNvdCIsImwiLCJnZXRTZXJ2ZXJFdmVudHMiLCJsb2FkRGF0YSIsIndoYXQiLCJsb2FkZWREYXRhIiwiZGF0YVRvTG9hZCIsIlN0cmluZyIsIml0ZW0iLCJwdXNoIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiYSIsImluZGV4IiwiYXJyYXkiLCJhcHBlbmQiLCJyZXNwb25zZSIsImZldGNoIiwidG9TdHJpbmciLCJvayIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJzdWNjZXNzIiwia2V5IiwicmVzdWx0IiwibG9hZENhcHRjaGEiLCJ0aGVuIiwiY2FwdGNoYUVsZW1lbnRzIiwiZWxlbWVudCIsImlubmVySFRNTCIsImNhcHRjaGEiLCJleGVjdXRlU2NyaXB0RWxlbWVudHMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJmb3JtIiwiY2xvc2VzdCIsImlucHV0WCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRBdHRyaWJ1dGUiLCJ4IiwiY29udGFpbmVyRWxlbWVudCIsInNjcmlwdEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwic2NyaXB0RWxlbWVudCIsImNsb25lZEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJhamF4RXJyb3JIYW5kbGVycyIsImFqYXhTdWNjZXNzSGFuZGxlcnMiLCJhamF4RW5hYmxlZCIsImpRdWVyeSIsImFqYXhDdXJyZW50QmFzZSIsIiQiLCJlcSIsImF0dHIiLCJhamF4VXNlZCIsImFqYXhFcnJvciIsImFqYXhTZW5kIiwic2V0dGluZ3MiLCJtZXRob2QiLCJ0b1VwcGVyQ2FzZSIsImZvcm1JZCIsInNlcmlhbGl6ZSIsInNlcCIsImluZGV4T2YiLCJhamF4IiwidHlwZSIsImJlZm9yZVNlbmQiLCJub25zaG93bG9hZGluZyIsImRpdklkIiwid2lkdGgiLCJoZWlnaHQiLCJjc3MiLCJtc2ciLCJub25zaG93ZmFkZWluIiwiaHRtbCIsImhpZGUiLCJmYWRlSW4iLCJmdW5jIiwiYWxlcnQiLCJhamF4UGFnZUxvYWQiLCJoYXNoIiwibSIsIm1hdGNoIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic3Vic3RyIiwiYWpheEZvcm1Mb2FkIiwiYWpheE1ha2VIYXNoIiwicmVsIiwiZm9ybURhdGEiLCJocmVmQmFzZSIsImJpbmRIYW5kbGVycyIsImNsaWNrIiwib24iLCJwcmVwZW5kIiwianFtIiwibW9kYWwiLCJvbkxvYWQiLCJqcW1TaG93IiwiaXMiLCJqcW1IaWRlIiwicmVhZHkiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsU0FBQUEsYUFBQUMsR0FHQSxPQUFBQyxVQUFBQyxVQUFBRixJQUFBRyxRQUFBLFlBQUFBLFFBQUEsV0FDQSxDQUVBLFNBQUFDLGNBQ0EsSUFBQUMsRUFBQUMsU0FBQUMscUJBQUEsV0FBQUYsS0FDQSxhQUFBQSxFQUNBLElBRUFBLENBRUEsQ0FFQSxTQUFBRyxNQUFBQyxFQUFBQyxFQUFBQyxHQUNBQyxPQUFBQyxLQUFBVCxjQUFBLGVBQUFLLEVBQUEsb0ZBQUFDLEVBQUEsV0FBQUMsRUFBQSxrQkFDQSxDQUtBLFNBQUFHLElBQUFDLEVB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QSxlQUFBZ0QsVUFDQWhELEVBQUEsZUFBQXhCLFVBQ0EsRUFNQSxJQUVBLENBRUEsb0JBQUFzQixRQUNBRSxFQUFBakosVUFBQWtNLE9BQUEsV0FFQXBELGFBQ0EsSUFBQXhJLE9BQUFTLFNBQUErSixNQUNBRCxhQUFBdkssT0FBQVMsU0FBQStKLEtBQUFqTCxRQUFBLFVBSUEyTCxjQUNBLElBR0FsTCxPQUFBZ0MsS0FBQSIsImZpbGUiOiJiYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGVuY29kZVVSSWZpeChzdHIpIHtcclxuXHQvLyB0byBwcmV2ZW50IHR3aWNlIGVuY29kaW5nXHJcblx0Ly8gYW5kIGZpeCAnWycsJ10nIHNpZ25zIHRvIGZvbGxvdyBSRkMzOTg2IChzZWN0aW9uLTMuMi4yKVxyXG5cdHJldHVybiBlbmNvZGVVUkkoZGVjb2RlVVJJKHN0cikpLnJlcGxhY2UoLyU1Qi9nLCAnWycpLnJlcGxhY2UoLyU1RC9nLCAnXScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCYXNlSHJlZigpIHtcclxuXHR2YXIgaHJlZiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdiYXNlJylbMF0uaHJlZjtcclxuXHRpZiAoaHJlZiA9PSBudWxsKSB7XHJcblx0XHRyZXR1cm4gJy8nO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm4gaHJlZjtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvcHVwKGNvZGUsIHcsIGgpe1xyXG4gICAgd2luZG93Lm9wZW4oZ2V0QmFzZUhyZWYoKSArICdpbmRleC5waHA/bz0nICsgY29kZSwgJycsICd0b29sYmFyPTAsbG9jYXRpb249MCxkaXJlY3Rvcmllcz0wLG1lbnVCYXI9MCxyZXNpemFibGU9MCxzY3JvbGxiYXJzPXllcyx3aWR0aD0nICsgdyArICcsaGVpZ2h0PScgKyBoICsgJyxsZWZ0PTMyLHRvcD0xNicpO1xyXG59XHJcblxyXG4vKipcclxuICogQHRvZG8gbW92ZSB0byBwZnMgbW9kdWxlXHJcbiAqL1xyXG5mdW5jdGlvbiBwZnMoaWQsIGMxLCBjMiwgcGFyc2VyKXtcclxuICAgIHdpbmRvdy5vcGVuKFxyXG5cdFx0Z2V0QmFzZUhyZWYoKSArICdpbmRleC5waHA/ZT1wZnMmdXNlcmlkPScgKyBpZCArICcmYzE9JyArIGMxICsgJyZjMj0nICsgYzIgKyAnJnBhcnNlcj0nICsgcGFyc2VyLFxyXG5cdFx0J1BGUycsXHJcblx0XHQnc3RhdHVzPTEsIHRvb2xiYXI9MCxsb2NhdGlvbj0wLGRpcmVjdG9yaWVzPTAsbWVudUJhcj0wLHJlc2l6YWJsZT0xLHNjcm9sbGJhcnM9eWVzLHdpZHRoPTc1NCxoZWlnaHQ9NTEyLGxlZnQ9MzIsdG9wPTE2J1xyXG5cdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZGlyZWN0KHVybCl7XHJcbiAgICBsb2NhdGlvbi5ocmVmID0gdXJsLm9wdGlvbnNbdXJsLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVibG9jayhpZCl7XHJcbiAgICB2YXIgYmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICBpZiAoYmwuc3R5bGUuZGlzcGxheSA9PSAnbm9uZScpIHtcclxuICAgICAgICBibC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBibC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQWxsKGFjdGlvbikge1xyXG5cdHZhciBibGtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2lkXj1cImJsa19cIl0nKTtcclxuXHRmb3IgKGkgPSAwOyBpIDwgYmxrcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKGFjdGlvbiA9PSAnaGlkZScpIHtcclxuXHRcdFx0Ymxrc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0fSBlbHNlIGlmIChhY3Rpb24gPT0gJ3Nob3cnKSB7XHJcblx0XHRcdGJsa3NbaV0uc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3ctZ3JvdXAnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8vIEluc2VydHMgdGV4dCBpbnRvIHRleHRhcmVhIGF0IGN1cnNvciBwb3NpdGlvblxyXG5mdW5jdGlvbiBpbnNlcnRUZXh0KGRvY09iaiwgZmllbGROYW1lLCB2YWx1ZSkge1xyXG5cdHZhciBmaWVsZCA9IG51bGw7XHJcblx0aWYgKCFkb2NPYmopIHtcclxuXHRcdGRvY09iaiA9IGRvY3VtZW50O1xyXG5cdH1cclxuXHQvLyBGaW5kIHRoZSBmaWVsZCBpbiB0aGUgZG9jT2JqXHJcblx0ZmluZEZpZWxkOlxyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZG9jT2JqLmZvcm1zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvY09iai5mb3Jtc1tpXS5lbGVtZW50cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRpZiAoZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzW2pdLm5hbWUgPT0gZmllbGROYW1lKSB7XHJcblx0XHRcdFx0ZmllbGQgPSBkb2NPYmouZm9ybXNbaV0uZWxlbWVudHNbal07XHJcblx0XHRcdFx0YnJlYWsgZmluZEZpZWxkO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmICghZmllbGQpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIEluc2VydCB0aGUgdGV4dFxyXG5cdGlmIChkb2NPYmouc2VsZWN0aW9uKSB7XHJcblx0XHQvLyBNU0lFIGFuZCBPcGVyYVxyXG5cdFx0ZmllbGQuZm9jdXMoKTtcclxuXHRcdHZhciBzZWwgPSBkb2NPYmouc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XHJcblx0XHRzZWwudGV4dCA9IHZhbHVlO1xyXG5cdH0gZWxzZSBpZiAoZmllbGQuc2VsZWN0aW9uU3RhcnQgfHwgZmllbGQuc2VsZWN0aW9uU3RhcnQgPT0gMCkge1xyXG5cdFx0Ly8gTW96aWxsYVxyXG5cdFx0dmFyIHN0YXJ0UG9zID0gZmllbGQuc2VsZWN0aW9uU3RhcnQ7XHJcblx0XHR2YXIgZW5kUG9zID0gZmllbGQuc2VsZWN0aW9uRW5kO1xyXG5cdFx0ZmllbGQudmFsdWUgPSBmaWVsZC52YWx1ZS5zdWJzdHJpbmcoMCwgc3RhcnRQb3MpICsgdmFsdWUgKyBmaWVsZC52YWx1ZS5zdWJzdHJpbmcoZW5kUG9zLCBmaWVsZC52YWx1ZS5sZW5ndGgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRmaWVsZC52YWx1ZSArPSB2YWx1ZTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8vIEFycmF5IG9mIGFqYXggZXJyb3IgaGFuZGxlcnNcclxuLy8gRXhhbXBsZSBvZiB1c2U6XHJcbi8vIGFqYXhFcnJvckhhbmRsZXJzLnB1c2goe2Z1bmM6IG15RXJyb3JIYW5kbGVyfSk7XHJcbi8vIGFqYXhTdWNjZXNzSGFuZGxlcnMucHVzaCh7ZnVuYzogbXlTdWNjZXNzSGFuZGxlcn0pO1xyXG52YXIgYWpheEVycm9ySGFuZGxlcnMgPSBuZXcgQXJyYXkoKTtcclxudmFyIGFqYXhTdWNjZXNzSGFuZGxlcnMgPSBuZXcgQXJyYXkoKTtcclxuLy8gQUpBWCBlbmFibGVtZW50IGRlZmF1bHRzIHRvIGZhbHNlXHJcbnZhciBhamF4RW5hYmxlZCA9IGZhbHNlO1xyXG4vLyBSZXF1aXJlZCB0byBjYWxjdWxhdGUgcGF0aHNcclxuaWYgKHR5cGVvZiBqUXVlcnkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuXHR2YXIgYWpheEN1cnJlbnRCYXNlID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCQoJ2Jhc2UnKS5lcSgwKS5hdHRyKCdocmVmJyksICcnKS5yZXBsYWNlKC9cXD8uKiQvLCAnJykucmVwbGFjZSgvIy4qJC8sICcnKTtcclxufVxyXG4vLyBUaGlzIGZsYWcgaW5kaWNhdGVzIHRoYXQgQUpBWCtoaXN0b3J5IGhhcyBiZWVuIHVzZWQgb24gdGhpcyBwYWdlXHJcbi8vIEl0IG1lYW5zIHRoYXQgXCIjXCIgb3IgaG9tZSBsaW5rIHNob3VsZCBiZSBsb2FkZWQgdmlhIGFqYXggdG9vXHJcbnZhciBhamF4VXNlZCA9IGZhbHNlO1xyXG4vLyBHbG9iYWwgZmxhZyB0byBsZXQgZXZlcnlib2R5IGtub3cgdGhhdCBBSkFYIGhhcyBmYWlsZWRcclxudmFyIGFqYXhFcnJvciA9IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIEFKQVggaGVscGVyIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7aGFzaH0gc2V0dGluZ3MgQSBoYXNodGFibGUgd2l0aCBzZXR0aW5nc1xyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheFNlbmQoc2V0dGluZ3MpIHtcclxuXHR2YXIgbWV0aG9kID0gc2V0dGluZ3MubWV0aG9kID8gc2V0dGluZ3MubWV0aG9kLnRvVXBwZXJDYXNlKCkgOiAnR0VUJztcclxuXHR2YXIgZGF0YSA9IHNldHRpbmdzLmRhdGEgfHwgJyc7XHJcblx0dmFyIHVybCA9IHNldHRpbmdzLnVybCB8fCAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuYXR0cignYWN0aW9uJyk7XHJcblx0aWYgKG1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcblx0XHRkYXRhICs9ICcmJyArICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5zZXJpYWxpemUoKTtcclxuXHR9IGVsc2UgaWYgKHNldHRpbmdzLmZvcm1JZCkge1xyXG5cdFx0dmFyIHNlcCA9IHVybC5pbmRleE9mKCc/JykgPiAwID8gJyYnIDogJz8nO1xyXG5cdFx0dXJsICs9IHNlcCArICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5zZXJpYWxpemUoKTtcclxuXHR9XHJcblx0JC5hamF4KHtcclxuXHRcdHR5cGU6IG1ldGhvZCxcclxuXHRcdHVybDogZW5jb2RlVVJJZml4KHVybCksXHJcblx0XHRkYXRhOiBkYXRhLFxyXG5cdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKVxyXG5cdFx0XHRcdFx0LmFwcGVuZCgnPHNwYW4gc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDonICsgKCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLndpZHRoKCkvMiAtIDExMCkgKyAncHg7dG9wOicgKyAoJCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGVpZ2h0KCkvMiAtIDkpICsgJ3B4O1wiIGNsYXNzPVwibG9hZGluZ1wiIGlkPVwibG9hZGluZ1wiPjxpbWcgc3JjPVwiLi9pbWFnZXMvc3Bpbm5lci5naWZcIiBhbHQ9XCJsb2FkaW5nXCIvPjwvc3Bhbj4nKS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRzdWNjZXNzOiBmdW5jdGlvbihtc2cpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyNsb2FkaW5nJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93ZmFkZWluKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGlkZSgpLmh0bWwobXNnKS5mYWRlSW4oNTAwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5odG1sKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhamF4U3VjY2Vzc0hhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYoYWpheFN1Y2Nlc3NIYW5kbGVyc1tpXS5mdW5jKVxyXG5cdFx0XHRcdFx0YWpheFN1Y2Nlc3NIYW5kbGVyc1tpXS5mdW5jKG1zZyk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0YWpheFN1Y2Nlc3NIYW5kbGVyc1tpXShtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0ZXJyb3I6IGZ1bmN0aW9uKG1zZykge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnI2xvYWRpbmcnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dmYWRlaW4pIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oaWRlKCkuaHRtbChtc2cpLmZhZGVJbig1MDApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmh0bWwobXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoYWpheEVycm9ySGFuZGxlcnMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWpheEVycm9ySGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChhamF4RXJyb3JIYW5kbGVyc1tpXS5mdW5jKSB7XHJcblx0XHRcdFx0XHRcdGFqYXhFcnJvckhhbmRsZXJzW2ldLmZ1bmMobXNnKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGFqYXhFcnJvckhhbmRsZXJzW2ldKG1zZyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFsZXJ0KCdBSkFYIGVycm9yOiAnICsgbXNnKTtcclxuXHRcdFx0XHRhamF4RXJyb3IgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogQUpBWCBzdWJwYWdlIGxvYWRlciB3aXRoIGhpc3Rvcnkgc3VwcG9ydFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBBIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhQYWdlTG9hZChoYXNoKSB7XHJcbiAgICBpZiAoaGFzaCAhPT0gJycpIHtcclxuXHRcdGhhc2gucmVwbGFjZSgvXiMvLCAnJyk7XHJcblx0fVxyXG5cdHZhciBtID0gaGFzaC5tYXRjaCgvXmdldCgtLio/KT87KC4qKSQvKTtcclxuXHRpZiAobSkge1xyXG5cdFx0Ly8gYWpheCBib29rbWFya1xyXG4gICAgICAgIHZhciB1cmwgPSBtWzJdLmluZGV4T2YoJzsnKSA+IDAgPyBtWzJdLnJlcGxhY2UoJzsnLCAnPycpIDogYWpheEN1cnJlbnRCYXNlICsgJz8nICsgZGVjb2RlVVJJQ29tcG9uZW50KG1bMl0pO1xyXG5cdFx0YWpheFVzZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIGFqYXhTZW5kKHtcclxuXHRcdFx0bWV0aG9kOiAnR0VUJyxcclxuXHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdGRpdklkOiBtWzFdID8gbVsxXS5zdWJzdHIoMSkgOiAnYWpheEJsb2NrJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIGlmIChoYXNoID09PSAnJyAmJiBhamF4VXNlZCkge1xyXG5cdFx0Ly8gYWpheCBob21lXHJcblx0XHRyZXR1cm4gYWpheFNlbmQgKHtcclxuXHRcdFx0dXJsOiBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKiQvLCAnJyksXHJcblx0XHRcdGRpdklkOiAnYWpheEJsb2NrJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQUpBWCBzdWJmb3JtIGxvYWRlciB3aXRob3V0IGhpc3RvcnkgdHJhY2tpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggQSBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtSWQgVGFyZ2V0IGZvcm0gaWQgYXR0cmlidXRlXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4Rm9ybUxvYWQoaGFzaCwgZm9ybUlkKSB7XHJcblx0dmFyIG0gPSBoYXNoLm1hdGNoKC9eKGdldHxwb3N0KSgtLio/KT87KC4qKSQvKTtcclxuXHRpZiAobSkge1xyXG5cdFx0Ly8gYWpheCBib29rbWFya1xyXG5cdFx0dmFyIHVybCA9IG1bM10uaW5kZXhPZignOycpID4gMCA/IG1bM10ucmVwbGFjZSgnOycsICc/JykgOiBhamF4Q3VycmVudEJhc2UgKyAnPycgKyBtWzNdO1xyXG5cdFx0YWpheFVzZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIGFqYXhTZW5kKHtcclxuXHRcdFx0bWV0aG9kOiBtWzFdLnRvVXBwZXJDYXNlKCksXHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRkaXZJZDogbVsyXSA/IG1bMl0uc3Vic3RyKDEpIDogJ2FqYXhCbG9jaycsXHJcblx0XHRcdGZvcm1JZDogZm9ybUlkXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGFqYXhhYmxlIGhhc2ggc3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBocmVmIExpbmsgaHJlZiBvciBmb3JtIGFjdGlvbiBhdHRyaWJ1dGVcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlbCBBbiBhdHRyaWJ1dGUgdmFsdWUgcG9zc2libHkgY29udGFpbmluZyBhIGhhc2ggYWRkcmVzc1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybURhdGEgSXMgcGFzc2VkIGZvciBmb3JtcyBvbmx5LCBpcyAncG9zdCcgZm9yIFBPU1QgZm9ybXNcclxuICogb3Igc2VyaWFsaXplZCBmb3JtIGRhdGEgZm9yIEdFVCBmb3Jtc1xyXG4gKiBAcmV0dXJuIEEgdmFsaWQgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAdHlwZSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhNYWtlSGFzaChocmVmLCByZWwsIGZvcm1EYXRhKSB7XHJcblx0dmFyIGhhc2ggPSAoZm9ybURhdGEgPT0gJ3Bvc3QnKSA/ICdwb3N0JyA6ICdnZXQnO1xyXG5cdHZhciBocmVmQmFzZSwgcGFyYW1zO1xyXG5cdHZhciBzZXAgPSAnPyc7XHJcblx0dmFyIG0gPSByZWwgPyByZWwubWF0Y2goLyhnZXR8cG9zdCkoLVteIDtdKyk/KDtcXFMqKT8vKSA6IGZhbHNlO1xyXG5cdGlmIChtKSB7XHJcblx0XHRoYXNoID0gbVsxXTtcclxuXHRcdGlmIChtWzJdKSB7XHJcblx0XHRcdGhhc2ggKz0gbVsyXTtcclxuXHRcdH1cclxuXHRcdGlmIChtWzNdKSB7XHJcblx0XHRcdGhyZWYgPSBtWzNdLnN1YnN0cigxKTtcclxuXHRcdFx0c2VwICA9ICc7JztcclxuXHRcdH1cclxuXHR9XHJcblx0aGFzaCArPSAnOydcclxuXHRpZiAoaHJlZi5pbmRleE9mKHNlcCkgPiAwKSB7XHJcblx0XHRocmVmQmFzZSA9IGhyZWYuc3Vic3RyKDAsIGhyZWYuaW5kZXhPZihzZXApKTtcclxuXHRcdHBhcmFtcyA9IGhyZWYuc3Vic3RyKGhyZWYuaW5kZXhPZihzZXApICsgMSk7XHJcblx0XHRpZiAoZm9ybURhdGEgJiYgZm9ybURhdGEgIT0gJ3Bvc3QnKSB7XHJcblx0XHRcdHBhcmFtcyArPSAnJicgKyBmb3JtRGF0YTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0aHJlZkJhc2UgPSBocmVmO1xyXG5cdFx0cGFyYW1zID0gJyc7XHJcblx0XHRpZiAoZm9ybURhdGEgJiYgZm9ybURhdGEgIT0gJ3Bvc3QnKSB7XHJcblx0XHRcdHBhcmFtcyArPSBzZXAgKyBmb3JtRGF0YTtcclxuXHRcdH1cclxuXHR9XHJcblx0aGFzaCArPSBocmVmQmFzZSA9PSBhamF4Q3VycmVudEJhc2UgPyBwYXJhbXMgOiBocmVmQmFzZSArICc7JyArIHBhcmFtcztcclxuXHRyZXR1cm4gaGFzaDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YW5kYXJkIGV2ZW50IGJpbmRpbmdzXHJcbiAqL1xyXG5mdW5jdGlvbiBiaW5kSGFuZGxlcnMoKSB7XHJcblx0aWYgKGxvY2F0aW9uLmhhc2ggPT0gJyNjb21tZW50cycgfHwgbG9jYXRpb24uaGFzaC5tYXRjaCgvI2NcXGQrLykpIHtcclxuXHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHR9XHJcblx0JCgnLmNvbW1lbnRzX2xpbmsnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdGlmKCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScpID09ICdub25lJykge1xyXG5cdFx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRpZihsb2NhdGlvbi5ocmVmLm1hdGNoKC8jY29tbWVudHMvKSkge1xyXG5cdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdH1cclxuXHJcblx0aWYgKGFqYXhFbmFibGVkKSB7XHJcblx0XHQvLyBBSkFYIGF1dG8taGFuZGxpbmdcclxuXHRcdCQoJ2JvZHknKS5vbignc3VibWl0JywgJ2Zvcm0uYWpheCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdtZXRob2QnKS50b1VwcGVyQ2FzZSgpID09ICdQT1NUJykge1xyXG5cdFx0XHRcdGFqYXhGb3JtTG9hZChhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdhY3Rpb24nKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ2NsYXNzJyksICdwb3N0JyksICQodGhpcykuYXR0cignaWQnKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdhY3Rpb24nKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ2NsYXNzJyksICQodGhpcykuc2VyaWFsaXplKCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBhamF4RXJyb3I7XHJcblx0XHR9KTtcclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYS5hamF4JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignaHJlZicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cigncmVsJykpO1xyXG5cdFx0XHRyZXR1cm4gYWpheEVycm9yO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQUpBWCBhY3Rpb24gY29uZmlybWF0aW9uc1xyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhLmNvbmZpcm1MaW5rJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmF0dHIoJ2hyZWYnKS5tYXRjaCgvbWVzc2FnZS4rOTIwL2kpKSB7XHJcblx0XHRcdFx0aWYgKCQoJyNjb25maXJtQm94JykpIHtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQoJ2JvZHknKS5wcmVwZW5kKCc8ZGl2IGlkPVwiY29uZmlybUJveFwiIGNsYXNzPVwianFtV2luZG93XCI+PC9kaXY+Jyk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW0oe2FqYXg6JCh0aGlzKS5hdHRyKCdocmVmJyksbW9kYWw6dHJ1ZSxvbkxvYWQ6ZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykuY3NzKCdtYXJnaW4tbGVmdCcsICctJysoJCgnI2NvbmZpcm1Cb3gnKS53aWR0aCgpLzIpKydweCcpO1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5jc3MoJ21hcmdpbi10b3AnLCAnLScrKCQoJyNjb25maXJtQm94JykuaGVpZ2h0KCkvMikrJ3B4Jyk7XHJcblx0XHRcdFx0fX0pO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtU2hvdygpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTGlzdGVuIHRvIGhhc2ggY2hhbmdlIGV2ZW50c1xyXG5cdFx0JCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGFqYXhQYWdlTG9hZCh3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIy8sICcnKSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EjY29uZmlybU5vJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKFwiI2NvbmZpcm1Cb3hcIikuaXMoXCIuanFtV2luZG93XCIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW1IaWRlKCk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiBqUXVlcnkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIElmIHBhZ2Ugd2FzIGxvYWRlZCB3aXRoIGhhc2hcclxuICAgICAgICBpZiAoYWpheEVuYWJsZWQpIHtcclxuICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhhc2ggIT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGFqYXhQYWdlTG9hZCh3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIy8sICcnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJpbmRIYW5kbGVycygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbndpbmRvdy5uYW1lID0gJ21haW4nOyIsIi8qKlxyXG4gKiBTZXJ2ZXIgU2VudCBFdmVudHMgY2xpZW50XHJcbiAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyU2VudEV2ZW50c0NsaWVudCB7XHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cclxuICAgICAqL1xyXG4gICAgZXZlbnRzVXJsID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtFdmVudFNvdXJjZXxudWxsfVxyXG4gICAgICovXHJcbiAgICAjZXZlbnRTb3VyY2UgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge2Z1bmN0aW9ufG51bGx9XHJcbiAgICAgKi9cclxuICAgIG9uRXZlbnQgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50c1VybCwgbW9kZSA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmV2ZW50c1VybCA9IGV2ZW50c1VybDtcclxuICAgICAgICBpZiAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNldmVudFNvdXJjZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyU2VudEV2ZW50c0NsaWVudCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UodGhpcy5ldmVudHNVcmwpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2Uub25vcGVuID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyU2VudEV2ZW50c0NsaWVudCBjb25uZWN0aW9uIGlzIG9wZW4nKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudERhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZXZlbnREYXRhLmRhdGEgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGV2ZW50RGF0YS5kYXRhID09PSAnc3RyaW5nJykgJiYgZXZlbnREYXRhLmRhdGEgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZGF0YSA9IEpTT04ucGFyc2UoZXZlbnREYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50RGF0YS5pZCA9IGV2ZW50Lmxhc3RFdmVudElkO1xyXG4gICAgICAgICAgICB0aGlzLiNvbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJTZW50RXZlbnRzQ2xpZW50IGNvbm5lY3Rpb24gZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAjb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlclNlbnRFdmVudHNDbGllbnQ6IFNlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXZlbnQgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnLm9uRXZlbnQgaXMgbm90IGRlZmluZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkV2ZW50KGV2ZW50RGF0YSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtTZXJ2ZXJTZW50RXZlbnRzQ2xpZW50fSBmcm9tIFwiLi4vU2VydmVyU2VudEV2ZW50c0NsaWVudFwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBTZW50IEV2ZW50cyBkcml2ZXIgaW1wbGVtZW50YXRpb24gZm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgU2hhcmVkIFdvcmtlci5cclxuICogVGhlc2UgYXJlIEFuZHJvaWQgbW9iaWxlIGRldmljZSBicm93c2Vycy5cclxuICogQGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJTZW50RXZlbnRzIHtcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ3xudWxsfVxyXG4gICAgICovXHJcbiAgICBldmVudHNVcmwgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge1NlcnZlclNlbnRFdmVudHNDbGllbnR8bnVsbH1cclxuICAgICAqL1xyXG4gICAgI2NsaWVudCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb258bnVsbH1cclxuICAgICAqL1xyXG4gICAgb25FdmVudCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIG1vZGUgPSAncHJvZHVjdGlvbic7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXZlbnRzVXJsLCBtb2RlID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzVXJsID0gZXZlbnRzVXJsO1xyXG4gICAgICAgIGlmIChtb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI2NsaWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgU2VydmVyU2VudEV2ZW50cyBkcml2ZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2NsaWVudCA9IG5ldyBTZXJ2ZXJTZW50RXZlbnRzQ2xpZW50KHRoaXMuZXZlbnRzVXJsLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIHRoaXMuI2NsaWVudC5vbkV2ZW50ID0gKGV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uRXZlbnRUcmlnZ2VyZWQoZXZlbnREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub25FdmVudCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuY29uc3RydWN0b3IubmFtZSArICcub25FdmVudCBpcyBub3QgZGVmaW5lZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uRXZlbnQoZXZlbnREYXRhKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7U2VydmVyU2VudEV2ZW50c30gZnJvbSAnLi9TZXJ2ZXJTZW50RXZlbnRzJztcclxuXHJcbi8qKlxyXG4gKiBTZXJ2ZXIgU2VudCBFdmVudHMgZHJpdmVyIGltcGxlbWVudGF0aW9uIHZpYSBTaGFyZWRXb3JrZXIuXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzXHJcbiAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TaGFyZWRXb3JrZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyIGV4dGVuZHMgU2VydmVyU2VudEV2ZW50cyB7XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdCBTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyIGRyaXZlcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFNoYXJlZFdvcmtlcignL2pzL3NoYXJlZFdvcmtlclNTRS5taW4uanMnKTtcclxuICAgICAgICAgICAgY29uc3QgcG9ydCA9IHdvcmtlci5wb3J0O1xyXG5cclxuICAgICAgICAgICAgcG9ydC5wb3N0TWVzc2FnZSh7Y29uZmlnOiB7dXJsOiB0aGlzLmV2ZW50c1VybCwgbW9kZTogdGhpcy5tb2RlfX0pO1xyXG5cclxuICAgICAgICAgICAgcG9ydC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyIGV2ZW50JywgZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnRUcmlnZ2VyZWQoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtTZXJ2ZXJTZW50RXZlbnRzU2hhcmVkV29ya2VyfSBmcm9tIFwiLi9kcml2ZXIvU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlclwiO1xyXG5pbXBvcnQge1NlcnZlclNlbnRFdmVudHN9IGZyb20gXCIuL2RyaXZlci9TZXJ2ZXJTZW50RXZlbnRzXCI7XHJcblxyXG4vKipcclxuICogU2VydmVyIGV2ZW50c1xyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50cyB7XHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtudWxsfFNlcnZlclNlbnRFdmVudHNTaGFyZWRXb3JrZXJ8U2VydmVyU2VudEV2ZW50c31cclxuICAgICAqL1xyXG4gICAgI2RyaXZlciA9IG51bGw7XHJcblxyXG4gICAgI29ic2VydmVyc1JlZ2lzdHJ5ID0gbnVsbDtcclxuXHJcbiAgICBtb2RlID0gJ3Byb2R1Y3Rpb24nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuI29ic2VydmVyc1JlZ2lzdHJ5ID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgYWRkT2JzZXJ2ZXIobmFtZSwgZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkuc2V0KG5hbWUsIHtcclxuICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxyXG4gICAgICAgICAgICBvbkV2ZW50OiBjYWxsYmFja1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy4jZHJpdmVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2luaXREcml2ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgI2luaXREcml2ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZ2V0QmFzZUhyZWYoKSArICdpbmRleC5waHA/bj1zZXJ2ZXItZXZlbnRzJztcclxuICAgICAgICBpZiAodHlwZW9mIFNoYXJlZFdvcmtlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0aW5nIFNlcnZlclNlbnRFdmVudHNTaGFyZWRXb3JrZXIgZHJpdmVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jZHJpdmVyID0gbmV3IFNlcnZlclNlbnRFdmVudHNTaGFyZWRXb3JrZXIodXJsLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0aW5nIFNlcnZlclNlbnRFdmVudHMgZHJpdmVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jZHJpdmVyID0gbmV3IFNlcnZlclNlbnRFdmVudHModXJsLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jZHJpdmVyLm9uRXZlbnQgPSAoZXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuI2V2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuI2RyaXZlci5tb2RlID0gdGhpcy5tb2RlO1xyXG4gICAgfVxyXG5cclxuICAgICNldmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciB0cmlnZ2VyZWQgZXZlbnQnLCBldmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXZlbnQgPT09IGV2ZW50RGF0YS5ldmVudFxyXG4gICAgICAgICAgICAgICAgJiYgdHlwZW9mIG9ic2VydmVyLm9uRXZlbnQgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vbkV2ZW50KGV2ZW50RGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtTZXJ2ZXJFdmVudHN9IGZyb20gJy4vc2VydmVyRXZlbnRzL1NlcnZlckV2ZW50cy5qcyc7XHJcblxyXG4vKipcclxuICogQmFzZSBDb3RvbnRpIGNsYXNzXHJcbiAqL1xyXG5jbGFzcyBDb3RvbnRpQXBwbGljYXRpb25cclxue1xyXG4gICAgI3NldmVyRXZlbnRzID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBTZXJ2ZXIgRXZlbnRzIG9iamVjdFxyXG4gICAgICogQHJldHVybnMge1NlcnZlckV2ZW50c31cclxuICAgICAqL1xyXG4gICAgZ2V0U2VydmVyRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNzZXZlckV2ZW50cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNzZXZlckV2ZW50cyA9IG5ldyBTZXJ2ZXJFdmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NldmVyRXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBkYXRhIGZyb20gL2luZGV4LnBocD9uPW1haW4mYT1nZXRcclxuICAgICAqIENhbiBiZSB1c2VmdWwsIGZvciBleGFtcGxlIHdoZW4gaXQgaXMgbmVlZGVkIHRvIGxvYWQgc29tZSBkeW5hbWljIGNvbnRlbnQgdG8gY2FjaGVkIHBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBFeGFtcGxlOlxyXG4gICAgICogY290LmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAqICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgKiB9KTtcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gd2hhdCBBcnJheSBvciBzdHJpbmcuIERhdGEgdG8gbG9hZC4gRm9yIGV4YW1wbGUsIFsnY2FwdGNoYScsICd4J10gKHggLSBhbnRpIFhTUyBwYXJhbWV0ZXIgdmFsdWUpXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7fT59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGxvYWREYXRhKHdoYXQpIHtcclxuICAgICAgICBpZiAoIXdoYXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkRGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhdGFUb0xvYWQgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aGF0ID09PSAnc3RyaW5nJyB8fCB3aGF0IGluc3RhbmNlb2YgU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHdoYXQgPSBbd2hhdF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHdoYXQpIHtcclxuICAgICAgICAgICAgaWYgKCEoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhVG9Mb2FkLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhVG9Mb2FkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gQHRvZG8gY2hhbmdlIHRvIHN5c3RlbSBjb250cm9sbGVyIHdoZW4gaXQgd2lsbCBiZSBpbXBsZW1lbnRlZFxyXG4gICAgICAgICAgICBsZXQgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7bjogJ21haW4nLCBhOiAnZ2V0J30pO1xyXG5cclxuICAgICAgICAgICAgZGF0YVRvTG9hZC5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2RhdGFbJyArIGluZGV4ICsgJ10nLCBpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ19hamF4JywgMSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaW5kZXgucGhwPycgKyBwYXJhbXMudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhW2tleV0gPSByZXNwb25zZURhdGEuZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSFRUUCBlcnJvclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBlcnJvclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICgoaXRlbSBpbiB0aGlzLmxvYWRlZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbaXRlbV0gPSB0aGlzLmxvYWRlZERhdGFbaXRlbV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGNhcHRjaGEgdmlhIGFqYXguIFVzZWQgb24gY2FjaGVkIHBhZ2VzLlxyXG4gICAgICovXHJcbiAgICBsb2FkQ2FwdGNoYSgpIHtcclxuICAgICAgICB0aGlzLmxvYWREYXRhKFsnY2FwdGNoYScsICd4J10pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgbGV0IGNhcHRjaGFFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXB0Y2hhLXBsYWNlLWhvbGRlcicpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIGNhcHRjaGFFbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSByZXN1bHQuY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYXB0Y2hhLXBsYWNlLWhvbGRlcicsICdsb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NhcHRjaGEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gZWxlbWVudC5jbG9zZXN0KCdmb3JtJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFggPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl1bbmFtZT1cInhcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRYICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0WC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcmVzdWx0LngpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgeW91IGFwcGVuZCA8c2NyaXB0PiB0YWdzIHRvIHRoZSBlbGVtZW50cyBvZiB0aGUgZmluaXNoZWQgRE9NIGRvY3VtZW50LCB0aGV5IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGF1dG9tYXRpY2FsbHkuXHJcbiAgICAgKiBUaGUgbWV0aG9kIGV4ZWN1dGVzIDxzY3JpcHQ+IHNjcmlwdHMgbmVzdGVkIGluIHRoZSBzcGVjaWZpZWQgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsZW1lbnQgTm9kZVxyXG4gICAgICovXHJcbiAgICBleGVjdXRlU2NyaXB0RWxlbWVudHMoY29udGFpbmVyRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnRzID0gY29udGFpbmVyRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKTtcclxuXHJcbiAgICAgICAgQXJyYXkuZnJvbShzY3JpcHRFbGVtZW50cykuZm9yRWFjaCgoc2NyaXB0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjbG9uZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudC5hdHRyaWJ1dGVzKS5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsb25lZEVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZS5uYW1lLCBhdHRyaWJ1dGUudmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC50ZXh0ID0gc2NyaXB0RWxlbWVudC50ZXh0O1xyXG4gICAgICAgICAgICBzY3JpcHRFbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lZEVsZW1lbnQsIHNjcmlwdEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuY290ID0gbmV3IENvdG9udGlBcHBsaWNhdGlvbigpO1xyXG4iXX0=
