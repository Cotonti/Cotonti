/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
function encodeURIfix(e){return encodeURI(decodeURI(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")}function getBaseHref(){var e=document.getElementsByTagName("base")[0].href;return null==e?"/":e}function popup(e,t,n){window.open(getBaseHref()+"index.php?o="+e,"","toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width="+t+",height="+n+",left=32,top=16")}function pfs(e,t,n,o){window.open(getBaseHref()+"index.php?e=pfs&userid="+e+"&c1="+t+"&c2="+n+"&parser="+o,"PFS","status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16")}function redirect(e){location.href=e.options[e.selectedIndex].value}function toggleblock(e){var t=document.getElementById(e);return"none"==t.style.display?t.style.display="":t.style.display="none",!1}function toggleAll(e){var t=document.querySelectorAll('[id^="blk_"]');for(i=0;i<t.length;i++)"hide"==e?t[i].style.display="none":"show"==e&&(t[i].style.display="table-row-group");return!1}function insertText(e,t,n){var o=null;e||(e=document);e:for(var s=0;s<e.forms.length;s++)for(var a=0;a<e.forms[s].elements.length;a++)if(e.forms[s].elements[a].name==t){o=e.forms[s].elements[a];break e}if(!o)return!1;if(e.selection)o.focus(),e.selection.createRange().text=n;else if(o.selectionStart||0==o.selectionStart){var r=o.selectionStart,i=o.selectionEnd;o.value=o.value.substring(0,r)+n+o.value.substring(i,o.value.length)}else o.value+=n;return!0}(()=>{"use strict";class e extends EventTarget{mode="production";eventsUrl=null;constructor(e,t=""){super(),null!==t&&(this.mode=t),this.eventsUrl=e}init(){}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsDriver: Server triggered event",e);const t=new CustomEvent("event",{detail:e,data:{bar:"baz"}});this.dispatchEvent(t)}}class t extends e{}class n extends e{#e=null;init(){null===this.#e&&("production"!==this.mode&&console.log("init ServerEventsSSEDriver. ",this.eventsUrl),this.#e=new EventSource(this.eventsUrl),"production"!==this.mode&&(this.#e.onopen=function(e){console.log("ServerEventsSSEDriver connection is open")}),this.#e.onmessage=e=>{const t=JSON.parse(e.data);void 0!==t.data&&"string"==typeof t.data&&""!==t.data&&(t.data=JSON.parse(t.data)),t.eventId=e.lastEventId,this.onEventTriggered(t)},"production"!==this.mode&&(this.#e.onerror=function(e){console.log("ServerEventsSSEDriver connection error")}))}}class o extends EventTarget{mode="production";driverType="";constructor(e,t=null){super(),this.driverType=e,null!==t&&(this.mode=t),this.init()}onEventTriggered(e){"production"!==this.mode&&console.log("ServerEventsClient: Server triggered event",e);const t=new CustomEvent("event",{detail:e});this.dispatchEvent(t)}}class s{#t="/";#n="production";constructor(e=null,t=null){null!==e&&(this.#t=e),null!==t&&(this.#n=t)}getByType(e){let o=null;const s=this.#t+"?n=server-events&a=sse",a=this.#t+"?n=server-events&a=ajax";return"serverSentEvents"===e?(o=new n(s),"production"!==this.#n&&console.log("using ServerEventsSSEDriver",s)):(o=new t(a),"production"!==this.#n&&console.log("using ServerEventsAjaxDriver",a)),o}}class a extends o{init(){"production"!==this.mode&&console.log("init ServerEventsClient");const e=new s(getBaseHref(),this.mode).getByType(this.driverType,this.mode);e.addEventListener("event",(e=>{this.onEventTriggered(e.detail)})),e.init()}}class r extends o{init(){"production"!==this.mode&&console.log("init ServerEventsSharedWorkerClient");try{const e=new SharedWorker("/js/sharedWorkerServerEvents.min.js").port;e.postMessage({config:{mode:this.mode,driver:this.driverType,baseUrl:getBaseHref()}}),e.onmessage=e=>{"production"!==this.mode&&console.log("ServerSentEventsSharedWorker event",e.data),this.onEventTriggered(e.data)}}catch(e){console.error(e)}}}class i{mode="production";#o=null;#s="sharedWorker";#a="serverSentEvents";#r=null;constructor(){this.#r=new Map}addObserver(e,t,n){this.#r.set(e,{name:e,event:t,onEvent:n}),null===this.#o&&this.#i()}#i(){"sharedWorker"===this.#s&&void 0!==typeof SharedWorker?("production"!==this.mode&&console.log("creating ServerEventsSharedWorkerClient"),this.#o=new r(this.#a,this.mode)):("production"!==this.mode&&console.log("creating ServerEventsClient"),this.#o=new a(this.#a,this.mode)),this.#o.addEventListener("event",(e=>{this.#l(e.detail)}))}#l(e){"production"!==this.mode&&console.log("Server triggered event",e),this.#r.forEach((t=>{t.event===e.event&&"function"==typeof t.onEvent&&t.onEvent(e)}))}}class l{static containerClass="toast-container position-fixed bottom-0 end-0 p-3";title="";message="";hint="";type="";delay=5e3;#d=null;constructor(e,t="",n="",o=""){void 0!==window.bootstrap?(this.title=t,this.message=e,this.hint=n,this.type=o):console.error('Bootstrap is not found. It is required for use "Toast" component')}show(){if(null===this.#d){let e=document.getElementById("toast-container");null===e&&(e=this.#c()),this.#d=e}const e=`<strong class="me-auto">${this.title}</strong>`,t=""!==this.hint?`<small>${this.hint}</small>`:"",n=`<div class="toast${""!==this.type?` text-bg-${this.type}`:""}" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="${this.delay}"><div class="toast-header">${e}${t}<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button></div><div class="toast-body">${this.message}</div></div>`,o=document.createElement("div");o.innerHTML=n;const s=o.firstElementChild;this.#d.appendChild(s),new window.bootstrap.Toast(s).show(),this.#d.lastElementChild.addEventListener("hidden.bs.toast",(()=>{s.remove(),""===this.#d.innerHTML&&(this.#d.remove(),this.#d=null)}))}#c(){const e=document.createElement("div");return e.id="toast-container",e.className=l.containerClass,document.body.append(e),e}}class d{title="";content="";buttons=null;centered=!1;dialogClass="modal-dialog";#h=null;constructor(e,t="",n=null){void 0!==window.bootstrap?(this.title=t,this.content=e,this.buttons=n):console.error('Bootstrap is not found. It is required for use "Modal" component')}show(){let e=this.dialogClass;this.centered&&(e+=" modal-dialog-centered");const t=`<div class="modal fade" id="CotontiDynamicModal" tabindex="-1" aria-labelledby="CotontiDynamicModalLabel" aria-hidden="true"><div class="${e}"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="CotontiDynamicModalLabel">${this.title}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">${this.content}</div><div class="modal-footer"></div></div></div></div>`,n=document.createElement("div");n.innerHTML=t,this.#h=n.firstElementChild,this.#u(),document.body.appendChild(this.#h),new bootstrap.Modal(this.#h).show(),this.#h.addEventListener("hidden.bs.modal",(()=>{this.#h.remove()}))}#u(){const e=this.#m();if(""===e||e===[])return;const t=this.#h.querySelector(".modal-footer");"string"!=typeof e?Array.isArray(e)&&e.forEach((e=>{"string"!=typeof e?t.appendChild(e):t.innerHTML+=e})):t.innerHTML=e}#m(){const e=[];let t=this.buttons;return t===[]?e:null===t?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':"string"==typeof t?t:(Array.isArray(t)&&t.forEach((t=>{if("string"==typeof t)return void e.push(t);const n=document.createElement("button");void 0!==t.label&&(n.innerHTML=t.label),n.setAttribute("type",void 0!==t.btnType?t.btnType:"button"),n.classList.add("btn"),void 0!==t.type&&n.classList.add("btn-"+t.type),void 0!==t.closeOnClick&&!0===t.closeOnClick&&n.setAttribute("data-bs-dismiss","modal"),void 0!==t.onClick&&"function"==typeof t.onClick&&n.addEventListener("click",(e=>t.onClick(e))),e.push(n)})),e)}}window.cot=new class{#p=null;getServerEvents(){return null===this.#p&&(this.#p=new i),this.#p}confirm(e,t,n,o="Ok",s="Cancel"){this.modal(e,t,[{label:o,onClick:e=>n(e),type:"primary",closeOnClick:!0},{label:s,closeOnClick:!0,type:"secondary"}])}getModal(e,t="",n=null){return new d(e,t,n)}modal(e,t="",n=null){const o=this.getModal(e,t,n);return o.show(),o}getToast(e,t="",n="",o=""){return new l(e,t,n,o)}toast(e,t="",n="",o="",s=5e3){const a=this.getToast(e,t,n,o);return null!==s&&(a.delay=s),a.show(),a}async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let t=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let n of e)n in this.loadedData||t.push(n);if(t.length>0){let n=new URLSearchParams({n:"main",a:"get"});t.forEach(((e,t,o)=>{n.append("data["+t+"]",e)})),n.append("_ajax",1);try{let e=await fetch("index.php?"+n.toString());if(e.ok){const t=await e.json();if(t.success)for(const e in t.data)this.loadedData[e]=t.data[e]}}catch(e){}}let n={};for(let t of e)t in this.loadedData&&(n[t]=this.loadedData[t]);return n}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let t=document.querySelectorAll(".captcha-place-holder");for(let n of t){n.innerHTML=e.captcha,this.executeScriptElements(n),n.classList.remove("captcha-place-holder","loading"),n.classList.add("captcha");const t=n.closest("form");if(null!==t){let n=t.querySelector('input[type="hidden"][name="x"]');null!==n&&n.setAttribute("value",e.x)}}}))}executeScriptElements(e){const t=e.querySelectorAll("script");Array.from(t).forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.text=e.text,e.parentNode.replaceChild(t,e)}))}}})();var ajaxErrorHandlers=new Array,ajaxSuccessHandlers=new Array,ajaxEnabled=!1;if("undefined"!=typeof jQuery)var ajaxCurrentBase=location.href.replace($("base").eq(0).attr("href"),"").replace(/\?.*$/,"").replace(/#.*$/,"");var ajaxUsed=!1,ajaxError=!1;function ajaxSend(e){var t=e.method?e.method.toUpperCase():"GET",n=e.data||"",o=e.url||$("#"+e.formId).attr("action");if("POST"===t)n+="&"+$("#"+e.formId).serialize();else if(e.formId){var s=o.indexOf("?")>0?"&":"?";o+=s+$("#"+e.formId).serialize()}return $.ajax({type:t,url:encodeURIfix(o),data:n,beforeSend:function(){e.nonshowloading||$("#"+e.divId).append('<span style="position:absolute; left:'+($("#"+e.divId).width()/2-110)+"px;top:"+($("#"+e.divId).height()/2-9)+'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css("position","relative")},success:function(t){e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500);for(var n=0;n<ajaxSuccessHandlers.length;n++)ajaxSuccessHandlers[n].func?ajaxSuccessHandlers[n].func(t):ajaxSuccessHandlers[n](t)},error:function(t){if(e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500),ajaxErrorHandlers.length>0)for(var n=0;n<ajaxErrorHandlers.length;n++)ajaxErrorHandlers[n].func?ajaxErrorHandlers[n].func(t):ajaxErrorHandlers[n](t);else alert("AJAX error: "+t),ajaxError=!0}}),!1}function ajaxPageLoad(e){""!==e&&e.replace(/^#/,"");var t=e.match(/^get(-.*?)?;(.*)$/);if(t){var n=t[2].indexOf(";")>0?t[2].replace(";","?"):ajaxCurrentBase+"?"+decodeURIComponent(t[2]);return ajaxUsed=!0,ajaxSend({method:"GET",url:n,divId:t[1]?t[1].substr(1):"ajaxBlock"})}return""!==e||!ajaxUsed||ajaxSend({url:location.href.replace(/#.*$/,""),divId:"ajaxBlock"})}function ajaxFormLoad(e,t){var n=e.match(/^(get|post)(-.*?)?;(.*)$/);if(n){var o=n[3].indexOf(";")>0?n[3].replace(";","?"):ajaxCurrentBase+"?"+n[3];return ajaxUsed=!0,ajaxSend({method:n[1].toUpperCase(),url:o,divId:n[2]?n[2].substr(1):"ajaxBlock",formId:t})}return!0}function ajaxMakeHash(e,t,n){var o,s,a="post"==n?"post":"get",r="?",i=!!t&&t.match(/(get|post)(-[^ ;]+)?(;\S*)?/);return i&&(a=i[1],i[2]&&(a+=i[2]),i[3]&&(e=i[3].substr(1),r=";")),a+=";",e.indexOf(r)>0?(o=e.substr(0,e.indexOf(r)),s=e.substr(e.indexOf(r)+1),n&&"post"!=n&&(s+="&"+n)):(o=e,s="",n&&"post"!=n&&(s+=r+n)),a+=o==ajaxCurrentBase?s:o+";"+s}function bindHandlers(){("#comments"==location.hash||location.hash.match(/#c\d+/))&&$(".comments").css("display",""),$(".comments_link").click((function(){"none"==$(".comments").css("display")?$(".comments").css("display",""):$(".comments").css("display","none")})),location.href.match(/#comments/)&&$(".comments").css("display",""),ajaxEnabled&&($("body").on("submit","form.ajax",(function(){return"POST"==$(this).attr("method").toUpperCase()?ajaxFormLoad(ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),"post"),$(this).attr("id")):window.location.hash=ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),$(this).serialize()),ajaxError})),$("body").on("click","a.ajax",(function(){return window.location.hash=ajaxMakeHash($(this).attr("href").replace(/#.*$/,""),$(this).attr("rel")),ajaxError})),$("body").on("click","a.confirmLink",(function(){return!$(this).attr("href").match(/message.+920/i)||($("#confirmBox")&&$("#confirmBox").remove(),$("body").prepend('<div id="confirmBox" class="jqmWindow"></div>'),$("#confirmBox").jqm({ajax:$(this).attr("href"),modal:!0,onLoad:function(){$("#confirmBox").css("margin-left","-"+$("#confirmBox").width()/2+"px"),$("#confirmBox").css("margin-top","-"+$("#confirmBox").height()/2+"px")}}),$("#confirmBox").jqmShow(),!1)})),$(window).on("hashchange",(function(){ajaxPageLoad(window.location.hash.replace(/^#/,""))})),$("body").on("click","a#confirmNo",(function(){return!$("#confirmBox").is(".jqmWindow")||($("#confirmBox").jqmHide(),$("#confirmBox").remove(),!1)})))}"undefined"!=typeof jQuery&&$(document).ready((function(){ajaxEnabled&&""!=window.location.hash&&ajaxPageLoad(window.location.hash.replace(/^#/,"")),bindHandlers()})),window.name="main";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9CYXNlU2VydmVyRXZlbnRzRHJpdmVyLmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9kcml2ZXIvU2VydmVyRXZlbnRzQWpheERyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvZHJpdmVyL1NlcnZlckV2ZW50c1NTRURyaXZlci5qcyIsIndlYnBhY2s6Ly9jb3RvbnRpL3NyYy9zZXJ2ZXJFdmVudHMvY2xpZW50L0Jhc2VTZXJ2ZXJFdmVudHNDbGllbnQuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvc2VydmVyRXZlbnRzL2RyaXZlci9TZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9jbGllbnQvU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50LmpzIiwid2VicGFjazovL2NvdG9udGkvc3JjL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvVG9hc3QuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvQ290b250aUFwcGxpY2F0aW9uLmpzIl0sIm5hbWVzIjpbImVuY29kZVVSSWZpeCIsInN0ciIsImVuY29kZVVSSSIsImRlY29kZVVSSSIsInJlcGxhY2UiLCJnZXRCYXNlSHJlZiIsImhyZWYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicG9wdXAiLCJjb2RlIiwidyIsImgiLCJ3aW5kb3ciLCJvcGVuIiwicGZzIiwiaWQiLCJjMSIsImMyIiwicGFyc2VyIiwicmVkaXJlY3QiLCJ1cmwiLCJsb2NhdGlvbiIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwidmFsdWUiLCJ0b2dnbGVibG9jayIsImJsIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJ0b2dnbGVBbGwiLCJhY3Rpb24iLCJibGtzIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJpbnNlcnRUZXh0IiwiZG9jT2JqIiwiZmllbGROYW1lIiwiZmllbGQiLCJmaW5kRmllbGQiLCJmb3JtcyIsImoiLCJlbGVtZW50cyIsIm5hbWUiLCJzZWxlY3Rpb24iLCJmb2N1cyIsImNyZWF0ZVJhbmdlIiwidGV4dCIsInNlbGVjdGlvblN0YXJ0Iiwic3RhcnRQb3MiLCJlbmRQb3MiLCJzZWxlY3Rpb25FbmQiLCJzdWJzdHJpbmciLCJCYXNlU2VydmVyRXZlbnRzRHJpdmVyIiwiRXZlbnRUYXJnZXQiLCJtb2RlIiwiZXZlbnRzVXJsIiwiY29uc3RydWN0b3IiLCJzdXBlciIsInRoaXMiLCJpbml0Iiwib25FdmVudFRyaWdnZXJlZCIsImV2ZW50RGF0YSIsImNvbnNvbGUiLCJsb2ciLCJldmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiZGF0YSIsImJhciIsImRpc3BhdGNoRXZlbnQiLCJTZXJ2ZXJFdmVudHNBamF4RHJpdmVyIiwiU2VydmVyRXZlbnRzU1NFRHJpdmVyIiwiZSIsIkV2ZW50U291cmNlIiwib25vcGVuIiwib25tZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwiZXZlbnRJZCIsImxhc3RFdmVudElkIiwib25lcnJvciIsIkJhc2VTZXJ2ZXJFdmVudHNDbGllbnQiLCJkcml2ZXJUeXBlIiwiU2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeSIsInQiLCJuIiwiYmFzZVVybCIsImdldEJ5VHlwZSIsImRyaXZlciIsInNlcnZlclNlbnRFdmVudHNVcmwiLCJhamF4RXZlbnRzVXJsIiwiU2VydmVyRXZlbnRzQ2xpZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudCIsInBvcnQiLCJTaGFyZWRXb3JrZXIiLCJwb3N0TWVzc2FnZSIsImNvbmZpZyIsImVycm9yIiwiU2VydmVyRXZlbnRzIiwicyIsIm8iLCJyIiwiTWFwIiwiYWRkT2JzZXJ2ZXIiLCJjYWxsYmFjayIsInNldCIsIm9uRXZlbnQiLCJhIiwibCIsImZvckVhY2giLCJvYnNlcnZlciIsIlRvYXN0Iiwic3RhdGljIiwidGl0bGUiLCJtZXNzYWdlIiwiaGludCIsInR5cGUiLCJkZWxheSIsImQiLCJib290c3RyYXAiLCJzaG93IiwiY29udGFpbmVyIiwidG9hc3RUaXRsZSIsInRvYXN0SGludCIsInRvYXN0SFRNTCIsInRvYXN0V3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJ0b2FzdEVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImFwcGVuZENoaWxkIiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZSIsImMiLCJyZXN1bHQiLCJjbGFzc05hbWUiLCJjb250YWluZXJDbGFzcyIsImJvZHkiLCJhcHBlbmQiLCJNb2RhbCIsImNvbnRlbnQiLCJidXR0b25zIiwiY2VudGVyZWQiLCJkaWFsb2dDbGFzcyIsIm1vZGFsSFRNTCIsIm1vZGFsV3JhcHBlciIsInYiLCJxdWVyeVNlbGVjdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwiYnV0dG9uIiwidSIsImJ1dHRvbkRhdGEiLCJwdXNoIiwibGFiZWwiLCJzZXRBdHRyaWJ1dGUiLCJidG5UeXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2VPbkNsaWNrIiwib25DbGljayIsImNvdCIsInAiLCJnZXRTZXJ2ZXJFdmVudHMiLCJjb25maXJtIiwib2tMYWJlbCIsImNhbmNlbExhYmVsIiwibW9kYWwiLCJnZXRNb2RhbCIsImdldFRvYXN0IiwidG9hc3QiLCJsb2FkRGF0YSIsIndoYXQiLCJsb2FkZWREYXRhIiwiZGF0YVRvTG9hZCIsIlN0cmluZyIsIml0ZW0iLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJpbmRleCIsImFycmF5IiwicmVzcG9uc2UiLCJmZXRjaCIsInRvU3RyaW5nIiwib2siLCJyZXNwb25zZURhdGEiLCJqc29uIiwic3VjY2VzcyIsImtleSIsImxvYWRDYXB0Y2hhIiwidGhlbiIsImNhcHRjaGFFbGVtZW50cyIsImVsZW1lbnQiLCJjYXB0Y2hhIiwiZXhlY3V0ZVNjcmlwdEVsZW1lbnRzIiwiZm9ybSIsImNsb3Nlc3QiLCJpbnB1dFgiLCJ4IiwiY29udGFpbmVyRWxlbWVudCIsInNjcmlwdEVsZW1lbnRzIiwiZnJvbSIsInNjcmlwdEVsZW1lbnQiLCJjbG9uZWRFbGVtZW50IiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJhamF4RXJyb3JIYW5kbGVycyIsImFqYXhTdWNjZXNzSGFuZGxlcnMiLCJhamF4RW5hYmxlZCIsImpRdWVyeSIsImFqYXhDdXJyZW50QmFzZSIsIiQiLCJlcSIsImF0dHIiLCJhamF4VXNlZCIsImFqYXhFcnJvciIsImFqYXhTZW5kIiwic2V0dGluZ3MiLCJtZXRob2QiLCJ0b1VwcGVyQ2FzZSIsImZvcm1JZCIsInNlcmlhbGl6ZSIsInNlcCIsImluZGV4T2YiLCJhamF4IiwiYmVmb3JlU2VuZCIsIm5vbnNob3dsb2FkaW5nIiwiZGl2SWQiLCJ3aWR0aCIsImhlaWdodCIsImNzcyIsIm1zZyIsIm5vbnNob3dmYWRlaW4iLCJodG1sIiwiaGlkZSIsImZhZGVJbiIsImZ1bmMiLCJhbGVydCIsImFqYXhQYWdlTG9hZCIsImhhc2giLCJtIiwibWF0Y2giLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdWJzdHIiLCJhamF4Rm9ybUxvYWQiLCJhamF4TWFrZUhhc2giLCJyZWwiLCJmb3JtRGF0YSIsImhyZWZCYXNlIiwiYmluZEhhbmRsZXJzIiwiY2xpY2siLCJvbiIsInByZXBlbmQiLCJqcW0iLCJvbkxvYWQiLCJqcW1TaG93IiwiaXMiLCJqcW1IaWRlIiwicmVhZHkiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsU0FBQUEsYUFBQUMsR0FHQSxPQUFBQyxVQUFB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LEVBQUEsZUFBQW1CLElBQUEsaUJBQUFuQixFQUFBLGVBQUFrQixTQUFBLE9BQ0EsSUFDQWxCLEVBQUEsZUFBQTRDLFdBQ0EsRUFJQSxJQUdBNUMsRUFBQTVNLFFBQUFvUCxHQUFBLHlCQUNBYixhQUFBdk8sT0FBQVMsU0FBQStOLEtBQUFqUCxRQUFBLFNBQ0EsSUFFQXFOLEVBQUEsUUFBQXdDLEdBQUEsa0NBQ0EsT0FBQXhDLEVBQUEsZUFBQTZDLEdBQUEsZ0JBRUE3QyxFQUFBLGVBQUE4QyxVQUNBOUMsRUFBQSxlQUFBakYsVUFDQSxFQU1BLElBRUEsQ0FFQSxvQkFBQStFLFFBQ0FFLEVBQUFsTixVQUFBaVEsT0FBQSxXQUVBbEQsYUFDQSxJQUFBek0sT0FBQVMsU0FBQStOLE1BQ0FELGFBQUF2TyxPQUFBUyxTQUFBK04sS0FBQWpQLFFBQUEsVUFJQTJQLGNBQ0EsSUFHQWxQLE9BQUFnQyxLQUFBIiwiZmlsZSI6ImJhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZW5jb2RlVVJJZml4KHN0cikge1xyXG5cdC8vIHRvIHByZXZlbnQgdHdpY2UgZW5jb2RpbmdcclxuXHQvLyBhbmQgZml4ICdbJywnXScgc2lnbnMgdG8gZm9sbG93IFJGQzM5ODYgKHNlY3Rpb24tMy4yLjIpXHJcblx0cmV0dXJuIGVuY29kZVVSSShkZWNvZGVVUkkoc3RyKSkucmVwbGFjZSgvJTVCL2csICdbJykucmVwbGFjZSgvJTVEL2csICddJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEJhc2VIcmVmKCkge1xyXG5cdHZhciBocmVmID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Jhc2UnKVswXS5ocmVmO1xyXG5cdGlmIChocmVmID09IG51bGwpIHtcclxuXHRcdHJldHVybiAnLyc7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiBocmVmO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gcG9wdXAoY29kZSwgdywgaCl7XHJcbiAgICB3aW5kb3cub3BlbihnZXRCYXNlSHJlZigpICsgJ2luZGV4LnBocD9vPScgKyBjb2RlLCAnJywgJ3Rvb2xiYXI9MCxsb2NhdGlvbj0wLGRpcmVjdG9yaWVzPTAsbWVudUJhcj0wLHJlc2l6YWJsZT0wLHNjcm9sbGJhcnM9eWVzLHdpZHRoPScgKyB3ICsgJyxoZWlnaHQ9JyArIGggKyAnLGxlZnQ9MzIsdG9wPTE2Jyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdG9kbyBtb3ZlIHRvIHBmcyBtb2R1bGVcclxuICovXHJcbmZ1bmN0aW9uIHBmcyhpZCwgYzEsIGMyLCBwYXJzZXIpe1xyXG4gICAgd2luZG93Lm9wZW4oXHJcblx0XHRnZXRCYXNlSHJlZigpICsgJ2luZGV4LnBocD9lPXBmcyZ1c2VyaWQ9JyArIGlkICsgJyZjMT0nICsgYzEgKyAnJmMyPScgKyBjMiArICcmcGFyc2VyPScgKyBwYXJzZXIsXHJcblx0XHQnUEZTJyxcclxuXHRcdCdzdGF0dXM9MSwgdG9vbGJhcj0wLGxvY2F0aW9uPTAsZGlyZWN0b3JpZXM9MCxtZW51QmFyPTAscmVzaXphYmxlPTEsc2Nyb2xsYmFycz15ZXMsd2lkdGg9NzU0LGhlaWdodD01MTIsbGVmdD0zMix0b3A9MTYnXHJcblx0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVkaXJlY3QodXJsKXtcclxuICAgIGxvY2F0aW9uLmhyZWYgPSB1cmwub3B0aW9uc1t1cmwuc2VsZWN0ZWRJbmRleF0udmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZWJsb2NrKGlkKXtcclxuICAgIHZhciBibCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIGlmIChibC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xyXG4gICAgICAgIGJsLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGJsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVBbGwoYWN0aW9uKSB7XHJcblx0dmFyIGJsa3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbaWRePVwiYmxrX1wiXScpO1xyXG5cdGZvciAoaSA9IDA7IGkgPCBibGtzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAoYWN0aW9uID09ICdoaWRlJykge1xyXG5cdFx0XHRibGtzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHR9IGVsc2UgaWYgKGFjdGlvbiA9PSAnc2hvdycpIHtcclxuXHRcdFx0Ymxrc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdy1ncm91cCc7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLy8gSW5zZXJ0cyB0ZXh0IGludG8gdGV4dGFyZWEgYXQgY3Vyc29yIHBvc2l0aW9uXHJcbmZ1bmN0aW9uIGluc2VydFRleHQoZG9jT2JqLCBmaWVsZE5hbWUsIHZhbHVlKSB7XHJcblx0dmFyIGZpZWxkID0gbnVsbDtcclxuXHRpZiAoIWRvY09iaikge1xyXG5cdFx0ZG9jT2JqID0gZG9jdW1lbnQ7XHJcblx0fVxyXG5cdC8vIEZpbmQgdGhlIGZpZWxkIGluIHRoZSBkb2NPYmpcclxuXHRmaW5kRmllbGQ6XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkb2NPYmouZm9ybXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdGlmIChkb2NPYmouZm9ybXNbaV0uZWxlbWVudHNbal0ubmFtZSA9PSBmaWVsZE5hbWUpIHtcclxuXHRcdFx0XHRmaWVsZCA9IGRvY09iai5mb3Jtc1tpXS5lbGVtZW50c1tqXTtcclxuXHRcdFx0XHRicmVhayBmaW5kRmllbGQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKCFmaWVsZCkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gSW5zZXJ0IHRoZSB0ZXh0XHJcblx0aWYgKGRvY09iai5zZWxlY3Rpb24pIHtcclxuXHRcdC8vIE1TSUUgYW5kIE9wZXJhXHJcblx0XHRmaWVsZC5mb2N1cygpO1xyXG5cdFx0dmFyIHNlbCA9IGRvY09iai5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcclxuXHRcdHNlbC50ZXh0ID0gdmFsdWU7XHJcblx0fSBlbHNlIGlmIChmaWVsZC5zZWxlY3Rpb25TdGFydCB8fCBmaWVsZC5zZWxlY3Rpb25TdGFydCA9PSAwKSB7XHJcblx0XHQvLyBNb3ppbGxhXHJcblx0XHR2YXIgc3RhcnRQb3MgPSBmaWVsZC5zZWxlY3Rpb25TdGFydDtcclxuXHRcdHZhciBlbmRQb3MgPSBmaWVsZC5zZWxlY3Rpb25FbmQ7XHJcblx0XHRmaWVsZC52YWx1ZSA9IGZpZWxkLnZhbHVlLnN1YnN0cmluZygwLCBzdGFydFBvcykgKyB2YWx1ZSArIGZpZWxkLnZhbHVlLnN1YnN0cmluZyhlbmRQb3MsIGZpZWxkLnZhbHVlLmxlbmd0aCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGZpZWxkLnZhbHVlICs9IHZhbHVlO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gQXJyYXkgb2YgYWpheCBlcnJvciBoYW5kbGVyc1xyXG4vLyBFeGFtcGxlIG9mIHVzZTpcclxuLy8gYWpheEVycm9ySGFuZGxlcnMucHVzaCh7ZnVuYzogbXlFcnJvckhhbmRsZXJ9KTtcclxuLy8gYWpheFN1Y2Nlc3NIYW5kbGVycy5wdXNoKHtmdW5jOiBteVN1Y2Nlc3NIYW5kbGVyfSk7XHJcbnZhciBhamF4RXJyb3JIYW5kbGVycyA9IG5ldyBBcnJheSgpO1xyXG52YXIgYWpheFN1Y2Nlc3NIYW5kbGVycyA9IG5ldyBBcnJheSgpO1xyXG4vLyBBSkFYIGVuYWJsZW1lbnQgZGVmYXVsdHMgdG8gZmFsc2VcclxudmFyIGFqYXhFbmFibGVkID0gZmFsc2U7XHJcbi8vIFJlcXVpcmVkIHRvIGNhbGN1bGF0ZSBwYXRoc1xyXG5pZiAodHlwZW9mIGpRdWVyeSAhPSAndW5kZWZpbmVkJykge1xyXG5cdHZhciBhamF4Q3VycmVudEJhc2UgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoJCgnYmFzZScpLmVxKDApLmF0dHIoJ2hyZWYnKSwgJycpLnJlcGxhY2UoL1xcPy4qJC8sICcnKS5yZXBsYWNlKC8jLiokLywgJycpO1xyXG59XHJcbi8vIFRoaXMgZmxhZyBpbmRpY2F0ZXMgdGhhdCBBSkFYK2hpc3RvcnkgaGFzIGJlZW4gdXNlZCBvbiB0aGlzIHBhZ2VcclxuLy8gSXQgbWVhbnMgdGhhdCBcIiNcIiBvciBob21lIGxpbmsgc2hvdWxkIGJlIGxvYWRlZCB2aWEgYWpheCB0b29cclxudmFyIGFqYXhVc2VkID0gZmFsc2U7XHJcbi8vIEdsb2JhbCBmbGFnIHRvIGxldCBldmVyeWJvZHkga25vdyB0aGF0IEFKQVggaGFzIGZhaWxlZFxyXG52YXIgYWpheEVycm9yID0gZmFsc2U7XHJcblxyXG4vKipcclxuICogQUpBWCBoZWxwZXIgZnVuY3Rpb25cclxuICogQHBhcmFtIHtoYXNofSBzZXR0aW5ncyBBIGhhc2h0YWJsZSB3aXRoIHNldHRpbmdzXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4U2VuZChzZXR0aW5ncykge1xyXG5cdHZhciBtZXRob2QgPSBzZXR0aW5ncy5tZXRob2QgPyBzZXR0aW5ncy5tZXRob2QudG9VcHBlckNhc2UoKSA6ICdHRVQnO1xyXG5cdHZhciBkYXRhID0gc2V0dGluZ3MuZGF0YSB8fCAnJztcclxuXHR2YXIgdXJsID0gc2V0dGluZ3MudXJsIHx8ICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5hdHRyKCdhY3Rpb24nKTtcclxuXHRpZiAobWV0aG9kID09PSAnUE9TVCcpIHtcclxuXHRcdGRhdGEgKz0gJyYnICsgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLnNlcmlhbGl6ZSgpO1xyXG5cdH0gZWxzZSBpZiAoc2V0dGluZ3MuZm9ybUlkKSB7XHJcblx0XHR2YXIgc2VwID0gdXJsLmluZGV4T2YoJz8nKSA+IDAgPyAnJicgOiAnPyc7XHJcblx0XHR1cmwgKz0gc2VwICsgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLnNlcmlhbGl6ZSgpO1xyXG5cdH1cclxuXHQkLmFqYXgoe1xyXG5cdFx0dHlwZTogbWV0aG9kLFxyXG5cdFx0dXJsOiBlbmNvZGVVUklmaXgodXJsKSxcclxuXHRcdGRhdGE6IGRhdGEsXHJcblx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpXHJcblx0XHRcdFx0XHQuYXBwZW5kKCc8c3BhbiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyBsZWZ0OicgKyAoJCgnIycgKyBzZXR0aW5ncy5kaXZJZCkud2lkdGgoKS8yIC0gMTEwKSArICdweDt0b3A6JyArICgkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oZWlnaHQoKS8yIC0gOSkgKyAncHg7XCIgY2xhc3M9XCJsb2FkaW5nXCIgaWQ9XCJsb2FkaW5nXCI+PGltZyBzcmM9XCIuL2ltYWdlcy9zcGlubmVyLmdpZlwiIGFsdD1cImxvYWRpbmdcIi8+PC9zcGFuPicpLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKG1zZykge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnI2xvYWRpbmcnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dmYWRlaW4pIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oaWRlKCkuaHRtbChtc2cpLmZhZGVJbig1MDApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmh0bWwobXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFqYXhTdWNjZXNzSGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRpZihhamF4U3VjY2Vzc0hhbmRsZXJzW2ldLmZ1bmMpXHJcblx0XHRcdFx0XHRhamF4U3VjY2Vzc0hhbmRsZXJzW2ldLmZ1bmMobXNnKTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRhamF4U3VjY2Vzc0hhbmRsZXJzW2ldKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRlcnJvcjogZnVuY3Rpb24obXNnKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjbG9hZGluZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2ZhZGVpbikge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhpZGUoKS5odG1sKG1zZykuZmFkZUluKDUwMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaHRtbChtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChhamF4RXJyb3JIYW5kbGVycy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhamF4RXJyb3JIYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGFqYXhFcnJvckhhbmRsZXJzW2ldLmZ1bmMpIHtcclxuXHRcdFx0XHRcdFx0YWpheEVycm9ySGFuZGxlcnNbaV0uZnVuYyhtc2cpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YWpheEVycm9ySGFuZGxlcnNbaV0obXNnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YWxlcnQoJ0FKQVggZXJyb3I6ICcgKyBtc2cpO1xyXG5cdFx0XHRcdGFqYXhFcnJvciA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBSkFYIHN1YnBhZ2UgbG9hZGVyIHdpdGggaGlzdG9yeSBzdXBwb3J0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEEgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheFBhZ2VMb2FkKGhhc2gpIHtcclxuICAgIGlmIChoYXNoICE9PSAnJykge1xyXG5cdFx0aGFzaC5yZXBsYWNlKC9eIy8sICcnKTtcclxuXHR9XHJcblx0dmFyIG0gPSBoYXNoLm1hdGNoKC9eZ2V0KC0uKj8pPzsoLiopJC8pO1xyXG5cdGlmIChtKSB7XHJcblx0XHQvLyBhamF4IGJvb2ttYXJrXHJcbiAgICAgICAgdmFyIHVybCA9IG1bMl0uaW5kZXhPZignOycpID4gMCA/IG1bMl0ucmVwbGFjZSgnOycsICc/JykgOiBhamF4Q3VycmVudEJhc2UgKyAnPycgKyBkZWNvZGVVUklDb21wb25lbnQobVsyXSk7XHJcblx0XHRhamF4VXNlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gYWpheFNlbmQoe1xyXG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0ZGl2SWQ6IG1bMV0gPyBtWzFdLnN1YnN0cigxKSA6ICdhamF4QmxvY2snXHJcblx0XHR9KTtcclxuXHR9IGVsc2UgaWYgKGhhc2ggPT09ICcnICYmIGFqYXhVc2VkKSB7XHJcblx0XHQvLyBhamF4IGhvbWVcclxuXHRcdHJldHVybiBhamF4U2VuZCAoe1xyXG5cdFx0XHR1cmw6IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvIy4qJC8sICcnKSxcclxuXHRcdFx0ZGl2SWQ6ICdhamF4QmxvY2snXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBSkFYIHN1YmZvcm0gbG9hZGVyIHdpdGhvdXQgaGlzdG9yeSB0cmFja2luZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBBIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1JZCBUYXJnZXQgZm9ybSBpZCBhdHRyaWJ1dGVcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhGb3JtTG9hZChoYXNoLCBmb3JtSWQpIHtcclxuXHR2YXIgbSA9IGhhc2gubWF0Y2goL14oZ2V0fHBvc3QpKC0uKj8pPzsoLiopJC8pO1xyXG5cdGlmIChtKSB7XHJcblx0XHQvLyBhamF4IGJvb2ttYXJrXHJcblx0XHR2YXIgdXJsID0gbVszXS5pbmRleE9mKCc7JykgPiAwID8gbVszXS5yZXBsYWNlKCc7JywgJz8nKSA6IGFqYXhDdXJyZW50QmFzZSArICc/JyArIG1bM107XHJcblx0XHRhamF4VXNlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gYWpheFNlbmQoe1xyXG5cdFx0XHRtZXRob2Q6IG1bMV0udG9VcHBlckNhc2UoKSxcclxuXHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdGRpdklkOiBtWzJdID8gbVsyXS5zdWJzdHIoMSkgOiAnYWpheEJsb2NrJyxcclxuXHRcdFx0Zm9ybUlkOiBmb3JtSWRcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgYWpheGFibGUgaGFzaCBzdHJpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGhyZWYgTGluayBocmVmIG9yIGZvcm0gYWN0aW9uIGF0dHJpYnV0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsIEFuIGF0dHJpYnV0ZSB2YWx1ZSBwb3NzaWJseSBjb250YWluaW5nIGEgaGFzaCBhZGRyZXNzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSBJcyBwYXNzZWQgZm9yIGZvcm1zIG9ubHksIGlzICdwb3N0JyBmb3IgUE9TVCBmb3Jtc1xyXG4gKiBvciBzZXJpYWxpemVkIGZvcm0gZGF0YSBmb3IgR0VUIGZvcm1zXHJcbiAqIEByZXR1cm4gQSB2YWxpZCBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEB0eXBlIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gYWpheE1ha2VIYXNoKGhyZWYsIHJlbCwgZm9ybURhdGEpIHtcclxuXHR2YXIgaGFzaCA9IChmb3JtRGF0YSA9PSAncG9zdCcpID8gJ3Bvc3QnIDogJ2dldCc7XHJcblx0dmFyIGhyZWZCYXNlLCBwYXJhbXM7XHJcblx0dmFyIHNlcCA9ICc/JztcclxuXHR2YXIgbSA9IHJlbCA/IHJlbC5tYXRjaCgvKGdldHxwb3N0KSgtW14gO10rKT8oO1xcUyopPy8pIDogZmFsc2U7XHJcblx0aWYgKG0pIHtcclxuXHRcdGhhc2ggPSBtWzFdO1xyXG5cdFx0aWYgKG1bMl0pIHtcclxuXHRcdFx0aGFzaCArPSBtWzJdO1xyXG5cdFx0fVxyXG5cdFx0aWYgKG1bM10pIHtcclxuXHRcdFx0aHJlZiA9IG1bM10uc3Vic3RyKDEpO1xyXG5cdFx0XHRzZXAgID0gJzsnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRoYXNoICs9ICc7J1xyXG5cdGlmIChocmVmLmluZGV4T2Yoc2VwKSA+IDApIHtcclxuXHRcdGhyZWZCYXNlID0gaHJlZi5zdWJzdHIoMCwgaHJlZi5pbmRleE9mKHNlcCkpO1xyXG5cdFx0cGFyYW1zID0gaHJlZi5zdWJzdHIoaHJlZi5pbmRleE9mKHNlcCkgKyAxKTtcclxuXHRcdGlmIChmb3JtRGF0YSAmJiBmb3JtRGF0YSAhPSAncG9zdCcpIHtcclxuXHRcdFx0cGFyYW1zICs9ICcmJyArIGZvcm1EYXRhO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRocmVmQmFzZSA9IGhyZWY7XHJcblx0XHRwYXJhbXMgPSAnJztcclxuXHRcdGlmIChmb3JtRGF0YSAmJiBmb3JtRGF0YSAhPSAncG9zdCcpIHtcclxuXHRcdFx0cGFyYW1zICs9IHNlcCArIGZvcm1EYXRhO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRoYXNoICs9IGhyZWZCYXNlID09IGFqYXhDdXJyZW50QmFzZSA/IHBhcmFtcyA6IGhyZWZCYXNlICsgJzsnICsgcGFyYW1zO1xyXG5cdHJldHVybiBoYXNoO1xyXG59XHJcblxyXG4vKipcclxuICogU3RhbmRhcmQgZXZlbnQgYmluZGluZ3NcclxuICovXHJcbmZ1bmN0aW9uIGJpbmRIYW5kbGVycygpIHtcclxuXHRpZiAobG9jYXRpb24uaGFzaCA9PSAnI2NvbW1lbnRzJyB8fCBsb2NhdGlvbi5oYXNoLm1hdGNoKC8jY1xcZCsvKSkge1xyXG5cdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdH1cclxuXHQkKCcuY29tbWVudHNfbGluaycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYoJCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcblx0XHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGlmKGxvY2F0aW9uLmhyZWYubWF0Y2goLyNjb21tZW50cy8pKSB7XHJcblx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0fVxyXG5cclxuXHRpZiAoYWpheEVuYWJsZWQpIHtcclxuXHRcdC8vIEFKQVggYXV0by1oYW5kbGluZ1xyXG5cdFx0JCgnYm9keScpLm9uKCdzdWJtaXQnLCAnZm9ybS5hamF4JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmF0dHIoJ21ldGhvZCcpLnRvVXBwZXJDYXNlKCkgPT0gJ1BPU1QnKSB7XHJcblx0XHRcdFx0YWpheEZvcm1Mb2FkKGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2FjdGlvbicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cignY2xhc3MnKSwgJ3Bvc3QnKSwgJCh0aGlzKS5hdHRyKCdpZCcpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2FjdGlvbicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cignY2xhc3MnKSwgJCh0aGlzKS5zZXJpYWxpemUoKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGFqYXhFcnJvcjtcclxuXHRcdH0pO1xyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhLmFqYXgnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdocmVmJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcblx0XHRcdHJldHVybiBhamF4RXJyb3I7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBSkFYIGFjdGlvbiBjb25maXJtYXRpb25zXHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EuY29uZmlybUxpbmsnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuYXR0cignaHJlZicpLm1hdGNoKC9tZXNzYWdlLis5MjAvaSkpIHtcclxuXHRcdFx0XHRpZiAoJCgnI2NvbmZpcm1Cb3gnKSkge1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCgnYm9keScpLnByZXBlbmQoJzxkaXYgaWQ9XCJjb25maXJtQm94XCIgY2xhc3M9XCJqcW1XaW5kb3dcIj48L2Rpdj4nKTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbSh7YWpheDokKHRoaXMpLmF0dHIoJ2hyZWYnKSxtb2RhbDp0cnVlLG9uTG9hZDpmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5jc3MoJ21hcmdpbi1sZWZ0JywgJy0nKygkKCcjY29uZmlybUJveCcpLndpZHRoKCkvMikrJ3B4Jyk7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmNzcygnbWFyZ2luLXRvcCcsICctJysoJCgnI2NvbmZpcm1Cb3gnKS5oZWlnaHQoKS8yKSsncHgnKTtcclxuXHRcdFx0XHR9fSk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW1TaG93KCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBMaXN0ZW4gdG8gaGFzaCBjaGFuZ2UgZXZlbnRzXHJcblx0XHQkKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0YWpheFBhZ2VMb2FkKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYSNjb25maXJtTm8nLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQoXCIjY29uZmlybUJveFwiKS5pcyhcIi5qcW1XaW5kb3dcIikpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbUhpZGUoKTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5pZiAodHlwZW9mIGpRdWVyeSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gSWYgcGFnZSB3YXMgbG9hZGVkIHdpdGggaGFzaFxyXG4gICAgICAgIGlmIChhamF4RW5hYmxlZCkge1xyXG4gICAgICAgICAgICBpZih3aW5kb3cubG9jYXRpb24uaGFzaCAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgYWpheFBhZ2VMb2FkKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmluZEhhbmRsZXJzKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxud2luZG93Lm5hbWUgPSAnbWFpbic7IiwiLy8gaW1wb3J0IHtTZXJ2ZXJFdmVudHNTU0VEcml2ZXJ9IGZyb20gXCIuL1NlcnZlckV2ZW50c1NTRURyaXZlclwiO1xyXG4vLyBpbXBvcnQge1NlcnZlckV2ZW50c0FqYXhEcml2ZXJ9IGZyb20gXCIuL1NlcnZlckV2ZW50c0FqYXhEcml2ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIHNlcnZlciBldmVudHMgZHJpdmVyXHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZVNlcnZlckV2ZW50c0RyaXZlciBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIG1vZGUgPSAncHJvZHVjdGlvbic7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIGV2ZW50c1VybCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXZlbnRzVXJsLCBtb2RlID0gJycpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICBpZiAobW9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50c1VybCA9IGV2ZW50c1VybDtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkgeyB9XHJcblxyXG4gICAgb25FdmVudFRyaWdnZXJlZChldmVudERhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlckV2ZW50c0RyaXZlcjogU2VydmVyIHRyaWdnZXJlZCBldmVudCcsIGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDogZXZlbnREYXRhLFxyXG4gICAgICAgICAgICBkYXRhOiB7YmFyOiAnYmF6J31cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCYXNlU2VydmVyRXZlbnRzRHJpdmVyfSBmcm9tIFwiLi9CYXNlU2VydmVyRXZlbnRzRHJpdmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VydmVyRXZlbnRzQWpheERyaXZlciBleHRlbmRzIEJhc2VTZXJ2ZXJFdmVudHNEcml2ZXIge1xyXG5cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0RyaXZlcn0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0RyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBzZW50IGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICogQGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNTU0VEcml2ZXIgZXh0ZW5kcyBCYXNlU2VydmVyRXZlbnRzRHJpdmVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge0V2ZW50U291cmNlfG51bGx9XHJcbiAgICAgKi9cclxuICAgICNldmVudFNvdXJjZSA9IG51bGw7XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jZXZlbnRTb3VyY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c1NTRURyaXZlci4gJywgdGhpcy5ldmVudHNVcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UodGhpcy5ldmVudHNVcmwpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2Uub25vcGVuID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzU1NFRHJpdmVyIGNvbm5lY3Rpb24gaXMgb3BlbicpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jZXZlbnRTb3VyY2Uub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChldmVudERhdGEuZGF0YSAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2YgZXZlbnREYXRhLmRhdGEgPT09ICdzdHJpbmcnKSAmJiBldmVudERhdGEuZGF0YSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5kYXRhID0gSlNPTi5wYXJzZShldmVudERhdGEuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnREYXRhLmV2ZW50SWQgPSBldmVudC5sYXN0RXZlbnRJZDtcclxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI2V2ZW50U291cmNlLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXJFdmVudHNTU0VEcml2ZXIgY29ubmVjdGlvbiBlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIEJhc2Ugc2VydmVyIGV2ZW50cyBjbGllbnRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBCYXNlU2VydmVyRXZlbnRzQ2xpZW50IGV4dGVuZHMgRXZlbnRUYXJnZXQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIG1vZGUgPSAncHJvZHVjdGlvbic7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBkcml2ZXJUeXBlID0gJyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZHJpdmVyVHlwZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gbW9kZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihkcml2ZXJUeXBlLCBtb2RlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJpdmVyVHlwZSA9IGRyaXZlclR5cGU7XHJcblxyXG4gICAgICAgIGlmIChtb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyRXZlbnRzQ2xpZW50OiBTZXJ2ZXIgdHJpZ2dlcmVkIGV2ZW50JywgZXZlbnREYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdldmVudCcsIHtkZXRhaWw6IGV2ZW50RGF0YX0pO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NlcnZlckV2ZW50c1NTRURyaXZlcn0gZnJvbSBcIi4vU2VydmVyRXZlbnRzU1NFRHJpdmVyXCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzQWpheERyaXZlcn0gZnJvbSBcIi4vU2VydmVyRXZlbnRzQWpheERyaXZlclwiO1xyXG5cclxuLyoqXHJcbiAqIEJhc2Ugc2VydmVyIGV2ZW50cyBkcml2ZXJcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNEcml2ZXJGYWN0b3J5IHtcclxuICAgICNiYXNlVXJsID0gJy8nO1xyXG5cclxuICAgICNtb2RlID0gJ3Byb2R1Y3Rpb24nXHJcblxyXG4gICAgY29uc3RydWN0b3IoYmFzZVVybCA9IG51bGwsIG1vZGUgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKGJhc2VVcmwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy4jYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuI21vZGUgPSBtb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkcml2ZXJUeXBlXHJcbiAgICAgKiBAcmV0dXJucyB7U2VydmVyRXZlbnRzU1NFRHJpdmVyfFNlcnZlckV2ZW50c0FqYXhEcml2ZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldEJ5VHlwZShkcml2ZXJUeXBlKSB7XHJcbiAgICAgICAgbGV0IGRyaXZlciA9IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlcnZlclNlbnRFdmVudHNVcmwgPSB0aGlzLiNiYXNlVXJsICsgJz9uPXNlcnZlci1ldmVudHMmYT1zc2UnO1xyXG4gICAgICAgIGNvbnN0IGFqYXhFdmVudHNVcmwgPSB0aGlzLiNiYXNlVXJsICsgJz9uPXNlcnZlci1ldmVudHMmYT1hamF4JztcclxuXHJcbiAgICAgICAgc3dpdGNoIChkcml2ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NlcnZlclNlbnRFdmVudHMnOlxyXG4gICAgICAgICAgICAgICAgZHJpdmVyID0gbmV3IFNlcnZlckV2ZW50c1NTRURyaXZlcihzZXJ2ZXJTZW50RXZlbnRzVXJsKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNtb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXNpbmcgU2VydmVyRXZlbnRzU1NFRHJpdmVyJywgc2VydmVyU2VudEV2ZW50c1VybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBkcml2ZXIgPSBuZXcgU2VydmVyRXZlbnRzQWpheERyaXZlcihhamF4RXZlbnRzVXJsKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNtb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXNpbmcgU2VydmVyRXZlbnRzQWpheERyaXZlcicsIGFqYXhFdmVudHNVcmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRyaXZlcjtcclxuICAgIH1cclxufSIsImltcG9ydCB7QmFzZVNlcnZlckV2ZW50c0NsaWVudH0gZnJvbSBcIi4vQmFzZVNlcnZlckV2ZW50c0NsaWVudFwiO1xyXG5pbXBvcnQge1NlcnZlckV2ZW50c0RyaXZlckZhY3Rvcnl9IGZyb20gXCIuLi9kcml2ZXIvU2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeVwiO1xyXG5cclxuLyoqXHJcbiAqIFNlcnZlciBldmVudHMgY2xpZW50XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VydmVyRXZlbnRzQ2xpZW50IGV4dGVuZHMgQmFzZVNlcnZlckV2ZW50c0NsaWVudCB7XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdCBTZXJ2ZXJFdmVudHNDbGllbnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSBuZXcgU2VydmVyRXZlbnRzRHJpdmVyRmFjdG9yeShnZXRCYXNlSHJlZigpLCB0aGlzLm1vZGUpO1xyXG5cclxuICAgICAgICBjb25zdCBkcml2ZXIgPSBmYWN0b3J5LmdldEJ5VHlwZSh0aGlzLmRyaXZlclR5cGUsIHRoaXMubW9kZSk7XHJcbiAgICAgICAgZHJpdmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2V2ZW50JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25FdmVudFRyaWdnZXJlZChldmVudC5kZXRhaWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRyaXZlci5pbml0KCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Jhc2VTZXJ2ZXJFdmVudHNDbGllbnR9IGZyb20gXCIuL0Jhc2VTZXJ2ZXJFdmVudHNDbGllbnRcIjtcclxuXHJcbi8qKlxyXG4gKiBTaGFyZWQgd29ya2VyIHNlcnZlciBldmVudHMgY2xpZW50XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TaGFyZWRXb3JrZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFdmVudHNTaGFyZWRXb3JrZXJDbGllbnQgZXh0ZW5kcyBCYXNlU2VydmVyRXZlbnRzQ2xpZW50IHtcclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFNoYXJlZFdvcmtlcignL2pzL3NoYXJlZFdvcmtlclNlcnZlckV2ZW50cy5taW4uanMnKTtcclxuICAgICAgICAgICAgY29uc3QgcG9ydCA9IHdvcmtlci5wb3J0O1xyXG5cclxuICAgICAgICAgICAgcG9ydC5wb3N0TWVzc2FnZSh7Y29uZmlnOiB7bW9kZTogdGhpcy5tb2RlLCBkcml2ZXI6IHRoaXMuZHJpdmVyVHlwZSwgYmFzZVVybDogZ2V0QmFzZUhyZWYoKX19KTtcclxuXHJcbiAgICAgICAgICAgIHBvcnQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyU2VudEV2ZW50c1NoYXJlZFdvcmtlciBldmVudCcsIGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50VHJpZ2dlcmVkKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vaW1wb3J0IHtCYXNlU2VydmVyRXZlbnRzRHJpdmVyfSBmcm9tIFwiLi9kcml2ZXIvQmFzZVNlcnZlckV2ZW50c0RyaXZlclwiO1xyXG5pbXBvcnQge1NlcnZlckV2ZW50c0FqYXhEcml2ZXJ9IGZyb20gXCIuL2RyaXZlci9TZXJ2ZXJFdmVudHNBamF4RHJpdmVyXCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzU1NFRHJpdmVyfSBmcm9tIFwiLi9kcml2ZXIvU2VydmVyRXZlbnRzU1NFRHJpdmVyXCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzQ2xpZW50fSBmcm9tIFwiLi9jbGllbnQvU2VydmVyRXZlbnRzQ2xpZW50XCI7XHJcbmltcG9ydCB7U2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50fSBmcm9tIFwiLi9jbGllbnQvU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50XCI7XHJcblxyXG4vKipcclxuICogU2VydmVyIGV2ZW50c1xyXG4gKiBAcGFja2FnZSBDb3RvbnRpXHJcbiAqIEBjb3B5cmlnaHQgKGMpIENvdG9udGkgVGVhbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNlcnZlckV2ZW50cyB7XHJcbiAgICBtb2RlID0gJ3Byb2R1Y3Rpb24nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge251bGx8U2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50fFNlcnZlckV2ZW50c0NsaWVudH1cclxuICAgICAqL1xyXG4gICAgI2NsaWVudCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICAjY2xpZW50VHlwZSA9ICdzaGFyZWRXb3JrZXInO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge3N0cmluZ30gJ3NlcnZlclNlbnRFdmVudHMnLCAnYWpheCcgb3IgJ3dlYnNvY2tldCcgKG5vdCBpbXBsZW1lbnRlZCB5ZXQpXHJcbiAgICAgKi9cclxuICAgICNkcml2ZXJUeXBlID0gJ3NlcnZlclNlbnRFdmVudHMnO1xyXG5cclxuICAgICNvYnNlcnZlcnNSZWdpc3RyeSA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy4jb2JzZXJ2ZXJzUmVnaXN0cnkgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBhZGRPYnNlcnZlcihuYW1lLCBldmVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLiNvYnNlcnZlcnNSZWdpc3RyeS5zZXQobmFtZSwge1xyXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICBldmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgIG9uRXZlbnQ6IGNhbGxiYWNrXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLiNjbGllbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy4jaW5pdENsaWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAjaW5pdENsaWVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jY2xpZW50VHlwZSA9PT0gJ3NoYXJlZFdvcmtlcicgJiYgKHR5cGVvZiBTaGFyZWRXb3JrZXIgIT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRpbmcgU2VydmVyRXZlbnRzU2hhcmVkV29ya2VyQ2xpZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy4jY2xpZW50ID0gbmV3IFNlcnZlckV2ZW50c1NoYXJlZFdvcmtlckNsaWVudCh0aGlzLiNkcml2ZXJUeXBlLCB0aGlzLm1vZGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0aW5nIFNlcnZlckV2ZW50c0NsaWVudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuI2NsaWVudCA9IG5ldyBTZXJ2ZXJFdmVudHNDbGllbnQodGhpcy4jZHJpdmVyVHlwZSwgdGhpcy5tb2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuI2NsaWVudC5hZGRFdmVudExpc3RlbmVyKCdldmVudCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLiNvbkV2ZW50VHJpZ2dlcmVkKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7U2VydmVyRXZlbnRzU1NFRHJpdmVyfFNlcnZlckV2ZW50c0FqYXhEcml2ZXJ9XHJcbiAgICAgKi9cclxuICAgIC8vICNnZXREcml2ZXIoKSB7XHJcbiAgICAvLyAgICAgbGV0IGRyaXZlciA9IG51bGw7XHJcbiAgICAvLyAgICAgc3dpdGNoICh0aGlzLiNkcml2ZXJUeXBlKSB7XHJcbiAgICAvLyAgICAgICAgIGNhc2UgJ3NlcnZlclNlbnRFdmVudHMnOlxyXG4gICAgLy8gICAgICAgICAgICAgZHJpdmVyID0gbmV3IFNlcnZlckV2ZW50c1NTRURyaXZlcih0aGlzLiNzZXJ2ZXJTZW50RXZlbnRzVXJsLCB0aGlzLm1vZGUpO1xyXG4gICAgLy8gICAgICAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzaW5nIFNlcnZlckV2ZW50c1NTRURyaXZlcicpO1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgICBkZWZhdWx0OlxyXG4gICAgLy8gICAgICAgICAgICAgZHJpdmVyID0gbmV3IFNlcnZlckV2ZW50c0FqYXhEcml2ZXIodGhpcy4jc2VydmVyU2VudEV2ZW50c1VybCwgdGhpcy5tb2RlKTtcclxuICAgIC8vICAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2luZyBTZXJ2ZXJFdmVudHNBamF4RHJpdmVyJyk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy9cclxuICAgIC8vICAgICByZXR1cm4gZHJpdmVyO1xyXG4gICAgLy8gfVxyXG5cclxuICAgICNvbkV2ZW50VHJpZ2dlcmVkKGV2ZW50RGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyIHRyaWdnZXJlZCBldmVudCcsIGV2ZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNvYnNlcnZlcnNSZWdpc3RyeS5mb3JFYWNoKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5ldmVudCA9PT0gZXZlbnREYXRhLmV2ZW50XHJcbiAgICAgICAgICAgICAgICAmJiB0eXBlb2Ygb2JzZXJ2ZXIub25FdmVudCA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyLm9uRXZlbnQoZXZlbnREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIFRvYXN0XHJcbiAqIFNob3cgVG9hc3RzIHByb2dyYW1tYXRpY2FsbHlcclxuICogQHBhY2thZ2UgQ290b250aVxyXG4gKiBAY29weXJpZ2h0IChjKSBDb3RvbnRpIFRlYW1cclxuICpcclxuICogQGxpbmsgaHR0cHM6Ly9nZXRib290c3RyYXAuY29tL2RvY3MvNS4zL2NvbXBvbmVudHMvdG9hc3RzL1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRvYXN0IHtcclxuICAgIHN0YXRpYyBjb250YWluZXJDbGFzcyA9ICd0b2FzdC1jb250YWluZXIgcG9zaXRpb24tZml4ZWQgYm90dG9tLTAgZW5kLTAgcC0zJztcclxuXHJcbiAgICB0aXRsZSA9ICcnO1xyXG4gICAgbWVzc2FnZSA9ICcnO1xyXG4gICAgaGludCA9ICcnO1xyXG4gICAgdHlwZSA9ICcnO1xyXG4gICAgZGVsYXkgPSA1MDAwO1xyXG5cclxuICAgICNjb250YWluZXIgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhpbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHRpdGxlID0gJycsIGhpbnQgPSAnJywgdHlwZSA9ICcnKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5ib290c3RyYXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCb290c3RyYXAgaXMgbm90IGZvdW5kLiBJdCBpcyByZXF1aXJlZCBmb3IgdXNlIFwiVG9hc3RcIiBjb21wb25lbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5oaW50ID0gaGludDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI2NvbnRhaW5lciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvYXN0LWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSB0aGlzLiNjcmVhdGVDb250YWluZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLiNjb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0b2FzdFRpdGxlID0gYDxzdHJvbmcgY2xhc3M9XCJtZS1hdXRvXCI+JHt0aGlzLnRpdGxlfTwvc3Ryb25nPmA7XHJcbiAgICAgICAgY29uc3QgdG9hc3RIaW50ID0gdGhpcy5oaW50ICE9PSAnJyA/IGA8c21hbGw+JHt0aGlzLmhpbnR9PC9zbWFsbD5gIDogJyc7XHJcbiAgICAgICAgY29uc3QgYmFja0dyb3VuZCA9IHRoaXMudHlwZSAhPT0gJycgPyBgIHRleHQtYmctJHt0aGlzLnR5cGV9YCA6ICcnO1xyXG5cclxuICAgICAgICBjb25zdCB0b2FzdEhUTUwgPSBgPGRpdiBjbGFzcz1cInRvYXN0JHtiYWNrR3JvdW5kfVwiIHJvbGU9XCJhbGVydFwiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiIGBcclxuICAgICAgICAgICAgICAgICsgYGRhdGEtYnMtZGVsYXk9XCIke3RoaXMuZGVsYXl9XCI+YFxyXG4gICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwidG9hc3QtaGVhZGVyXCI+J1xyXG4gICAgICAgICAgICAgICsgYCR7dG9hc3RUaXRsZX0ke3RvYXN0SGludH1gXHJcbiAgICAgICAgICAgICAgKyAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4tY2xvc2VcIiBkYXRhLWJzLWRpc21pc3M9XCJ0b2FzdFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjwvYnV0dG9uPidcclxuICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICArIGA8ZGl2IGNsYXNzPVwidG9hc3QtYm9keVwiPiR7dGhpcy5tZXNzYWdlfTwvZGl2PmBcclxuICAgICAgICAgICsgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvYXN0V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvYXN0V3JhcHBlci5pbm5lckhUTUwgPSB0b2FzdEhUTUw7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvYXN0RWxlbWVudCA9IHRvYXN0V3JhcHBlci5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSB0b2FzdCB0byB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy4jY29udGFpbmVyLmFwcGVuZENoaWxkKHRvYXN0RWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHRvYXN0XHJcbiAgICAgICAgY29uc3QgdG9hc3QgPSBuZXcgd2luZG93LmJvb3RzdHJhcC5Ub2FzdCh0b2FzdEVsZW1lbnQpO1xyXG4gICAgICAgIHRvYXN0LnNob3coKTtcclxuXHJcbiAgICAgICAgLy8gT3B0aW9uYWxseSByZW1vdmUgdGhlIHRvYXN0IGZyb20gdGhlIERPTSBhZnRlciBpdCBoaWRlc1xyXG4gICAgICAgIHRoaXMuI2NvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2hpZGRlbi5icy50b2FzdCcsICgpID0+IHtcclxuICAgICAgICAgICAgdG9hc3RFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy4jY29udGFpbmVyLmlubmVySFRNTCA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAjY3JlYXRlQ29udGFpbmVyKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHJlc3VsdC5pZCA9ICd0b2FzdC1jb250YWluZXInO1xyXG4gICAgICAgIHJlc3VsdC5jbGFzc05hbWUgPSBUb2FzdC5jb250YWluZXJDbGFzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChyZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogTW9kYWxcclxuICogU2hvdyBNb2RhbCBwcm9ncmFtbWF0aWNhbGx5XHJcbiAqIEBwYWNrYWdlIENvdG9udGlcclxuICogQGNvcHlyaWdodCAoYykgQ290b250aSBUZWFtXHJcbiAqXHJcbiAqIEBsaW5rIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzUuMy9jb21wb25lbnRzL21vZGFsL1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vZGFsIHtcclxuICAgIHRpdGxlID0gJyc7XHJcbiAgICBjb250ZW50ID0gJyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7KHtsYWJlbDogU3RyaW5nLCBvbkNsaWNrOiBmdW5jdGlvbiwgY2xvc2VPbkNsaWNrOiBib29sLCB0eXBlOiBzdHJpbmd9fHN0cmluZylbXXxudWxsfVxyXG4gICAgICovXHJcbiAgICBidXR0b25zID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFZlcnRpY2FsbHkgY2VudGVyZWRcclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBjZW50ZXJlZCA9IGZhbHNlO1xyXG5cclxuICAgIGRpYWxvZ0NsYXNzID0gJ21vZGFsLWRpYWxvZyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSB7RWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgI2VsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHsoe1xyXG4gICAgICogICAgbGFiZWw6IFN0cmluZyxcclxuICAgICAqICAgIG9uQ2xpY2s6IGZ1bmN0aW9ufHVuZGVmaW5lZCxcclxuICAgICAqICAgIGNsb3NlT25DbGljazogYm9vbHx1bmRlZmluZWQsXHJcbiAgICAgKiAgICB0eXBlOiBzdHJpbmd8dW5kZWZpbmVkLFxyXG4gICAgICogICAgYnRuVHlwZTogc3RyaW5nfHVuZGVmaW5lZFxyXG4gICAgICogIH18c3RyaW5nKVtdfG51bGx9IGJ1dHRvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29udGVudCwgdGl0bGUgPSAnJywgYnV0dG9ucyA9IG51bGwpIHtcclxuICAgICAgICBpZiAod2luZG93LmJvb3RzdHJhcCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Jvb3RzdHJhcCBpcyBub3QgZm91bmQuIEl0IGlzIHJlcXVpcmVkIGZvciB1c2UgXCJNb2RhbFwiIGNvbXBvbmVudCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBidXR0b25zO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgbGV0IGRpYWxvZ0NsYXNzID0gdGhpcy5kaWFsb2dDbGFzcztcclxuICAgICAgICBpZiAodGhpcy5jZW50ZXJlZCkge1xyXG4gICAgICAgICAgICBkaWFsb2dDbGFzcyArPSAnIG1vZGFsLWRpYWxvZy1jZW50ZXJlZCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtb2RhbEhUTUwgPSAnPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGVcIiBpZD1cIkNvdG9udGlEeW5hbWljTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgJ1xyXG4gICAgICAgICAgICAgICAgKyAnYXJpYS1sYWJlbGxlZGJ5PVwiQ290b250aUR5bmFtaWNNb2RhbExhYmVsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+J1xyXG4gICAgICAgICAgKyBgPGRpdiBjbGFzcz1cIiR7ZGlhbG9nQ2xhc3N9XCI+YFxyXG4gICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPidcclxuICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+J1xyXG4gICAgICAgICAgICAgICAgKyBgPGg1IGNsYXNzPVwibW9kYWwtdGl0bGVcIiBpZD1cIkNvdG9udGlEeW5hbWljTW9kYWxMYWJlbFwiPiR7dGhpcy50aXRsZX08L2g1PmBcclxuICAgICAgICAgICAgICAgICsgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLWNsb3NlXCIgZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48L2J1dHRvbj4nXHJcbiAgICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICAgICsgYDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+JHt0aGlzLmNvbnRlbnR9PC9kaXY+YFxyXG4gICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48L2Rpdj4nXHJcbiAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICArICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBtb2RhbFdyYXBwZXIuaW5uZXJIVE1MID0gbW9kYWxIVE1MO1xyXG4gICAgICAgIHRoaXMuI2VsZW1lbnQgPSBtb2RhbFdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcblxyXG4gICAgICAgIHRoaXMuI2FkZEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSBtb2RhbCB0byB0aGUgYm9keVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy4jZWxlbWVudCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgYW5kIHNob3cgdGhlIG1vZGFsXHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgYm9vdHN0cmFwLk1vZGFsKHRoaXMuI2VsZW1lbnQpO1xyXG4gICAgICAgIG1vZGFsLnNob3coKTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBtb2RhbCBmcm9tIHRoZSBET00gYWZ0ZXIgaXQgaXMgaGlkZGVuXHJcbiAgICAgICAgdGhpcy4jZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdoaWRkZW4uYnMubW9kYWwnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuI2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgI2FkZEJ1dHRvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuI2J1aWxkQnV0dG9ucygpO1xyXG5cclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gJycgfHwgYnV0dG9ucyA9PT0gW10pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy4jZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZm9vdGVyJyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYnV0dG9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGJ1dHRvbnM7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGJ1dHRvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MICs9IGJ1dHRvbjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgI2J1aWxkQnV0dG9ucygpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBsZXQgYnV0dG9ucyA9IHRoaXMuYnV0dG9ucztcclxuICAgICAgICBpZiAoYnV0dG9ucyA9PT0gW10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChidXR0b25zID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiIGRhdGEtYnMtZGlzbWlzcz1cIm1vZGFsXCI+Q2xvc2U8L2J1dHRvbj4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidXR0b25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gYnV0dG9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidXR0b25EYXRhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGJ1dHRvbkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLmxhYmVsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gYnV0dG9uRGF0YS5sYWJlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgYnV0dG9uRGF0YS5idG5UeXBlICE9PSB1bmRlZmluZWQgPyBidXR0b25EYXRhLmJ0blR5cGUgOiAnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkRhdGEudHlwZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bi0nICsgYnV0dG9uRGF0YS50eXBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRGF0YS5jbG9zZU9uQ2xpY2sgIT09IHVuZGVmaW5lZCAmJiBidXR0b25EYXRhLmNsb3NlT25DbGljayA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtYnMtZGlzbWlzcycsICdtb2RhbCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChidXR0b25EYXRhLm9uQ2xpY2sgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgYnV0dG9uRGF0YS5vbkNsaWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7cmV0dXJuIGJ1dHRvbkRhdGEub25DbGljayhldmVudCl9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChidXR0b24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufSIsImltcG9ydCB7U2VydmVyRXZlbnRzfSBmcm9tICcuL3NlcnZlckV2ZW50cy9TZXJ2ZXJFdmVudHMuanMnO1xyXG5pbXBvcnQge1RvYXN0fSBmcm9tIFwiLi9Ub2FzdFwiO1xyXG5pbXBvcnQge01vZGFsfSBmcm9tIFwiLi9Nb2RhbFwiO1xyXG5cclxuLyoqXHJcbiAqIEJhc2UgQ290b250aSBjbGFzc1xyXG4gKi9cclxuY2xhc3MgQ290b250aUFwcGxpY2F0aW9uXHJcbntcclxuICAgICNzZXZlckV2ZW50cyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgU2VydmVyIEV2ZW50cyBvYmplY3RcclxuICAgICAqIEByZXR1cm5zIHtTZXJ2ZXJFdmVudHN9XHJcbiAgICAgKi9cclxuICAgIGdldFNlcnZlckV2ZW50cygpIHtcclxuICAgICAgICBpZiAodGhpcy4jc2V2ZXJFdmVudHMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy4jc2V2ZXJFdmVudHMgPSBuZXcgU2VydmVyRXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNzZXZlckV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgQ29uZmlybSBkaWFsb2cgbW9kYWxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2tMYWJlbFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNhbmNlbExhYmVsXHJcbiAgICAgKiBAdG9kbyB0cmFuc2xhdGVkIGRlZmF1bHQgbGFiZWxzXHJcbiAgICAgKi9cclxuICAgIGNvbmZpcm0odGl0bGUsIGNvbnRlbnQsIGNhbGxiYWNrLCBva0xhYmVsID0gJ09rJywgY2FuY2VsTGFiZWwgPSAnQ2FuY2VsJykge1xyXG4gICAgICAgIHRoaXMubW9kYWwodGl0bGUsIGNvbnRlbnQsIFtcclxuICAgICAgICAgICAge2xhYmVsOiBva0xhYmVsLCBvbkNsaWNrOiAoZXZlbnQpID0+IHtyZXR1cm4gY2FsbGJhY2soZXZlbnQpfSwgdHlwZTogJ3ByaW1hcnknLCBjbG9zZU9uQ2xpY2s6IHRydWV9LFxyXG4gICAgICAgICAgICB7bGFiZWw6IGNhbmNlbExhYmVsLCBjbG9zZU9uQ2xpY2s6IHRydWUsIHR5cGU6ICdzZWNvbmRhcnknfVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBNb2RhbCBpbnN0YW5jZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxyXG4gICAgICogQHBhcmFtIHsoe1xyXG4gICAgICogICAgbGFiZWw6IFN0cmluZyxcclxuICAgICAqICAgIG9uQ2xpY2s6IGZ1bmN0aW9ufHVuZGVmaW5lZCxcclxuICAgICAqICAgIGNsb3NlT25DbGljazogYm9vbHx1bmRlZmluZWQsXHJcbiAgICAgKiAgICB0eXBlOiBzdHJpbmd8dW5kZWZpbmVkLFxyXG4gICAgICogICAgYnRuVHlwZTogc3RyaW5nfHVuZGVmaW5lZFxyXG4gICAgICogIH18c3RyaW5nKVtdfG51bGx9IGJ1dHRvbnNcclxuICAgICAqICBAcmV0dXJucyBNb2RhbFxyXG4gICAgICovXHJcbiAgICBnZXRNb2RhbChjb250ZW50LCB0aXRsZSA9ICcnLCBidXR0b25zPSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNb2RhbChjb250ZW50LCB0aXRsZSwgYnV0dG9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IE1vZGFsIHByb2dyYW1tYXRpY2FsbHlcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7KHtcclxuICAgICAqICAgIGxhYmVsOiBTdHJpbmcsXHJcbiAgICAgKiAgICBvbkNsaWNrOiBmdW5jdGlvbnx1bmRlZmluZWQsXHJcbiAgICAgKiAgICBjbG9zZU9uQ2xpY2s6IGJvb2x8dW5kZWZpbmVkLFxyXG4gICAgICogICAgdHlwZTogc3RyaW5nfHVuZGVmaW5lZCxcclxuICAgICAqICAgIGJ0blR5cGU6IHN0cmluZ3x1bmRlZmluZWRcclxuICAgICAqICB9fHN0cmluZylbXXxudWxsfSBidXR0b25zXHJcbiAgICAgKiAgQHJldHVybnMgTW9kYWxcclxuICAgICAqL1xyXG4gICAgbW9kYWwoY29udGVudCwgdGl0bGUgPSAnJywgYnV0dG9ucz0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gdGhpcy5nZXRNb2RhbChjb250ZW50LCB0aXRsZSwgYnV0dG9ucyk7XHJcbiAgICAgICAgbW9kYWwuc2hvdygpO1xyXG4gICAgICAgIHJldHVybiBtb2RhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgVG9hc3RzIHByb2dyYW1tYXRpY2FsbHlcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICogQHJldHVybnMgVG9hc3RcclxuICAgICAqL1xyXG4gICAgZ2V0VG9hc3QobWVzc2FnZSwgdGl0bGUgPSAnJywgaGludCA9ICcnLCB0eXBlID0gJycpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRvYXN0KG1lc3NhZ2UsIHRpdGxlLCBoaW50LCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgVG9hc3RzIHByb2dyYW1tYXRpY2FsbHlcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoaW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5XHJcbiAgICAgKi9cclxuICAgIHRvYXN0KG1lc3NhZ2UsIHRpdGxlID0gJycsIGhpbnQgPSAnJywgdHlwZSA9ICcnLCBkZWxheSA9IDUwMDApIHtcclxuICAgICAgICBjb25zdCB0b2FzdCA9IHRoaXMuZ2V0VG9hc3QobWVzc2FnZSwgdGl0bGUsIGhpbnQsIHR5cGUpO1xyXG5cclxuICAgICAgICBpZiAoZGVsYXkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdG9hc3QuZGVsYXkgPSBkZWxheVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdG9hc3Quc2hvdygpO1xyXG4gICAgICAgIHJldHVybiB0b2FzdDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGRhdGEgZnJvbSAvaW5kZXgucGhwP249bWFpbiZhPWdldFxyXG4gICAgICogQ2FuIGJlIHVzZWZ1bCwgZm9yIGV4YW1wbGUgd2hlbiBpdCBpcyBuZWVkZWQgdG8gbG9hZCBzb21lIGR5bmFtaWMgY29udGVudCB0byBjYWNoZWQgcGFnZVxyXG4gICAgICpcclxuICAgICAqIEV4YW1wbGU6XHJcbiAgICAgKiBjb3QubG9hZERhdGEoWydjYXB0Y2hhJywgJ3gnXSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICogICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAqIH0pO1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB3aGF0IEFycmF5IG9yIHN0cmluZy4gRGF0YSB0byBsb2FkLiBGb3IgZXhhbXBsZSwgWydjYXB0Y2hhJywgJ3gnXSAoeCAtIGFudGkgWFNTIHBhcmFtZXRlciB2YWx1ZSlcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHt9Pn1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZERhdGEod2hhdCkge1xyXG4gICAgICAgIGlmICghd2hhdCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5sb2FkZWREYXRhID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZGF0YVRvTG9hZCA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHdoYXQgPT09ICdzdHJpbmcnIHx8IHdoYXQgaW5zdGFuY2VvZiBTdHJpbmcpIHtcclxuICAgICAgICAgICAgd2hhdCA9IFt3aGF0XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2Ygd2hhdCkge1xyXG4gICAgICAgICAgICBpZiAoIShpdGVtIGluIHRoaXMubG9hZGVkRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFUb0xvYWQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRhdGFUb0xvYWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBAdG9kbyBjaGFuZ2UgdG8gc3lzdGVtIGNvbnRyb2xsZXIgd2hlbiBpdCB3aWxsIGJlIGltcGxlbWVudGVkXHJcbiAgICAgICAgICAgIGxldCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtuOiAnbWFpbicsIGE6ICdnZXQnfSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhVG9Mb2FkLmZvckVhY2goKGl0ZW0sIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgnZGF0YVsnICsgaW5kZXggKyAnXScsIGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgnX2FqYXgnLCAxKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdpbmRleC5waHA/JyArIHBhcmFtcy50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlc3BvbnNlRGF0YS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZERhdGFba2V5XSA9IHJlc3BvbnNlRGF0YS5kYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBIVFRQIGVycm9yXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IGVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHdoYXQpIHtcclxuICAgICAgICAgICAgaWYgKChpdGVtIGluIHRoaXMubG9hZGVkRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpdGVtXSA9IHRoaXMubG9hZGVkRGF0YVtpdGVtXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgY2FwdGNoYSB2aWEgYWpheC4gVXNlZCBvbiBjYWNoZWQgcGFnZXMuXHJcbiAgICAgKi9cclxuICAgIGxvYWRDYXB0Y2hhKCkge1xyXG4gICAgICAgIHRoaXMubG9hZERhdGEoWydjYXB0Y2hhJywgJ3gnXSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY2FwdGNoYUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcHRjaGEtcGxhY2UtaG9sZGVyJyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgY2FwdGNoYUVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHJlc3VsdC5jYXB0Y2hhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlU2NyaXB0RWxlbWVudHMoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NhcHRjaGEtcGxhY2UtaG9sZGVyJywgJ2xvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2FwdGNoYScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBlbGVtZW50LmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3JtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlucHV0WCA9IGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImhpZGRlblwiXVtuYW1lPVwieFwiXScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRYLnNldEF0dHJpYnV0ZSgndmFsdWUnLCByZXN1bHQueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB5b3UgYXBwZW5kIDxzY3JpcHQ+IHRhZ3MgdG8gdGhlIGVsZW1lbnRzIG9mIHRoZSBmaW5pc2hlZCBET00gZG9jdW1lbnQsIHRoZXkgd2lsbCBub3QgYmUgZXhlY3V0ZWQgYXV0b21hdGljYWxseS5cclxuICAgICAqIFRoZSBtZXRob2QgZXhlY3V0ZXMgPHNjcmlwdD4gc2NyaXB0cyBuZXN0ZWQgaW4gdGhlIHNwZWNpZmllZCBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyRWxlbWVudCBOb2RlXHJcbiAgICAgKi9cclxuICAgIGV4ZWN1dGVTY3JpcHRFbGVtZW50cyhjb250YWluZXJFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2NyaXB0RWxlbWVudHMgPSBjb250YWluZXJFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpO1xyXG5cclxuICAgICAgICBBcnJheS5mcm9tKHNjcmlwdEVsZW1lbnRzKS5mb3JFYWNoKChzY3JpcHRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNsb25lZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICAgICAgQXJyYXkuZnJvbShzY3JpcHRFbGVtZW50LmF0dHJpYnV0ZXMpLmZvckVhY2goKGF0dHJpYnV0ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xvbmVkRWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLm5hbWUsIGF0dHJpYnV0ZS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjbG9uZWRFbGVtZW50LnRleHQgPSBzY3JpcHRFbGVtZW50LnRleHQ7XHJcbiAgICAgICAgICAgIHNjcmlwdEVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVkRWxlbWVudCwgc2NyaXB0RWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5jb3QgPSBuZXcgQ290b250aUFwcGxpY2F0aW9uKCk7XHJcbiJdfQ==
