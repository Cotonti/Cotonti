/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
function encodeURIfix(e){return encodeURI(decodeURI(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")}function getBaseHref(){var e=document.getElementsByTagName("base")[0].href;return null==e?"/":e}function popup(e,a,t){window.open(getBaseHref()+"index.php?o="+e,"","toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width="+a+",height="+t+",left=32,top=16")}function pfs(e,a,t,n){window.open(getBaseHref()+"index.php?e=pfs&userid="+e+"&c1="+a+"&c2="+t+"&parser="+n,"PFS","status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16")}function redirect(e){location.href=e.options[e.selectedIndex].value}function toggleblock(e){var a=document.getElementById(e);return"none"==a.style.display?a.style.display="":a.style.display="none",!1}function toggleAll(e){var a=document.querySelectorAll('[id^="blk_"]');for(i=0;i<a.length;i++)"hide"==e?a[i].style.display="none":"show"==e&&(a[i].style.display="table-row-group");return!1}function insertText(e,a,t){var n=null;e||(e=document);e:for(var o=0;o<e.forms.length;o++)for(var r=0;r<e.forms[o].elements.length;r++)if(e.forms[o].elements[r].name==a){n=e.forms[o].elements[r];break e}if(!n)return!1;if(e.selection)n.focus(),e.selection.createRange().text=t;else if(n.selectionStart||0==n.selectionStart){var i=n.selectionStart,s=n.selectionEnd;n.value=n.value.substring(0,i)+t+n.value.substring(s,n.value.length)}else n.value+=t;return!0}window.cot=new class{async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let a=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let t of e)t in this.loadedData||a.push(t);if(a.length>0){let t=new URLSearchParams({n:"main",a:"get"});a.forEach(((e,a,n)=>{t.append("data["+a+"]",e)})),t.append("_ajax",1);try{let e=await fetch("index.php?"+t.toString());if(e.ok){const a=await e.json();if(a.success)for(const e in a.data)this.loadedData[e]=a.data[e]}}catch(e){}}let t={};for(let a of e)a in this.loadedData&&(t[a]=this.loadedData[a]);return t}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let a=document.querySelectorAll(".captcha-place-holder");for(let t of a){t.innerHTML=e.captcha,this.executeScriptElements(t),t.classList.remove("captcha-place-holder","loading"),t.classList.add("captcha");const a=t.closest("form");if(null!==a){let t=a.querySelector('input[type="hidden"][name="x"]');null!==t&&t.setAttribute("value",e.x)}}}))}executeScriptElements(e){const a=e.querySelectorAll("script");Array.from(a).forEach((e=>{const a=document.createElement("script");Array.from(e.attributes).forEach((e=>{a.setAttribute(e.name,e.value)})),a.text=e.text,e.parentNode.replaceChild(a,e)}))}};var ajaxErrorHandlers=new Array,ajaxSuccessHandlers=new Array,ajaxEnabled=!1;if("undefined"!=typeof jQuery)var ajaxCurrentBase=location.href.replace($("base").eq(0).attr("href"),"").replace(/\?.*$/,"").replace(/#.*$/,"");var ajaxUsed=!1,ajaxError=!1;function ajaxSend(e){var a=e.method?e.method.toUpperCase():"GET",t=e.data||"",n=e.url||$("#"+e.formId).attr("action");if("POST"===a)t+="&"+$("#"+e.formId).serialize();else if(e.formId){var o=n.indexOf("?")>0?"&":"?";n+=o+$("#"+e.formId).serialize()}return $.ajax({type:a,url:encodeURIfix(n),data:t,beforeSend:function(){e.nonshowloading||$("#"+e.divId).append('<span style="position:absolute; left:'+($("#"+e.divId).width()/2-110)+"px;top:"+($("#"+e.divId).height()/2-9)+'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css("position","relative")},success:function(a){e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(a):$("#"+e.divId).hide().html(a).fadeIn(500);for(var t=0;t<ajaxSuccessHandlers.length;t++)ajaxSuccessHandlers[t].func?ajaxSuccessHandlers[t].func(a):ajaxSuccessHandlers[t](a)},error:function(a){if(e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(a):$("#"+e.divId).hide().html(a).fadeIn(500),ajaxErrorHandlers.length>0)for(var t=0;t<ajaxErrorHandlers.length;t++)ajaxErrorHandlers[t].func?ajaxErrorHandlers[t].func(a):ajaxErrorHandlers[t](a);else alert("AJAX error: "+a),ajaxError=!0}}),!1}function ajaxPageLoad(e){""!==e&&e.replace(/^#/,"");var a=e.match(/^get(-.*?)?;(.*)$/);if(a){var t=a[2].indexOf(";")>0?a[2].replace(";","?"):ajaxCurrentBase+"?"+decodeURIComponent(a[2]);return ajaxUsed=!0,ajaxSend({method:"GET",url:t,divId:a[1]?a[1].substr(1):"ajaxBlock"})}return""!==e||!ajaxUsed||ajaxSend({url:location.href.replace(/#.*$/,""),divId:"ajaxBlock"})}function ajaxFormLoad(e,a){var t=e.match(/^(get|post)(-.*?)?;(.*)$/);if(t){var n=t[3].indexOf(";")>0?t[3].replace(";","?"):ajaxCurrentBase+"?"+t[3];return ajaxUsed=!0,ajaxSend({method:t[1].toUpperCase(),url:n,divId:t[2]?t[2].substr(1):"ajaxBlock",formId:a})}return!0}function ajaxMakeHash(e,a,t){var n,o,r="post"==t?"post":"get",i="?",s=!!a&&a.match(/(get|post)(-[^ ;]+)?(;\S*)?/);return s&&(r=s[1],s[2]&&(r+=s[2]),s[3]&&(e=s[3].substr(1),i=";")),r+=";",e.indexOf(i)>0?(n=e.substr(0,e.indexOf(i)),o=e.substr(e.indexOf(i)+1),t&&"post"!=t&&(o+="&"+t)):(n=e,o="",t&&"post"!=t&&(o+=i+t)),r+=n==ajaxCurrentBase?o:n+";"+o}function bindHandlers(){("#comments"==location.hash||location.hash.match(/#c\d+/))&&$(".comments").css("display",""),$(".comments_link").click((function(){"none"==$(".comments").css("display")?$(".comments").css("display",""):$(".comments").css("display","none")})),location.href.match(/#comments/)&&$(".comments").css("display",""),ajaxEnabled&&($("body").on("submit","form.ajax",(function(){return"POST"==$(this).attr("method").toUpperCase()?ajaxFormLoad(ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),"post"),$(this).attr("id")):window.location.hash=ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),$(this).serialize()),ajaxError})),$("body").on("click","a.ajax",(function(){return window.location.hash=ajaxMakeHash($(this).attr("href").replace(/#.*$/,""),$(this).attr("rel")),ajaxError})),$("body").on("click","a.confirmLink",(function(){return!$(this).attr("href").match(/message.+920/i)||($("#confirmBox")&&$("#confirmBox").remove(),$("body").prepend('<div id="confirmBox" class="jqmWindow"></div>'),$("#confirmBox").jqm({ajax:$(this).attr("href"),modal:!0,onLoad:function(){$("#confirmBox").css("margin-left","-"+$("#confirmBox").width()/2+"px"),$("#confirmBox").css("margin-top","-"+$("#confirmBox").height()/2+"px")}}),$("#confirmBox").jqmShow(),!1)})),$(window).on("hashchange",(function(){ajaxPageLoad(window.location.hash.replace(/^#/,""))})),$("body").on("click","a#confirmNo",(function(){return!$("#confirmBox").is(".jqmWindow")||($("#confirmBox").jqmHide(),$("#confirmBox").remove(),!1)})))}"undefined"!=typeof jQuery&&$(document).ready((function(){ajaxEnabled&&""!=window.location.hash&&ajaxPageLoad(window.location.hash.replace(/^#/,"")),bindHandlers()})),window.name="main";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJ3ZWJwYWNrOi8vY290b250aS9zcmMvQ290b250aUFwcGxpY2F0aW9uLmpzIl0sIm5hbWVzIjpbImVuY29kZVVSSWZpeCIsInN0ciIsImVuY29kZVVSSSIsImRlY29kZVVSSSIsInJlcGxhY2UiLCJnZXRCYXNlSHJlZiIsImhyZWYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicG9wdXAiLCJjb2RlIiwidyIsImgiLCJ3aW5kb3ciLCJvcGVuIiwicGZzIiwiaWQiLCJjMSIsImMyIiwicGFyc2VyIiwicmVkaXJlY3QiLCJ1cmwiLCJsb2NhdGlvbiIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwidmFsdWUiLCJ0b2dnbGVibG9jayIsImJsIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJ0b2dnbGVBbGwiLCJhY3Rpb24iLCJibGtzIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJpbnNlcnRUZXh0IiwiZG9jT2JqIiwiZmllbGROYW1lIiwiZmllbGQiLCJmaW5kRmllbGQiLCJmb3JtcyIsImoiLCJlbGVtZW50cyIsIm5hbWUiLCJzZWxlY3Rpb24iLCJmb2N1cyIsImNyZWF0ZVJhbmdlIiwidGV4dCIsInNlbGVjdGlvblN0YXJ0Iiwic3RhcnRQb3MiLCJlbmRQb3MiLCJzZWxlY3Rpb25FbmQiLCJzdWJzdHJpbmciLCJjb3QiLCJsb2FkRGF0YSIsIndoYXQiLCJ0aGlzIiwibG9hZGVkRGF0YSIsImRhdGFUb0xvYWQiLCJTdHJpbmciLCJpdGVtIiwicHVzaCIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIm4iLCJhIiwiZm9yRWFjaCIsImluZGV4IiwiYXJyYXkiLCJhcHBlbmQiLCJyZXNwb25zZSIsImZldGNoIiwidG9TdHJpbmciLCJvayIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJzdWNjZXNzIiwia2V5IiwiZGF0YSIsImVycm9yIiwicmVzdWx0IiwibG9hZENhcHRjaGEiLCJ0aGVuIiwiY2FwdGNoYUVsZW1lbnRzIiwiZWxlbWVudCIsImlubmVySFRNTCIsImNhcHRjaGEiLCJleGVjdXRlU2NyaXB0RWxlbWVudHMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJmb3JtIiwiY2xvc2VzdCIsImlucHV0WCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRBdHRyaWJ1dGUiLCJ4IiwiY29udGFpbmVyRWxlbWVudCIsInNjcmlwdEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwic2NyaXB0RWxlbWVudCIsImNsb25lZEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJhamF4RXJyb3JIYW5kbGVycyIsImFqYXhTdWNjZXNzSGFuZGxlcnMiLCJhamF4RW5hYmxlZCIsImpRdWVyeSIsImFqYXhDdXJyZW50QmFzZSIsIiQiLCJlcSIsImF0dHIiLCJhamF4VXNlZCIsImFqYXhFcnJvciIsImFqYXhTZW5kIiwic2V0dGluZ3MiLCJtZXRob2QiLCJ0b1VwcGVyQ2FzZSIsImZvcm1JZCIsInNlcmlhbGl6ZSIsInNlcCIsImluZGV4T2YiLCJhamF4IiwidHlwZSIsImJlZm9yZVNlbmQiLCJub25zaG93bG9hZGluZyIsImRpdklkIiwid2lkdGgiLCJoZWlnaHQiLCJjc3MiLCJtc2ciLCJub25zaG93ZmFkZWluIiwiaHRtbCIsImhpZGUiLCJmYWRlSW4iLCJmdW5jIiwiYWxlcnQiLCJhamF4UGFnZUxvYWQiLCJoYXNoIiwibSIsIm1hdGNoIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic3Vic3RyIiwiYWpheEZvcm1Mb2FkIiwiYWpheE1ha2VIYXNoIiwicmVsIiwiZm9ybURhdGEiLCJocmVmQmFzZSIsImJpbmRIYW5kbGVycyIsImNsaWNrIiwib24iLCJwcmVwZW5kIiwianFtIiwibW9kYWwiLCJvbkxvYWQiLCJqcW1TaG93IiwiaXMiLCJqcW1IaWRlIiwicmVhZHkiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsU0FBQUEs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SCxNQUNBRCxhQUFBbEksT0FBQVMsU0FBQTBILEtBQUE1SSxRQUFBLFVBSUFzSixjQUNBLElBR0E3SSxPQUFBZ0MsS0FBQSIsImZpbGUiOiJiYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGVuY29kZVVSSWZpeChzdHIpIHtcclxuXHQvLyB0byBwcmV2ZW50IHR3aWNlIGVuY29kaW5nXHJcblx0Ly8gYW5kIGZpeCAnWycsJ10nIHNpZ25zIHRvIGZvbGxvdyBSRkMzOTg2IChzZWN0aW9uLTMuMi4yKVxyXG5cdHJldHVybiBlbmNvZGVVUkkoZGVjb2RlVVJJKHN0cikpLnJlcGxhY2UoLyU1Qi9nLCAnWycpLnJlcGxhY2UoLyU1RC9nLCAnXScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCYXNlSHJlZigpIHtcclxuXHR2YXIgaHJlZiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdiYXNlJylbMF0uaHJlZjtcclxuXHRpZiAoaHJlZiA9PSBudWxsKSB7XHJcblx0XHRyZXR1cm4gJy8nO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm4gaHJlZjtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvcHVwKGNvZGUsIHcsIGgpe1xyXG4gICAgd2luZG93Lm9wZW4oZ2V0QmFzZUhyZWYoKSArICdpbmRleC5waHA/bz0nICsgY29kZSwgJycsICd0b29sYmFyPTAsbG9jYXRpb249MCxkaXJlY3Rvcmllcz0wLG1lbnVCYXI9MCxyZXNpemFibGU9MCxzY3JvbGxiYXJzPXllcyx3aWR0aD0nICsgdyArICcsaGVpZ2h0PScgKyBoICsgJyxsZWZ0PTMyLHRvcD0xNicpO1xyXG59XHJcblxyXG4vKipcclxuICogQHRvZG8gbW92ZSB0byBwZnMgbW9kdWxlXHJcbiAqL1xyXG5mdW5jdGlvbiBwZnMoaWQsIGMxLCBjMiwgcGFyc2VyKXtcclxuICAgIHdpbmRvdy5vcGVuKFxyXG5cdFx0Z2V0QmFzZUhyZWYoKSArICdpbmRleC5waHA/ZT1wZnMmdXNlcmlkPScgKyBpZCArICcmYzE9JyArIGMxICsgJyZjMj0nICsgYzIgKyAnJnBhcnNlcj0nICsgcGFyc2VyLFxyXG5cdFx0J1BGUycsXHJcblx0XHQnc3RhdHVzPTEsIHRvb2xiYXI9MCxsb2NhdGlvbj0wLGRpcmVjdG9yaWVzPTAsbWVudUJhcj0wLHJlc2l6YWJsZT0xLHNjcm9sbGJhcnM9eWVzLHdpZHRoPTc1NCxoZWlnaHQ9NTEyLGxlZnQ9MzIsdG9wPTE2J1xyXG5cdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZGlyZWN0KHVybCl7XHJcbiAgICBsb2NhdGlvbi5ocmVmID0gdXJsLm9wdGlvbnNbdXJsLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVibG9jayhpZCl7XHJcbiAgICB2YXIgYmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICBpZiAoYmwuc3R5bGUuZGlzcGxheSA9PSAnbm9uZScpIHtcclxuICAgICAgICBibC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBibC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQWxsKGFjdGlvbikge1xyXG5cdHZhciBibGtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2lkXj1cImJsa19cIl0nKTtcclxuXHRmb3IgKGkgPSAwOyBpIDwgYmxrcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKGFjdGlvbiA9PSAnaGlkZScpIHtcclxuXHRcdFx0Ymxrc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0fSBlbHNlIGlmIChhY3Rpb24gPT0gJ3Nob3cnKSB7XHJcblx0XHRcdGJsa3NbaV0uc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3ctZ3JvdXAnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8vIEluc2VydHMgdGV4dCBpbnRvIHRleHRhcmVhIGF0IGN1cnNvciBwb3NpdGlvblxyXG5mdW5jdGlvbiBpbnNlcnRUZXh0KGRvY09iaiwgZmllbGROYW1lLCB2YWx1ZSkge1xyXG5cdHZhciBmaWVsZCA9IG51bGw7XHJcblx0aWYgKCFkb2NPYmopIHtcclxuXHRcdGRvY09iaiA9IGRvY3VtZW50O1xyXG5cdH1cclxuXHQvLyBGaW5kIHRoZSBmaWVsZCBpbiB0aGUgZG9jT2JqXHJcblx0ZmluZEZpZWxkOlxyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZG9jT2JqLmZvcm1zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvY09iai5mb3Jtc1tpXS5lbGVtZW50cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRpZiAoZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzW2pdLm5hbWUgPT0gZmllbGROYW1lKSB7XHJcblx0XHRcdFx0ZmllbGQgPSBkb2NPYmouZm9ybXNbaV0uZWxlbWVudHNbal07XHJcblx0XHRcdFx0YnJlYWsgZmluZEZpZWxkO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmICghZmllbGQpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIEluc2VydCB0aGUgdGV4dFxyXG5cdGlmIChkb2NPYmouc2VsZWN0aW9uKSB7XHJcblx0XHQvLyBNU0lFIGFuZCBPcGVyYVxyXG5cdFx0ZmllbGQuZm9jdXMoKTtcclxuXHRcdHZhciBzZWwgPSBkb2NPYmouc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XHJcblx0XHRzZWwudGV4dCA9IHZhbHVlO1xyXG5cdH0gZWxzZSBpZiAoZmllbGQuc2VsZWN0aW9uU3RhcnQgfHwgZmllbGQuc2VsZWN0aW9uU3RhcnQgPT0gMCkge1xyXG5cdFx0Ly8gTW96aWxsYVxyXG5cdFx0dmFyIHN0YXJ0UG9zID0gZmllbGQuc2VsZWN0aW9uU3RhcnQ7XHJcblx0XHR2YXIgZW5kUG9zID0gZmllbGQuc2VsZWN0aW9uRW5kO1xyXG5cdFx0ZmllbGQudmFsdWUgPSBmaWVsZC52YWx1ZS5zdWJzdHJpbmcoMCwgc3RhcnRQb3MpICsgdmFsdWUgKyBmaWVsZC52YWx1ZS5zdWJzdHJpbmcoZW5kUG9zLCBmaWVsZC52YWx1ZS5sZW5ndGgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRmaWVsZC52YWx1ZSArPSB2YWx1ZTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8vIEFycmF5IG9mIGFqYXggZXJyb3IgaGFuZGxlcnNcclxuLy8gRXhhbXBsZSBvZiB1c2U6XHJcbi8vIGFqYXhFcnJvckhhbmRsZXJzLnB1c2goe2Z1bmM6IG15RXJyb3JIYW5kbGVyfSk7XHJcbi8vIGFqYXhTdWNjZXNzSGFuZGxlcnMucHVzaCh7ZnVuYzogbXlTdWNjZXNzSGFuZGxlcn0pO1xyXG52YXIgYWpheEVycm9ySGFuZGxlcnMgPSBuZXcgQXJyYXkoKTtcclxudmFyIGFqYXhTdWNjZXNzSGFuZGxlcnMgPSBuZXcgQXJyYXkoKTtcclxuLy8gQUpBWCBlbmFibGVtZW50IGRlZmF1bHRzIHRvIGZhbHNlXHJcbnZhciBhamF4RW5hYmxlZCA9IGZhbHNlO1xyXG4vLyBSZXF1aXJlZCB0byBjYWxjdWxhdGUgcGF0aHNcclxuaWYgKHR5cGVvZiBqUXVlcnkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuXHR2YXIgYWpheEN1cnJlbnRCYXNlID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCQoJ2Jhc2UnKS5lcSgwKS5hdHRyKCdocmVmJyksICcnKS5yZXBsYWNlKC9cXD8uKiQvLCAnJykucmVwbGFjZSgvIy4qJC8sICcnKTtcclxufVxyXG4vLyBUaGlzIGZsYWcgaW5kaWNhdGVzIHRoYXQgQUpBWCtoaXN0b3J5IGhhcyBiZWVuIHVzZWQgb24gdGhpcyBwYWdlXHJcbi8vIEl0IG1lYW5zIHRoYXQgXCIjXCIgb3IgaG9tZSBsaW5rIHNob3VsZCBiZSBsb2FkZWQgdmlhIGFqYXggdG9vXHJcbnZhciBhamF4VXNlZCA9IGZhbHNlO1xyXG4vLyBHbG9iYWwgZmxhZyB0byBsZXQgZXZlcnlib2R5IGtub3cgdGhhdCBBSkFYIGhhcyBmYWlsZWRcclxudmFyIGFqYXhFcnJvciA9IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIEFKQVggaGVscGVyIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7aGFzaH0gc2V0dGluZ3MgQSBoYXNodGFibGUgd2l0aCBzZXR0aW5nc1xyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheFNlbmQoc2V0dGluZ3MpIHtcclxuXHR2YXIgbWV0aG9kID0gc2V0dGluZ3MubWV0aG9kID8gc2V0dGluZ3MubWV0aG9kLnRvVXBwZXJDYXNlKCkgOiAnR0VUJztcclxuXHR2YXIgZGF0YSA9IHNldHRpbmdzLmRhdGEgfHwgJyc7XHJcblx0dmFyIHVybCA9IHNldHRpbmdzLnVybCB8fCAkKCcjJyArIHNldHRpbmdzLmZvcm1JZCkuYXR0cignYWN0aW9uJyk7XHJcblx0aWYgKG1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcblx0XHRkYXRhICs9ICcmJyArICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5zZXJpYWxpemUoKTtcclxuXHR9IGVsc2UgaWYgKHNldHRpbmdzLmZvcm1JZCkge1xyXG5cdFx0dmFyIHNlcCA9IHVybC5pbmRleE9mKCc/JykgPiAwID8gJyYnIDogJz8nO1xyXG5cdFx0dXJsICs9IHNlcCArICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5zZXJpYWxpemUoKTtcclxuXHR9XHJcblx0JC5hamF4KHtcclxuXHRcdHR5cGU6IG1ldGhvZCxcclxuXHRcdHVybDogZW5jb2RlVVJJZml4KHVybCksXHJcblx0XHRkYXRhOiBkYXRhLFxyXG5cdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKVxyXG5cdFx0XHRcdFx0LmFwcGVuZCgnPHNwYW4gc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDonICsgKCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLndpZHRoKCkvMiAtIDExMCkgKyAncHg7dG9wOicgKyAoJCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGVpZ2h0KCkvMiAtIDkpICsgJ3B4O1wiIGNsYXNzPVwibG9hZGluZ1wiIGlkPVwibG9hZGluZ1wiPjxpbWcgc3JjPVwiLi9pbWFnZXMvc3Bpbm5lci5naWZcIiBhbHQ9XCJsb2FkaW5nXCIvPjwvc3Bhbj4nKS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRzdWNjZXNzOiBmdW5jdGlvbihtc2cpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyNsb2FkaW5nJykucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93ZmFkZWluKSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaGlkZSgpLmh0bWwobXNnKS5mYWRlSW4oNTAwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5odG1sKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhamF4U3VjY2Vzc0hhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYoYWpheFN1Y2Nlc3NIYW5kbGVyc1tpXS5mdW5jKVxyXG5cdFx0XHRcdFx0YWpheFN1Y2Nlc3NIYW5kbGVyc1tpXS5mdW5jKG1zZyk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0YWpheFN1Y2Nlc3NIYW5kbGVyc1tpXShtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0ZXJyb3I6IGZ1bmN0aW9uKG1zZykge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnI2xvYWRpbmcnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dmYWRlaW4pIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oaWRlKCkuaHRtbChtc2cpLmZhZGVJbig1MDApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmh0bWwobXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoYWpheEVycm9ySGFuZGxlcnMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYWpheEVycm9ySGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChhamF4RXJyb3JIYW5kbGVyc1tpXS5mdW5jKSB7XHJcblx0XHRcdFx0XHRcdGFqYXhFcnJvckhhbmRsZXJzW2ldLmZ1bmMobXNnKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGFqYXhFcnJvckhhbmRsZXJzW2ldKG1zZyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFsZXJ0KCdBSkFYIGVycm9yOiAnICsgbXNnKTtcclxuXHRcdFx0XHRhamF4RXJyb3IgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogQUpBWCBzdWJwYWdlIGxvYWRlciB3aXRoIGhpc3Rvcnkgc3VwcG9ydFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBBIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhQYWdlTG9hZChoYXNoKSB7XHJcbiAgICBpZiAoaGFzaCAhPT0gJycpIHtcclxuXHRcdGhhc2gucmVwbGFjZSgvXiMvLCAnJyk7XHJcblx0fVxyXG5cdHZhciBtID0gaGFzaC5tYXRjaCgvXmdldCgtLio/KT87KC4qKSQvKTtcclxuXHRpZiAobSkge1xyXG5cdFx0Ly8gYWpheCBib29rbWFya1xyXG4gICAgICAgIHZhciB1cmwgPSBtWzJdLmluZGV4T2YoJzsnKSA+IDAgPyBtWzJdLnJlcGxhY2UoJzsnLCAnPycpIDogYWpheEN1cnJlbnRCYXNlICsgJz8nICsgZGVjb2RlVVJJQ29tcG9uZW50KG1bMl0pO1xyXG5cdFx0YWpheFVzZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIGFqYXhTZW5kKHtcclxuXHRcdFx0bWV0aG9kOiAnR0VUJyxcclxuXHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdGRpdklkOiBtWzFdID8gbVsxXS5zdWJzdHIoMSkgOiAnYWpheEJsb2NrJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIGlmIChoYXNoID09PSAnJyAmJiBhamF4VXNlZCkge1xyXG5cdFx0Ly8gYWpheCBob21lXHJcblx0XHRyZXR1cm4gYWpheFNlbmQgKHtcclxuXHRcdFx0dXJsOiBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKiQvLCAnJyksXHJcblx0XHRcdGRpdklkOiAnYWpheEJsb2NrJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQUpBWCBzdWJmb3JtIGxvYWRlciB3aXRob3V0IGhpc3RvcnkgdHJhY2tpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggQSBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtSWQgVGFyZ2V0IGZvcm0gaWQgYXR0cmlidXRlXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4Rm9ybUxvYWQoaGFzaCwgZm9ybUlkKSB7XHJcblx0dmFyIG0gPSBoYXNoLm1hdGNoKC9eKGdldHxwb3N0KSgtLio/KT87KC4qKSQvKTtcclxuXHRpZiAobSkge1xyXG5cdFx0Ly8gYWpheCBib29rbWFya1xyXG5cdFx0dmFyIHVybCA9IG1bM10uaW5kZXhPZignOycpID4gMCA/IG1bM10ucmVwbGFjZSgnOycsICc/JykgOiBhamF4Q3VycmVudEJhc2UgKyAnPycgKyBtWzNdO1xyXG5cdFx0YWpheFVzZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIGFqYXhTZW5kKHtcclxuXHRcdFx0bWV0aG9kOiBtWzFdLnRvVXBwZXJDYXNlKCksXHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRkaXZJZDogbVsyXSA/IG1bMl0uc3Vic3RyKDEpIDogJ2FqYXhCbG9jaycsXHJcblx0XHRcdGZvcm1JZDogZm9ybUlkXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RzIGFqYXhhYmxlIGhhc2ggc3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBocmVmIExpbmsgaHJlZiBvciBmb3JtIGFjdGlvbiBhdHRyaWJ1dGVcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlbCBBbiBhdHRyaWJ1dGUgdmFsdWUgcG9zc2libHkgY29udGFpbmluZyBhIGhhc2ggYWRkcmVzc1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9ybURhdGEgSXMgcGFzc2VkIGZvciBmb3JtcyBvbmx5LCBpcyAncG9zdCcgZm9yIFBPU1QgZm9ybXNcclxuICogb3Igc2VyaWFsaXplZCBmb3JtIGRhdGEgZm9yIEdFVCBmb3Jtc1xyXG4gKiBAcmV0dXJuIEEgdmFsaWQgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAdHlwZSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhNYWtlSGFzaChocmVmLCByZWwsIGZvcm1EYXRhKSB7XHJcblx0dmFyIGhhc2ggPSAoZm9ybURhdGEgPT0gJ3Bvc3QnKSA/ICdwb3N0JyA6ICdnZXQnO1xyXG5cdHZhciBocmVmQmFzZSwgcGFyYW1zO1xyXG5cdHZhciBzZXAgPSAnPyc7XHJcblx0dmFyIG0gPSByZWwgPyByZWwubWF0Y2goLyhnZXR8cG9zdCkoLVteIDtdKyk/KDtcXFMqKT8vKSA6IGZhbHNlO1xyXG5cdGlmIChtKSB7XHJcblx0XHRoYXNoID0gbVsxXTtcclxuXHRcdGlmIChtWzJdKSB7XHJcblx0XHRcdGhhc2ggKz0gbVsyXTtcclxuXHRcdH1cclxuXHRcdGlmIChtWzNdKSB7XHJcblx0XHRcdGhyZWYgPSBtWzNdLnN1YnN0cigxKTtcclxuXHRcdFx0c2VwICA9ICc7JztcclxuXHRcdH1cclxuXHR9XHJcblx0aGFzaCArPSAnOydcclxuXHRpZiAoaHJlZi5pbmRleE9mKHNlcCkgPiAwKSB7XHJcblx0XHRocmVmQmFzZSA9IGhyZWYuc3Vic3RyKDAsIGhyZWYuaW5kZXhPZihzZXApKTtcclxuXHRcdHBhcmFtcyA9IGhyZWYuc3Vic3RyKGhyZWYuaW5kZXhPZihzZXApICsgMSk7XHJcblx0XHRpZiAoZm9ybURhdGEgJiYgZm9ybURhdGEgIT0gJ3Bvc3QnKSB7XHJcblx0XHRcdHBhcmFtcyArPSAnJicgKyBmb3JtRGF0YTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0aHJlZkJhc2UgPSBocmVmO1xyXG5cdFx0cGFyYW1zID0gJyc7XHJcblx0XHRpZiAoZm9ybURhdGEgJiYgZm9ybURhdGEgIT0gJ3Bvc3QnKSB7XHJcblx0XHRcdHBhcmFtcyArPSBzZXAgKyBmb3JtRGF0YTtcclxuXHRcdH1cclxuXHR9XHJcblx0aGFzaCArPSBocmVmQmFzZSA9PSBhamF4Q3VycmVudEJhc2UgPyBwYXJhbXMgOiBocmVmQmFzZSArICc7JyArIHBhcmFtcztcclxuXHRyZXR1cm4gaGFzaDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YW5kYXJkIGV2ZW50IGJpbmRpbmdzXHJcbiAqL1xyXG5mdW5jdGlvbiBiaW5kSGFuZGxlcnMoKSB7XHJcblx0aWYgKGxvY2F0aW9uLmhhc2ggPT0gJyNjb21tZW50cycgfHwgbG9jYXRpb24uaGFzaC5tYXRjaCgvI2NcXGQrLykpIHtcclxuXHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHR9XHJcblx0JCgnLmNvbW1lbnRzX2xpbmsnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdGlmKCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScpID09ICdub25lJykge1xyXG5cdFx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRpZihsb2NhdGlvbi5ocmVmLm1hdGNoKC8jY29tbWVudHMvKSkge1xyXG5cdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdH1cclxuXHJcblx0aWYgKGFqYXhFbmFibGVkKSB7XHJcblx0XHQvLyBBSkFYIGF1dG8taGFuZGxpbmdcclxuXHRcdCQoJ2JvZHknKS5vbignc3VibWl0JywgJ2Zvcm0uYWpheCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoJCh0aGlzKS5hdHRyKCdtZXRob2QnKS50b1VwcGVyQ2FzZSgpID09ICdQT1NUJykge1xyXG5cdFx0XHRcdGFqYXhGb3JtTG9hZChhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdhY3Rpb24nKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ2NsYXNzJyksICdwb3N0JyksICQodGhpcykuYXR0cignaWQnKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdhY3Rpb24nKS5yZXBsYWNlKC8jLiokLywgJycpLCAkKHRoaXMpLmF0dHIoJ2NsYXNzJyksICQodGhpcykuc2VyaWFsaXplKCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBhamF4RXJyb3I7XHJcblx0XHR9KTtcclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYS5hamF4JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYWpheE1ha2VIYXNoKCQodGhpcykuYXR0cignaHJlZicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cigncmVsJykpO1xyXG5cdFx0XHRyZXR1cm4gYWpheEVycm9yO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQUpBWCBhY3Rpb24gY29uZmlybWF0aW9uc1xyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhLmNvbmZpcm1MaW5rJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmF0dHIoJ2hyZWYnKS5tYXRjaCgvbWVzc2FnZS4rOTIwL2kpKSB7XHJcblx0XHRcdFx0aWYgKCQoJyNjb25maXJtQm94JykpIHtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQoJ2JvZHknKS5wcmVwZW5kKCc8ZGl2IGlkPVwiY29uZmlybUJveFwiIGNsYXNzPVwianFtV2luZG93XCI+PC9kaXY+Jyk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW0oe2FqYXg6JCh0aGlzKS5hdHRyKCdocmVmJyksbW9kYWw6dHJ1ZSxvbkxvYWQ6ZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdCQoJyNjb25maXJtQm94JykuY3NzKCdtYXJnaW4tbGVmdCcsICctJysoJCgnI2NvbmZpcm1Cb3gnKS53aWR0aCgpLzIpKydweCcpO1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5jc3MoJ21hcmdpbi10b3AnLCAnLScrKCQoJyNjb25maXJtQm94JykuaGVpZ2h0KCkvMikrJ3B4Jyk7XHJcblx0XHRcdFx0fX0pO1xyXG5cdFx0XHRcdCQoJyNjb25maXJtQm94JykuanFtU2hvdygpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTGlzdGVuIHRvIGhhc2ggY2hhbmdlIGV2ZW50c1xyXG5cdFx0JCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGFqYXhQYWdlTG9hZCh3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIy8sICcnKSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EjY29uZmlybU5vJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKFwiI2NvbmZpcm1Cb3hcIikuaXMoXCIuanFtV2luZG93XCIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW1IaWRlKCk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiBqUXVlcnkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIElmIHBhZ2Ugd2FzIGxvYWRlZCB3aXRoIGhhc2hcclxuICAgICAgICBpZiAoYWpheEVuYWJsZWQpIHtcclxuICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhhc2ggIT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGFqYXhQYWdlTG9hZCh3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIy8sICcnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJpbmRIYW5kbGVycygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbndpbmRvdy5uYW1lID0gJ21haW4nOyIsIi8qKlxyXG4gKiBCYXNlIENvdG9udGkgY2xhc3NcclxuICovXHJcbmNsYXNzIENvdG9udGlBcHBsaWNhdGlvblxyXG57XHJcbiAgICAvKipcclxuICAgICAqIExvYWQgZGF0YSBmcm9tIC9pbmRleC5waHA/bj1tYWluJmE9Z2V0XHJcbiAgICAgKiBDYW4gYmUgdXNlZnVsLCBmb3IgZXhhbXBsZSB3aGVuIGl0IGlzIG5lZWRlZCB0byBsb2FkIHNvbWUgZHluYW1pYyBjb250ZW50IHRvIGNhY2hlZCBwYWdlXHJcbiAgICAgKlxyXG4gICAgICogRXhhbXBsZTpcclxuICAgICAqIGNvdC5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgKiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICogfSk7XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHdoYXQgQXJyYXkgb3Igc3RyaW5nLiBEYXRhIHRvIGxvYWQuIEZvciBleGFtcGxlLCBbJ2NhcHRjaGEnLCAneCddICh4IC0gYW50aSBYU1MgcGFyYW1ldGVyIHZhbHVlKVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e30+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkRGF0YSh3aGF0KSB7XHJcbiAgICAgICAgaWYgKCF3aGF0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlZERhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZERhdGEgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkYXRhVG9Mb2FkID0gW107XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2hhdCA9PT0gJ3N0cmluZycgfHwgd2hhdCBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICB3aGF0ID0gW3doYXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVRvTG9hZC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YVRvTG9hZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIEB0b2RvIGNoYW5nZSB0byBzeXN0ZW0gY29udHJvbGxlciB3aGVuIGl0IHdpbGwgYmUgaW1wbGVtZW50ZWRcclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe246ICdtYWluJywgYTogJ2dldCd9KTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFUb0xvYWQuZm9yRWFjaCgoaXRlbSwgaW5kZXgsIGFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdkYXRhWycgKyBpbmRleCArICddJywgaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdfYWpheCcsIDEpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2luZGV4LnBocD8nICsgcGFyYW1zLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVzcG9uc2VEYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkRGF0YVtrZXldID0gcmVzcG9uc2VEYXRhLmRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhUVFAgZXJyb3JcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZXJyb3JcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2Ygd2hhdCkge1xyXG4gICAgICAgICAgICBpZiAoKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2l0ZW1dID0gdGhpcy5sb2FkZWREYXRhW2l0ZW1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBjYXB0Y2hhIHZpYSBhamF4LiBVc2VkIG9uIGNhY2hlZCBwYWdlcy5cclxuICAgICAqL1xyXG4gICAgbG9hZENhcHRjaGEoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjYXB0Y2hhRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FwdGNoYS1wbGFjZS1ob2xkZXInKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBjYXB0Y2hhRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gcmVzdWx0LmNhcHRjaGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVTY3JpcHRFbGVtZW50cyhlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2FwdGNoYS1wbGFjZS1ob2xkZXInLCAnbG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYXB0Y2hhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9IGVsZW1lbnQuY2xvc2VzdCgnZm9ybScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvcm0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXRYID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdW25hbWU9XCJ4XCJdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0WCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFguc2V0QXR0cmlidXRlKCd2YWx1ZScsIHJlc3VsdC54KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHlvdSBhcHBlbmQgPHNjcmlwdD4gdGFncyB0byB0aGUgZWxlbWVudHMgb2YgdGhlIGZpbmlzaGVkIERPTSBkb2N1bWVudCwgdGhleSB3aWxsIG5vdCBiZSBleGVjdXRlZCBhdXRvbWF0aWNhbGx5LlxyXG4gICAgICogVGhlIG1ldGhvZCBleGVjdXRlcyA8c2NyaXB0PiBzY3JpcHRzIG5lc3RlZCBpbiB0aGUgc3BlY2lmaWVkIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbGVtZW50IE5vZGVcclxuICAgICAqL1xyXG4gICAgZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGNvbnRhaW5lckVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50cyA9IGNvbnRhaW5lckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0Jyk7XHJcblxyXG4gICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudHMpLmZvckVhY2goKHNjcmlwdEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2xvbmVkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBBcnJheS5mcm9tKHNjcmlwdEVsZW1lbnQuYXR0cmlidXRlcykuZm9yRWFjaCgoYXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZWRFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUubmFtZSwgYXR0cmlidXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNsb25lZEVsZW1lbnQudGV4dCA9IHNjcmlwdEVsZW1lbnQudGV4dDtcclxuICAgICAgICAgICAgc2NyaXB0RWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZWRFbGVtZW50LCBzY3JpcHRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmNvdCA9IG5ldyBDb3RvbnRpQXBwbGljYXRpb24oKTtcclxuIl19
